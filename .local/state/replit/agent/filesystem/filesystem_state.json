{"file_contents":{"frontend/src/components/addModal.tsx":{"content":"import React, { useState, FormEvent, ChangeEvent } from 'react';\nimport axios from 'axios';\nimport { API_BASE_URL, CATEGORY_OPTIONS, CreateEmployeeDto } from '../constants';\n\ninterface AddEmployeeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onEmployeeAdded: () => void;\n}\n\nconst initialFormData: CreateEmployeeDto = {\n    name: '',\n    phoneNumber: '',\n    email: '',\n    birthday: '',\n    category: CATEGORY_OPTIONS[0],\n};\n\nconst AddEmployeeModal: React.FC<AddEmployeeModalProps> = ({ isOpen, onClose, onEmployeeAdded }) => {\n    // Tipagem do estado com a interface CreateEmployeeDto\n    const [formData, setFormData] = useState<CreateEmployeeDto>(initialFormData);\n\n    if (!isOpen) return null;\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        // TypeScript infere que name corresponde a uma chave de CreateEmployeeDto\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        try {\n            await axios.post(API_BASE_URL, formData);\n            alert('Funcion√°rio adicionado com sucesso!');\n            onEmployeeAdded(); \n            setFormData(initialFormData); // Resetar formul√°rio\n            onClose(); \n        } catch (error) {\n            console.error('Erro ao adicionar funcion√°rio:', error);\n            alert('Erro ao adicionar funcion√°rio. Verifique o console.');\n        }\n    };\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>Add new employee</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    {/* Mapeamento dos campos */}\n                    {['Name', 'Birthday', 'E-mail', 'Phone'].map(label => {\n                        const name = label.toLowerCase().replace(/[-]/g, '');\n                        // Mapeia o label para a chave correta do DTO\n                        const key: keyof CreateEmployeeDto = name === 'e-mail' ? 'email' : (name === 'phone' ? 'phoneNumber' : name as keyof CreateEmployeeDto);\n                        return (\n                            <React.Fragment key={key}>\n                                <label style={modalStyles.label}>{label}</label>\n                                <input\n                                    type={key === 'birthday' ? 'date' : 'text'}\n                                    name={key}\n                                    value={formData[key]}\n                                    onChange={handleChange}\n                                    style={modalStyles.input}\n                                    required\n                                />\n                            </React.Fragment>\n                        );\n                    })}\n\n                    {/* Campo de Category (DDL) */}\n                    <label style={modalStyles.label}>Category</label>\n                    <select\n                        name=\"category\"\n                        value={formData.category}\n                        onChange={handleChange}\n                        style={modalStyles.input}\n                        required\n                    >\n                        {CATEGORY_OPTIONS.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                        ))}\n                    </select>\n\n                    <div style={modalStyles.buttonGroup}>\n                        <button type=\"submit\" style={modalStyles.addButton}>\n                            Add new employee\n                        </button>\n                        <button type=\"button\" onClick={onClose} style={modalStyles.cancelButton}>\n                            Cancel\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AddEmployeeModal;\ninterface CustomStyles{\n    overlay: React.CSSProperties;\n    container: React.CSSProperties;\n    title: React.CSSProperties;\n    form: React.CSSProperties;\n    label: React.CSSProperties;\n    input: React.CSSProperties;\n    buttonGroup: React.CSSProperties;\n    //updateButton: React.CSSProperties;\n    addButton: React.CSSProperties;\n    cancelButton: React.CSSProperties;\n}\n// Estilos b√°sicos (mantidos do c√≥digo anterior)\nconst modalStyles: CustomStyles = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '8px',\n        width: '400px', boxShadow: '0 4px 10px rgba(0, 0, 0, 0.1)',\n        textAlign: 'center'\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    label: {\n        fontSize: '14px', color: '#333', marginTop: '10px',\n    },\n    input: {\n        padding: '10px', margin: '5px 0 15px 0', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px',\n    },\n    buttonGroup: {\n        marginTop: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center',\n    },\n    addButton: {\n        backgroundColor: '#003366', color: 'white', padding: '12px 20px',\n        border: 'none', borderRadius: '5px', cursor: 'pointer',\n        fontSize: '16px', fontWeight: 'bold', boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n        marginBottom: '10px', width: '100%',\n    },\n    cancelButton: {\n        backgroundColor: 'transparent', color: '#CC0000', border: 'none',\n        cursor: 'pointer', fontSize: '14px', textDecoration: 'underline',\n    }\n};","size_bytes":5868},"backend/src/auth/local-auth.guard.ts":{"content":"import { ExecutionContext, Injectable } from '@nestjs/common';\nimport { AuthGuard } from '@nestjs/passport';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class LocalAuthGuard extends AuthGuard('local') {\n\n    async canActivate(context: ExecutionContext): Promise<boolean> {\n        const result = (await super.canActivate(context)) as boolean;\n        const request = context.switchToHttp().getRequest();\n\n      if (result) {\n        await super.logIn(request);\n      }\n    \n      return result;\n    }\n    \n}","size_bytes":520},"backend/src/employees/create-employees.dto.ts":{"content":"export class CreateEmployeesDto {\n    name: string; \n    phoneNumber: string;\n    email: string;\n    birthday: string;\n    category: string;\n  }","size_bytes":144},"frontend/src/setupTests.ts":{"content":"// jest-dom adds custom jest matchers for asserting on DOM nodes.\n// allows you to do things like:\n// expect(element).toHaveTextContent(/react/i)\n// learn more: https://github.com/testing-library/jest-dom\nimport '@testing-library/jest-dom';\n","size_bytes":241},"frontend/src/pages/AdminAircraftsPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Navbar from \"../components/layouts/navbar\";\nimport PageContainer from \"../components/layouts/pageContainer\";\nimport SectionHeader from \"../components/layouts/sectionHeader\";\nimport DataCard from \"../components/cards/DataCard\";\nimport DangerButton from \"../components/buttons/dangerButton\";\nimport { AdminTabs } from '../components/layouts/adminTabs';\nimport AircraftModal from '../components/aircraftModal'; // Modal para CRUD de Aeronaves\nimport { API_BASE_URL as AIRCRAFTS_API, Aircraft, CreateAircraftDto, UpdateAircraftDto } from '../aircrafts.constants'; // API Aeronaves\nimport { API_BASE_URL as TYPES_API, AircraftType } from '../aircraft-types.constants'; // API Tipos de Aeronave\n\nexport default function AdminAircraftsPage() {\n  const [aircrafts, setAircrafts] = useState<Aircraft[]>([]);\n  const [aircraftTypes, setAircraftTypes] = useState<AircraftType[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [aircraftToEdit, setAircraftToEdit] = useState<Aircraft | null>(null);\n\n  // --- Fun√ß√µes de API ---\n\n  // 1. Busca a lista de Aeronaves e Tipos\n  const fetchAllData = async () => {\n    setIsLoading(true);\n    try {\n      // Busca Aeronaves\n      const aircraftsResponse = await axios.get<Aircraft[]>(AIRCRAFTS_API);\n      \n      // Busca Tipos de Aeronave (para o DDL)\n      const typesResponse = await axios.get<AircraftType[]>(TYPES_API);\n\n      setAircrafts(aircraftsResponse.data);\n      setAircraftTypes(typesResponse.data);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      alert('Error loading aircraft data.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchAllData();\n  }, []);\n\n  // 2. Fun√ß√£o de Salvar/Atualizar (passada para o modal)\n  const handleSaveAircraft = async (data: CreateAircraftDto | UpdateAircraftDto) => {\n    // ... Aqui estaria a l√≥gica axios.post ou axios.patch do modal ...\n    await fetchAllData(); // Recarrega os dados ap√≥s salvar\n  };\n\n  // 3. Fun√ß√£o de Exclus√£o\n  const handleDeleteAircraft = async (id: string, type: string) => {\n    if (!window.confirm(`Are you sure you want to delete aircraft ${id} (${type})?`)) {\n      return;\n    }\n    try {\n      await axios.delete(`${AIRCRAFTS_API}/${id}`);\n      alert(`Aircraft ${id} deleted successfully.`);\n      fetchAllData();\n    } catch (error) {\n      console.error('Error deleting aircraft:', error);\n      alert('Error deleting aircraft. Check the console.');\n    }\n  };\n\n  // --- Fun√ß√µes de Modal ---\n  const handleAdd = () => {\n    setAircraftToEdit(null);\n    setIsModalOpen(true);\n  };\n\n  const handleEdit = (aircraft: Aircraft) => {\n    setAircraftToEdit(aircraft);\n    setIsModalOpen(true);\n  };\n  \n  // --- Renderiza√ß√£o ---\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <Navbar />\n        <div style={loadingStyles}>Loading aircraft data...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n      <AdminTabs />\n      <PageContainer>\n        <SectionHeader \n          title=\"Aircrafts\" \n          buttonText=\"Add new aircraft\" \n          onButtonClick={handleAdd} \n        />\n        \n        {aircrafts.length === 0 && <p className=\"text-gray-500\">Nenhuma aeronave cadastrada.</p>}\n\n        {aircrafts.map((a) => (\n          <DataCard\n            key={a.id}\n            actions={\n              <>\n                <button \n                  onClick={() => handleEdit(a)} \n                  className=\"text-blue-800 hover:text-blue-900 p-1 rounded transition\"\n                  title=\"Edit Aircraft\"\n                >\n                  ‚úèÔ∏è\n                </button>\n                <DangerButton onClick={() => handleDeleteAircraft(a.id, a.aircraftType.type)}>üóëÔ∏è</DangerButton>\n              </>\n            }\n          >\n            <div className=\"flex justify-between w-full\">\n              <span className=\"font-medium\">{a.id}</span>\n              <span className=\"text-gray-700\">{a.aircraftType.type}</span>\n            </div>\n          </DataCard>\n        ))}\n      </PageContainer>\n\n      {/* Modal de Adi√ß√£o/Edi√ß√£o de Aeronaves */}\n      <AircraftModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        onAircraftSaved={fetchAllData}\n        aircraftToEdit={aircraftToEdit}\n        aircraftTypes={aircraftTypes} // Passa a lista de tipos\n      />\n    </div>\n  );\n}\n\nconst loadingStyles: React.CSSProperties = {\n    textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n    color: '#555',\n};\n","size_bytes":4696},"frontend/src/pages/AirportsPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport AirportCard from '../components/airportCard';\nimport AirportModal from '../components/airportModal';\nimport { API_BASE_URL, Airport } from '../airports.constants';\nimport Navbar from \"../components/layouts/navbar\"; \nimport PageContainer from \"../components/layouts/pageContainer\"; \nimport SectionHeader from \"../components/layouts/sectionHeader\";\nimport { AdminTabs } from \"../components/layouts/adminTabs\"; \n\nconst AirportsPage: React.FC = () => {\n    const [airports, setAirports] = useState<Airport[]>([]);\n    const [isLoading, setIsLoading] = useState<boolean>(true);\n    const [isModalOpen, setIsModalOpen] = useState<boolean>(false);\n    const [airportToEdit, setAirportToEdit] = useState<Airport | null>(null);\n\n    const fetchAirports = async () => {\n        setIsLoading(true);\n        try {\n            const response = await axios.get<Airport[]>(API_BASE_URL); \n            setAirports(response.data);\n        } catch (error) {\n            console.error('Erro ao buscar aeroportos:', error);\n            alert('Erro ao carregar a lista de aeroportos.');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchAirports();\n    }, []);\n\n    const handleAdd = () => {\n        setAirportToEdit(null); \n        setIsModalOpen(true);\n    };\n\n    const handleEdit = (airport: Airport) => {\n        setAirportToEdit(airport);\n        setIsModalOpen(true);\n    };\n\n    const handleDelete = async (id: number, name: string) => {\n        if (!window.confirm(`Tem certeza que deseja deletar o aeroporto ${name}?`)) {\n            return;\n        }\n        try {\n            await axios.delete(`${API_BASE_URL}/${id}`); \n            alert(`Aeroporto ${name} deletado com sucesso!`);\n            fetchAirports(); \n        } catch (error) {\n            console.error('Erro ao deletar aeroporto:', error);\n            alert('Erro ao deletar aeroporto. Verifique o console.');\n        }\n    };\n    \n    const handleCloseModal = () => {\n        setIsModalOpen(false);\n        setAirportToEdit(null);\n    };\n\n\n    if (isLoading) {\n        return (\n            <div className=\"min-h-screen bg-gray-50\">\n                <Navbar />\n                <div style={pageStyles.loading}>Carregando aeroportos...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <Navbar />\n            <AdminTabs /> \n            <PageContainer> \n                \n                <SectionHeader\n                    title=\"Airports\"\n                    buttonText=\"Add new airport\"\n                    onButtonClick={handleAdd}\n                />\n                <div style={listContainerStyles}>\n                    {airports.length === 0 ? (\n                        <p>Nenhum aeroporto cadastrado.</p>\n                    ) : (\n                        airports.map(airport => (\n                            <AirportCard\n                                key={airport.id}\n                                airport={airport}\n                                onEdit={handleEdit}\n                                onDelete={handleDelete}\n                            />\n                        ))\n                    )}\n                </div>\n\n                <AirportModal\n                    isOpen={isModalOpen}\n                    onClose={handleCloseModal}\n                    onAirportSaved={fetchAirports}\n                    airportToEdit={airportToEdit}\n                />\n            </PageContainer>\n        </div>\n    );\n};\n\nexport default AirportsPage;\n\nconst listContainerStyles: React.CSSProperties = {\n    display: 'flex', \n    flexDirection: 'column', \n    gap: '10px',\n};\n\nconst pageStyles: any = {\n    loading: {\n        textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n        color: '#555',\n    }\n};","size_bytes":3886},"frontend/src/pages/CreateAccountPage.tsx":{"content":"import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { API_BASE_URL } from '../config';\n\nconst API_URL = `${API_BASE_URL}/users`;\n\n\ninterface FullCreateUserDto {\n    name: string;\n    address: string;\n    phoneNumber: string;\n    email: string;\n    workplace: string;\n    workplaceAddress: string;\n    birthday: string;\n    CPF: string;\n    RG: string;\n    RGIssueDate: string;\n    IssuingBodyofRG: string;\n    password: string;\n}\n\nconst initialFormState: FullCreateUserDto = {\n    name: '',\n    address: '',\n    phoneNumber: '',\n    email: '',\n    workplace: '',\n    workplaceAddress: '',\n    birthday: '',\n    password: '', \n    CPF: '', \n    RG: '',\n    RGIssueDate: '',\n    IssuingBodyofRG: ''\n};\n\n\ninterface InputFieldProps {\n    label: string;\n    name: keyof FullCreateUserDto;\n    placeholder: string;\n    type?: string;\n    value: string; \n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void; \n    customInputProps?: React.InputHTMLAttributes<HTMLInputElement>;\n}\n\nconst InputField: React.FC<InputFieldProps> = \n    ({ label, name, placeholder, type = 'text', value, onChange, customInputProps = {} }) => (\n    <div style={styles.inputGroup}>\n        <label htmlFor={name} style={styles.label}>{label}</label>\n        <input\n            id={name} \n            type={type}\n            name={name}\n            value={value} \n            onChange={onChange} \n            placeholder={placeholder}\n            style={styles.input}\n            required\n            {...customInputProps}\n        />\n    </div>\n);\n\n\nconst CreateAccountScreen: React.FC = () => {\n    const [formData, setFormData] = useState<FullCreateUserDto>(initialFormState);\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState('');\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        let newValue = value;\n\n        if (name === 'phoneNumber') {\n            newValue = value.replace(/[^0-9]/g, ''); \n        }\n        \n        if (name === 'CPF') {\n            newValue = value.replace(/[^0-9]/g, '').slice(0, 11);\n        }\n\n        if (name === 'RG') {\n            newValue = value.replace(/[^0-9]/g, '').slice(0, 9);\n        }\n\n        if (name === 'birthday' || name === 'RGIssueDate') {\n            if (e.target.type !== 'date') {\n                newValue = value.replace(/[^0-9-]/g, ''); \n     \n            }\n        }\n        \n        setFormData(prev => ({ \n            ...prev, \n            [name as keyof FullCreateUserDto]: newValue \n        }));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setMessage('');\n\n        if (formData.CPF.length !== 11) {\n            setMessage('Error: The identification number (CPF) must contain 11 digits.');\n            setLoading(false);\n            return;\n        }\n        if (formData.RG.length !== 9) {\n            setMessage('Error: The RG must contain 9 digits.');\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const response = await fetch(API_URL, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(formData),\n            });\n\n            if (response.ok) {\n                setMessage('Account created successfully!');\n            } else {\n                const errorData = await response.json();\n                setMessage(`Error creating account: ${errorData.message || response.statusText}`);\n            }\n        } catch (error) {\n            console.error('Network error:', error);\n            setMessage('Server connection error.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div style={styles.container}>\n            <div style={styles.header}>\n                <div style={styles.logoContainer}>\n                    <span style={styles.logoText}>AURORA AIRLINES</span>\n                </div>\n                <Link to=\"/\" style={styles.registerLink}>\n                <button style={styles.signInButton}>Sign in</button>\n                </Link>\n            </div>\n\n            <div style={styles.mainContent}>\n                <div style={styles.formContainer}>\n                    <h2 style={styles.title}>Create your account</h2>\n                    \n                    <form onSubmit={handleSubmit}>\n                        <InputField label=\"Full name\" name=\"name\" placeholder=\"Name and surname\" value={formData.name} onChange={handleChange} />\n                        <InputField label=\"Address\" name=\"address\" placeholder=\"Full address\" value={formData.address} onChange={handleChange} />\n                        <InputField \n                            label=\"Phone number\" \n                            name=\"phoneNumber\" \n                            placeholder=\"With country code\" \n                            value={formData.phoneNumber} \n                            onChange={handleChange}\n                            customInputProps={{ inputMode: 'numeric', maxLength: 15 }}\n                        />\n                        <InputField label=\"E-mail\" name=\"email\" placeholder=\"example@email.com\" type=\"email\" value={formData.email} onChange={handleChange} />\n                        <InputField label=\"Workplace\" name=\"workplace\" placeholder=\"Name of company\" value={formData.workplace} onChange={handleChange} />\n                        <InputField label=\"Workplace address\" name=\"workplaceAddress\" placeholder=\"Full address\" value={formData.workplaceAddress} onChange={handleChange} />\n                        <InputField \n                            label=\"Birthday\" \n                            name=\"birthday\" \n                            placeholder=\"yyyy-mm-dd\" \n                            type=\"text\" \n                            value={formData.birthday} \n                            onChange={handleChange} \n                            customInputProps={{ pattern: \"\\\\d{4}-\\\\d{2}-\\\\d{2}\", title: \"Formato: YYYY-MM-DD\" }}\n                        />\n\n                        <h3 style={styles.subTitle}>Documentos e Seguran√ßa</h3>\n                        <InputField label=\"Password\" name=\"password\" placeholder=\"Password\" type=\"password\" value={formData.password} onChange={handleChange} />\n                        \n                        <InputField \n                            label=\"CPF\" \n                            name=\"CPF\" \n                            placeholder=\"00000000000\" \n                            value={formData.CPF} \n                            onChange={handleChange}\n                            customInputProps={{ inputMode: 'numeric', maxLength: 11 }}\n                        />\n                        <InputField \n                            label=\"RG\" \n                            name=\"RG\" \n                            placeholder=\"000000000\" \n                            value={formData.RG} \n                            onChange={handleChange}\n                            customInputProps={{ inputMode: 'numeric', maxLength: 9 }}\n                        />\n                        <InputField \n                        label=\"RG Issue Date\" \n                        name=\"RGIssueDate\" \n                        placeholder=\"yyyy-mm-dd\" \n                        type=\"text\" \n                        value={formData.RGIssueDate} \n                        onChange={handleChange} \n                        customInputProps={{ pattern: \"\\\\d{4}-\\\\d{2}-\\\\d{2}\", title: \"Formato: YYYY-MM-DD\" }}\n                    />\n                        <InputField label=\"Issuing Body of RG\" name=\"IssuingBodyofRG\" placeholder=\"Ex: SSP/SP\" value={formData.IssuingBodyofRG} onChange={handleChange} />\n\n\n                        {message && <p style={{ color: message.startsWith('Erro') ? 'red' : 'green', marginTop: '15px' }}>{message}</p>}\n\n                        <button type=\"submit\" disabled={loading} style={styles.submitButton}>\n                            {loading ? 'Criando...' : 'Create Account'}\n                        </button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default CreateAccountScreen;\n\n\n\nconst styles: any = {\n    container: {\n        minHeight: '100vh',\n        backgroundColor: '#f4f7f6',\n        fontFamily: 'Arial, sans-serif',\n    },\n    header: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '15px 50px',\n        backgroundColor: '#003366', \n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logoText: {\n        color: '#a0ffff',\n        fontSize: '24px',\n        fontWeight: 'bold',\n        letterSpacing: '2px',\n    },\n    registerLink: {\n        textDecoration: 'none',\n    },\n    signInButton: {\n        backgroundColor: '#005f99',\n        color: 'white',\n        border: 'none',\n        padding: '10px 20px',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        fontWeight: 'bold',\n        transition: 'background-color 0.3s',\n    },\n    mainContent: {\n        display: 'flex',\n        justifyContent: 'center',\n        padding: '40px 20px',\n    },\n    formContainer: {\n        backgroundColor: 'white',\n        padding: '40px',\n        borderRadius: '10px',\n        boxShadow: '0 4px 15px rgba(0, 0, 0, 0.1)',\n        width: '100%',\n        maxWidth: '500px',\n    },\n    title: {\n        color: '#003366',\n        textAlign: 'center',\n        marginBottom: '30px',\n        fontSize: '28px',\n    },\n    subTitle: {\n        color: '#003366',\n        marginTop: '30px',\n        marginBottom: '15px',\n        borderBottom: '1px solid #eee',\n        paddingBottom: '5px',\n        fontSize: '18px',\n    },\n    inputGroup: {\n        marginBottom: '15px',\n    },\n    label: {\n        display: 'block',\n        marginBottom: '5px',\n        color: '#333',\n        fontWeight: '600',\n    },\n    input: {\n        width: '100%',\n        padding: '12px',\n        border: '1px solid #ccc',\n        borderRadius: '5px',\n        boxSizing: 'border-box',\n        fontSize: '16px',\n    },\n    submitButton: {\n        width: '100%',\n        padding: '15px',\n        backgroundColor: '#005f99',\n        color: 'white',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        fontSize: '18px',\n        fontWeight: 'bold',\n        marginTop: '25px',\n        transition: 'background-color 0.3s',\n    }\n};","size_bytes":10552},"frontend/src/App.test.tsx":{"content":"import React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport App from './App';\n\ntest('renders learn react link', () => {\n  render(<App />);\n  const linkElement = screen.getByText(/learn react/i);\n  expect(linkElement).toBeInTheDocument();\n});\n","size_bytes":273},"frontend/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"backend/src/auth/auth.module.ts":{"content":"// src/auth/auth.module.ts\nimport { Module } from '@nestjs/common';\nimport { PassportModule } from '@nestjs/passport';\nimport { UsersModule } from 'src/users/user.module'; // Importe seu m√≥dulo de usu√°rio\nimport { AuthService } from './auth.service';\nimport { LocalStrategy } from './local.strategy';\nimport { AuthController } from './auth.controller';\nimport { SessionSerializer } from './session.serializer';\nimport { SessionAuthGuard } from './session-auth.guard'; // O guard que criamos\n\n@Module({\n  imports: [\n    UsersModule, // Precisa do UsersService para buscar usu√°rios\n    PassportModule.register({ session: true }), // <-- Habilita sess√µes no Passport\n  ],\n  providers: [\n    AuthService,\n    LocalStrategy,     // Valida usu√°rio e senha\n    SessionSerializer, // Salva/l√™ usu√°rio da sess√£o\n    SessionAuthGuard,  // Protege rotas\n  ],\n  controllers: [AuthController],\n  exports: [SessionAuthGuard], // Exporta o Guard para outros m√≥dulos usarem\n})\nexport class AuthModule {}","size_bytes":996},"frontend/src/pages/AdminReportsPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Navbar from '../components/layouts/navbar';\nimport PageContainer from '../components/layouts/pageContainer';\nimport { AdminTabs } from '../components/layouts/adminTabs';\nimport { API_BASE_URL as FLIGHT_TYPES_API, FlightType } from '../flight-types.constants';\n\n// Interface para o estado do formul√°rio\ninterface ReportFormData {\n  category: string;\n  filterByType: string;\n  filterByValue: string;\n  startDate: string;\n  endDate: string;\n}\n\ninterface ReportData {\n  category: string;\n  period: string;\n  filterDescription: string;\n  totalSales?: string;\n  ticketsSold?: number;\n  occupationRate?: string;\n  // ... ou poderia ser uma lista:\n  // items: any[];\n}\n\n// Op√ß√µes do formul√°rio\nconst categoryOptions = [\n  { value: 'sales', label: 'Sum of sales' },\n  { value: 'tickets', label: 'Tickets sold' },\n  { value: 'occupation', label: 'Seats occupation' },\n];\n\nconst filterOptions = [\n  { value: 'all', label: 'All flights' },\n  { value: 'type', label: 'Type of flight' },\n  { value: 'number', label: 'Flight number' },\n];\n\n/**\n * Componente para a p√°gina de Relat√≥rios do Admin.\n */\nconst AdminReportsPage: React.FC = () => {\n  const [formData, setFormData] = useState<ReportFormData>({\n    category: '',\n    filterByType: 'all',\n    filterByValue: '',\n    startDate: '',\n    endDate: '',\n  });\n\n  // Estado para carregar os tipos de voo (para o filtro)\n  const [allFlightTypes, setAllFlightTypes] = useState<FlightType[]>([]);\n  const [isLoadingTypes, setIsLoadingTypes] = useState(false);\n\n  const [reportData, setReportData] = useState<ReportData | null>(null);\n  const [isReportLoading, setIsReportLoading] = useState(false);\n  const [reportError, setReportError] = useState('');\n\n  // Busca os tipos de voo (necess√°rio para o \"Filter By\")\n  useEffect(() => {\n    const fetchFlightTypes = async () => {\n      setIsLoadingTypes(true);\n      try {\n        const response = await axios.get<FlightType[]>(FLIGHT_TYPES_API);\n        setAllFlightTypes(response.data);\n      } catch (error) {\n        console.error('Failed to fetch flight types', error);\n      } finally {\n        setIsLoadingTypes(false);\n      }\n    };\n    fetchFlightTypes();\n  }, []);\n\n  // Handler gen√©rico para mudan√ßas nos inputs\n  const handleChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>,\n  ) => {\n    const { name, value } = e.target;\n    \n    setFormData(prev => {\n      const newState = { ...prev, [name]: value };\n      \n      // Se o usu√°rio mudou o *tipo* de filtro, reseta o *valor* do filtro\n      if (name === 'filterByType') {\n        newState.filterByValue = '';\n      }\n      return newState;\n    });\n  };\n\n  // Handler para limpar o formul√°rio\n  const handleClearFields = () => {\n    setFormData({\n      category: '',\n      filterByType: 'all',\n      filterByValue: '',\n      startDate: '',\n      endDate: '',\n    });\n  };\n\n  // Handler para submeter o formul√°rio\n  const handleSubmit = (e: React.FormEvent) => {\nconst handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // 1. Ativa o loading e limpa resultados antigos\n    setIsReportLoading(true);\n    setReportData(null);\n    setReportError('');\n\n    // 2. Constr√≥i o payload da requisi√ß√£o\n    const reportRequest = {\n      category: formData.category,\n      startDate: formData.startDate,\n      endDate: formData.endDate,\n      filter: formData.filterByType !== 'all' ? {\n        type: formData.filterByType,\n        value: formData.filterByValue,\n      } : undefined,\n    };\n    \n    console.log('Gerando relat√≥rio com os dados:', reportRequest);\n\n    try {\n      // --- CHAMADA DE API (Substitua pela sua API real) ---\n      // const response = await axios.post<ReportData>('http://localhost:5000/api/reports', reportRequest);\n      \n      // SIMULA√á√ÉO DE CHAMADA DE API (Remova isso quando tiver a API real)\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      const fakeResponseData: ReportData = {\n        category: categoryOptions.find(c => c.value === formData.category)?.label || formData.category,\n        period: `${formData.startDate} to ${formData.endDate}`,\n        filterDescription: filterOptions.find(f => f.value === formData.filterByType)?.label || 'Custom Filter',\n        totalSales: \"$1,234,567.89\",\n        ticketsSold: 1234,\n        occupationRate: \"82.5%\",\n      };\n      // --- Fim da Simula√ß√£o ---\n\n      // 3. Salva os dados no estado\n      setReportData(fakeResponseData); // Use 'response.data' com a API real\n    \n    } catch (error) {\n      // 4. Salva o erro\n      console.error('Falha ao gerar relat√≥rio:', error);\n      if (axios.isAxiosError(error) && error.response) {\n        setReportError(error.response.data.message || 'Um erro desconhecido ocorreu.');\n      } else {\n        setReportError('N√£o foi poss√≠vel conectar ao servidor de relat√≥rios.');\n      }\n    } finally {\n      // 5. Para o loading\n      setIsReportLoading(false);\n    }\n  };\n  };\n\n  /**\n   * Renderiza o campo de filtro condicional (o \"combo box\").\n   * Este √© o input que muda baseado no dropdown \"Filter By\".\n   */\n  const renderConditionalFilter = () => {\n    const { filterByType, filterByValue } = formData;\n\n    // Se for \"Flight number\", mostra um input de texto\n    if (filterByType === 'number') {\n      return (\n        <div style={styles.formField}>\n          <label style={styles.label} htmlFor=\"filterByValue\">Flight Number</label>\n          <input\n            type=\"text\"\n            id=\"filterByValue\"\n            name=\"filterByValue\"\n            value={filterByValue}\n            onChange={handleChange}\n            placeholder=\"e.g., AA1077\"\n            style={styles.input}\n            required\n          />\n        </div>\n      );\n    }\n    \n    // Se for \"Type of flight\", mostra um dropdown de tipos\n    if (filterByType === 'type') {\n      return (\n        <div style={styles.formField}>\n          <label style={styles.label} htmlFor=\"filterByValue\">Flight Type</label>\n          <select\n            id=\"filterByValue\"\n            name=\"filterByValue\"\n            value={filterByValue}\n            onChange={handleChange}\n            style={styles.input}\n            required\n            disabled={isLoadingTypes}\n          >\n            <option value=\"\" disabled>Select a flight type...</option>\n            {allFlightTypes.map(type => (\n              <option key={type.id} value={type.id}>{type.name}</option>\n            ))}\n          </select>\n        </div>\n      );\n    }\n\n    // Se for \"All flights\" ou o padr√£o, n√£o renderiza nada\n    // Retorna um div vazio para manter o alinhamento do grid\n    return <div></div>; \n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar />\n      <AdminTabs /> {/* Mant√©m as abas de navega√ß√£o do admin */}\n      <PageContainer>\n        {/* Usando um <h2> simples para o t√≠tulo, como na imagem */}\n        <h2 style={styles.title}>Reports</h2>\n\n        <form onSubmit={handleSubmit} style={styles.formContainer}>\n          {/* Linha 1: Category e Filter By */}\n          <div style={styles.formRow}>\n            <div style={styles.formField}>\n              <label style={styles.label} htmlFor=\"category\">Category</label>\n              <select\n                id=\"category\"\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                style={styles.input}\n                required\n              >\n                <option value=\"\" disabled>Select category...</option>\n                {categoryOptions.map(opt => (\n                  <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n              </select>\n            </div>\n            \n            <div style={styles.formField}>\n              <label style={styles.label} htmlFor=\"filterByType\">Filter By</label>\n              <select\n                id=\"filterByType\"\n                name=\"filterByType\"\n                value={formData.filterByType}\n                onChange={handleChange}\n                style={styles.input}\n              >\n                {filterOptions.map(opt => (\n                  <option key={opt.value} value={opt.value}>{opt.label}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          {/* Linha 2: Filtro Condicional (O \"Combo Box\") */}\n          <div style={styles.formRow}>\n            {renderConditionalFilter()}\n            {/* Espa√ßo reservado para manter o grid 2x2 */}\n            {formData.filterByType !== 'all' && <div></div>}\n          </div>\n\n          {/* Linha 3: Date Pickers */}\n          <div style={styles.formRow}>\n            <div style={styles.formField}>\n              <label style={styles.label} htmlFor=\"startDate\">Period starting date</label>\n              <input\n                type=\"date\"\n                id=\"startDate\"\n                name=\"startDate\"\n                value={formData.startDate}\n                onChange={handleChange}\n                style={styles.input}\n                required\n              />\n            </div>\n            <div style={styles.formField}>\n              <label style={styles.label} htmlFor=\"endDate\">Period ending date</label>\n              <input\n                type=\"date\"\n                id=\"endDate\"\n                name=\"endDate\"\n                value={formData.endDate}\n                onChange={handleChange}\n                style={styles.input}\n                required\n              />\n            </div>\n          </div>\n\n          {/* Linha 4: Bot√µes */}\n          <div style={styles.buttonContainer}>\n            <button type=\"button\" onClick={handleClearFields} style={styles.clearButton}>\n              Clear fields\n            </button>\n            <button type=\"submit\" style={styles.generateButton}>\n              Generate report\n            </button>\n          </div>\n        </form>\n\n        <div \n          style={{\n            ...styles.resultsContainer,\n            // Esconde o container se n√£o houver nada para mostrar\n            display: isReportLoading || reportError || reportData ? 'block' : 'none'\n          }}\n        >\n          {isReportLoading && (\n            <p style={styles.loadingText}>Generating report, please wait...</p>\n          )}\n          \n          {reportError && (\n            <p style={styles.errorText}>{reportError}</p>\n          )}\n\n          {reportData && (\n            <div>\n              <h3 style={styles.resultsTitle}>Report Results</h3>\n              {/* Usei <pre> para exibir os dados brutos. \n                Substitua isso por seus <DataCard> ou tabelas\n                quando souber a estrutura final dos dados.\n              */}\n              <pre style={styles.preformatted}>\n                {JSON.stringify(reportData, null, 2)}\n              </pre>\n            </div>\n          )}\n        </div>\n      </PageContainer>\n    </div>\n  );\n};\n\n// Estilos para o formul√°rio, baseados na imagem\nconst styles: { [key: string]: React.CSSProperties } = {\n  title: {\n    fontSize: '1.875rem', // 30px\n    fontWeight: '600',\n    color: '#374151', // text-gray-700\n    marginBottom: '1.5rem', // mb-6\n  },\n  formContainer: {\n    maxWidth: '700px',\n    backgroundColor: 'white',\n    padding: '2rem',\n    borderRadius: '8px',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.05)',\n    border: '1px solid #e5e7eb', // border-gray-200\n    margin: 'auto',\n  },\n  formRow: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(2, 1fr)',\n    gap: '1.5rem', // gap-6\n    marginBottom: '1.5rem', // mb-6\n  },\n  formField: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  label: {\n    marginBottom: '0.5rem', // mb-2\n    fontSize: '0.875rem', // 14px\n    fontWeight: '500',\n    color: '#374151', // text-gray-700\n  },\n  input: {\n    padding: '0.625rem 0.75rem', // 10px 12px\n    border: '1px solid #D1D5DB', // border-gray-300\n    borderRadius: '6px',\n    fontSize: '0.875rem',\n    backgroundColor: 'white',\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    gap: '1rem',\n    marginTop: '2rem',\n    borderTop: '1px solid #e5e7eb',\n    paddingTop: '1.5rem',\n  },\n  clearButton: {\n    color: '#00254A',\n    backgroundColor: 'transparent',\n    border: 'none',\n    cursor: 'pointer',\n    fontSize: '0.875rem',\n    fontWeight: '600',\n    textDecoration: 'underline',\n  },\n  generateButton: {\n    backgroundColor: '#00254A', // Cor do bot√£o da imagem\n    color: 'white',\n    border: 'none',\n    borderRadius: '6px',\n    padding: '0.625rem 1.25rem',\n    fontSize: '0.875rem',\n    fontWeight: '600',\n    cursor: 'pointer',\n  },\n\n  resultsContainer: {\n    maxWidth: '700px',\n    margin: '2rem auto 0 auto', // Margem no topo, centralizado\n    backgroundColor: 'white',\n    padding: '2rem',\n    borderRadius: '8px',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.05)',\n    border: '1px solid #e5e7eb',\n  },\n  loadingText: {\n    textAlign: 'center',\n    fontSize: '1rem',\n    color: '#555',\n    fontWeight: 500,\n  },\n  errorText: {\n    textAlign: 'center',\n    fontSize: '1rem',\n    color: '#d9534f', // Vermelho\n    fontWeight: 500,\n  },\n  resultsTitle: {\n    fontSize: '1.25rem', // 20px\n    fontWeight: '600',\n    color: '#00254A',\n    borderBottom: '1px solid #e5e7eb',\n    paddingBottom: '0.5rem',\n    marginBottom: '1rem',\n  },\n  preformatted: {\n    backgroundColor: '#f9f9f9',\n    border: '1px solid #eee',\n    padding: '1rem',\n    borderRadius: '6px',\n    fontFamily: 'monospace',\n    whiteSpace: 'pre-wrap', // Garante a quebra de linha\n    wordBreak: 'break-all',\n  },\n};\n\nexport default AdminReportsPage;","size_bytes":13633},"backend/src/flights/employee-flight.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column, ManyToOne, JoinColumn } from 'typeorm';\nimport { Flights } from './flights.entity';\nimport { Employees } from '../employees/employees.entity'; // Assumindo o caminho e nome da Entidade Employees\n\n@Entity()\nexport class EmployeeFlight {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  employeeId: number;\n\n  @Column()\n  flightId: number;\n\n  @ManyToOne(() => Flights, flight => flight.staff, { onDelete: 'CASCADE' })\n  @JoinColumn({ name: 'flightId' })\n  flight: Flights;\n\n  @ManyToOne(() => Employees, { onDelete: 'CASCADE' })\n  @JoinColumn({ name: 'employeeId' })\n  employee: Employees;\n}","size_bytes":646},"backend/src/flightTypes/flight-types.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Patch, Delete } from '@nestjs/common'; \nimport { FlightTypesService } from './flight-types.services';\nimport { CreateFlightTypesDto } from './create-flight-types.dto'; \nimport { UpdateFlightTypesDto } from './update-flight-types.dto'; \n\n@Controller('flight-types')\nexport class FlightTypesController {\n  constructor(private flightTypesService: FlightTypesService) {} \n\n  @Get() \n  findAll() {\n    return this.flightTypesService.findAll(); \n  }\n\n  @Post()\n  create(@Body() createFlightTypesDto: CreateFlightTypesDto) { \n    return this.flightTypesService.create(createFlightTypesDto); \n  }\n  \n  @Get(':id')\n  findOne(@Param('id') id: string) {\n    return this.flightTypesService.findOne(+id); \n  }\n\n  @Patch(':id')\n  update(@Param('id') id: string, @Body() updateFlightTypesDto: UpdateFlightTypesDto) {\n    return this.flightTypesService.update(+id, updateFlightTypesDto);\n  }\n\n  @Delete(':id')\n  remove(@Param('id') id: string) {\n    return this.flightTypesService.remove(+id);\n  }\n}","size_bytes":1028},"backend/src/flightTypes/flight-types.services.ts":{"content":"import { Injectable, NotFoundException } from '@nestjs/common'; \nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { FlightTypes } from './flight-types.entity';\nimport { CreateFlightTypesDto } from './create-flight-types.dto';\nimport { UpdateFlightTypesDto } from './update-flight-types.dto'; \n\n@Injectable()\nexport class FlightTypesService {\n  constructor(\n    @InjectRepository(FlightTypes)\n    private flightTypesRepository: Repository<FlightTypes>,\n  ) {}\n\n  findAll() {\n    return this.flightTypesRepository.find(); \n  }\n\n  create(createFlightTypesDto: CreateFlightTypesDto) {\n    const flightType = this.flightTypesRepository.create(createFlightTypesDto); \n    return this.flightTypesRepository.save(flightType); \n  }\n  \n  async findOne(id: number): Promise<FlightTypes> {\n    const flightType = await this.flightTypesRepository.findOne({ where: { id } });\n    if (!flightType) {\n      throw new NotFoundException(`Flight Type with ID ${id} not found.`);\n    }\n    return flightType;\n  }\n  \n  async update(id: number, updateFlightTypesDto: UpdateFlightTypesDto) {\n    const result = await this.flightTypesRepository.update(id, updateFlightTypesDto);\n    \n    if (result.affected === 0) {\n        throw new NotFoundException(`Flight Type with ID ${id} not found.`);\n    }\n    return this.flightTypesRepository.findOne({ where: { id } });\n  }\n\n  async remove(id: number): Promise<void> {\n    const result = await this.flightTypesRepository.delete(id);\n    \n    if (result.affected === 0) {\n      throw new NotFoundException(`Flight Type with ID ${id} not found.`);\n    }\n  }\n}","size_bytes":1627},"frontend/src/flights.constants.ts":{"content":"import { AircraftType } from \"./aircraft-types.constants\";\nimport { FlightType } from \"./flight-types.constants\";\nimport { Airport } from \"./airports.constants\";\nimport { Employee } from \"./constants\";\nimport { API_BASE_URL as BASE_URL } from './config';\n\nexport const API_BASE_URL = `${BASE_URL}/flights`;\n\n// Estrutura para escalas\nexport interface Transfer {\n    airportId: number;\n    departureTime: string;\n    arrivalTime: string;\n}\n\n// Estrutura principal da Entidade Flights (incluindo objetos de relacionamento)\nexport interface Flight {\n    id: number;\n    flightNumber: string;\n    \n    flightTypeId: number;\n    flightType: FlightType; // Objeto injetado do backend\n    \n    aircraftTypeId: number;\n    aircraftType: AircraftType; // Objeto injetado do backend\n    \n    originAirportId: number;\n    originAirport: Airport;\n    \n    destinationAirportId: number;\n    destinationAirport: Airport;\n    \n    departureDate: string;\n    departureTime: string;\n    arrivalDate: string;\n    arrivalTime: string;\n    estimatedDuration: string;\n    transfers: string; // JSON string\n    \n    // Lista de funcion√°rios envolvidos no voo (EmployeeFlight)\n    staff: { employee: Employee }[]; \n}\n\n// DTO de Cria√ß√£o (sem o ID e objetos de relacionamento)\nexport interface CreateFlightDto extends Omit<Flight, 'id' | 'flightType' | 'aircraftType' | 'originAirport' | 'destinationAirport' | 'staff'> {\n    staffIds: number[];\n}\n\nexport type UpdateFlightDto = Partial<CreateFlightDto>;","size_bytes":1482},"frontend/src/components/flightTypeModal.tsx":{"content":"import React, { useState, FormEvent, useEffect } from 'react';\nimport axios from 'axios';\nimport { Button } from './ui/button';\nimport { PrimaryButton } from './buttons/primaryButton';\nimport { API_BASE_URL, FlightType, CreateFlightTypeDto, UpdateFlightTypeDto } from '../flight-types.constants';\n\ninterface FlightTypeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onFlightTypeSaved: () => void;\n    flightTypeToEdit: FlightType | null;\n}\n\nconst FlightTypeModal: React.FC<FlightTypeModalProps> = ({ isOpen, onClose, onFlightTypeSaved, flightTypeToEdit }) => {\n    const isEditMode = !!flightTypeToEdit;\n    const [name, setName] = useState('');\n\n    useEffect(() => {\n        if (flightTypeToEdit) {\n            setName(flightTypeToEdit.name);\n        } else {\n            setName('');\n        }\n    }, [flightTypeToEdit, isOpen]);\n\n    if (!isOpen) return null;\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        \n        try {\n            if (isEditMode && flightTypeToEdit) {\n                const data: UpdateFlightTypeDto = { name };\n                await axios.patch(`${API_BASE_URL}/${flightTypeToEdit.id}`, data);\n                alert(`Flight type '${name}' updated successfully!`); \n            } else {\n                const data: CreateFlightTypeDto = { name };\n                await axios.post(API_BASE_URL, data);\n                alert(`Flight type '${name}' added successfully!`);\n            }\n            \n            onFlightTypeSaved(); \n            onClose();\n        } catch (error) {\n            console.error(`Error saving flight type:`, error);\n            const errorMessage = axios.isAxiosError(error) && error.response?.data?.message\n                ? error.response.data.message\n                : `Error saving flight type. Check the console.`;\n            alert(errorMessage);\n        }\n    };\n\n    const title = isEditMode ? 'Edit Flight Type' : 'Add New Flight Type';\n    const buttonText = isEditMode ? 'Save changes' : 'Add new type';\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>{title}</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    <div style={modalStyles.inputGroup}>\n                        <label htmlFor=\"name\">Type Name (e.g., Nacional, Fretado)</label>\n                        <input \n                            id=\"name\" \n                            type=\"text\" \n                            value={name} \n                            onChange={(e) => setName(e.target.value)} \n                            style={modalStyles.input} \n                            required \n                        />\n                    </div>\n                    \n                    <div style={modalStyles.buttonGroup}>\n                        <PrimaryButton type=\"submit\">\n                            {buttonText}\n                        </PrimaryButton>\n                        <Button type=\"button\" onClick={onClose} variant=\"link\" className='text-red-500 hover:text-red-600'>\n                            Cancel\n                        </Button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default FlightTypeModal;\n\nconst modalStyles: { [key: string]: React.CSSProperties } = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '8px',\n        width: '400px', boxShadow: '0 4px 10px rgba(0, 0, 0, 0.1)',\n        textAlign: 'center'\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    inputGroup: {\n        marginBottom: '15px',\n    },\n    input: {\n        padding: '10px', margin: '5px 0 15px 0', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px', boxSizing: 'border-box',\n    },\n    buttonGroup: {\n        marginTop: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center',\n        gap: '10px',\n    },\n};","size_bytes":4349},"backend/src/userFlights/userFlights.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column, ManyToOne, JoinColumn } from 'typeorm';\nimport { User } from '../users/user.entity'; \nimport { Flights } from '../flights/flights.entity';\nimport { Airports } from 'src/airports/airports.entity';\n\n\n@Entity('user_flights') \nexport class UserFlights {\n  \n  @PrimaryGeneratedColumn() \n  id: number;\n\n  // --- Rela√ß√£o N:1 com Usu√°rio ---\n  // \"Muitas reservas pertencem a UM usu√°rio\"\n\n  @Column()\n  userId: number; // Corresponde ao tipo 'id: number' da sua entidade User\n\n  @ManyToOne(() => User, (user) => user.bookings) // 'bookings' foi o campo que adicionei √† sua User.entity\n  @JoinColumn({ name: 'userId' })\n  user: User;\n\n  // --- Rela√ß√£o N:1 com Voo ---\n  // \"Muitas reservas podem ser feitas para UM voo\"\n\n  @Column()\n  flightId: number; // Corresponde ao tipo 'id: number' da sua entidade Flights\n\n  @ManyToOne(() => Flights) // Voc√™ pode adicionar a rela√ß√£o inversa em Flights se quiser\n  @JoinColumn({ name: 'flightId' })\n  flight: Flights;\n\n  // --- Dados Espec√≠ficos da Reserva ---\n  // Informa√ß√µes que s√≥ existem nesta reserva espec√≠fica\n\n  @Column({ nullable: true }) // O assento pode ser definido depois\n  seatNumber: string; // Ex: \"17C\"\n\n  @Column({\n    enum: ['booked', 'checked-in', 'cancelled', 'completed'],\n    default: 'booked'\n  })\n  status: 'booked' | 'checked-in' | 'cancelled' | 'completed';\n  \n  @Column({ type: 'datetime', default: () => 'CURRENT_TIMESTAMP' })\n  createdAt: Date; // Para saber quando a reserva foi feita\n}","size_bytes":1515},"frontend/src/config.ts":{"content":"const getApiBaseUrl = (): string => {\n  if (process.env.REACT_APP_API_URL) {\n    return process.env.REACT_APP_API_URL;\n  }\n  \n  if (typeof window !== 'undefined') {\n    const { protocol, hostname, port } = window.location;\n    \n    // In Replit, both frontend and backend are proxied through the same domain\n    if (hostname.includes('replit.dev') || hostname.includes('repl.co') || hostname.includes('replit.app')) {\n      return `${protocol}//${hostname}${port ? ':' + port : ''}`;\n    }\n  }\n  \n  // Local development: backend runs on port 5000\n  return 'http://localhost:5000';\n};\n\nexport const API_BASE_URL = getApiBaseUrl();\n","size_bytes":630},"frontend/src/components/aircraftTypesModal.tsx":{"content":"import React, { useState, FormEvent, useEffect } from 'react';\nimport SeatMapEditor from './forms/seatMapEditor';\nimport { PrimaryButton } from './buttons/primaryButton';\nimport { Button } from './ui/button'; \n\n// Importa a interface do arquivo da p√°gina, que voc√™ n√£o forneceu,\n// mas que criamos na etapa anterior para simula√ß√£o.\ninterface AircraftType {\n    id: number;\n    type: string;\n    seats: number;\n    description: string;\n    layoutData: string; // JSON string do layout\n}\n\ninterface AircraftTypeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSave: (data: Omit<AircraftType, 'id'>) => void;\n    aircraftTypeToEdit: AircraftType | null;\n}\n\nconst AircraftTypeModal: React.FC<AircraftTypeModalProps> = ({ isOpen, onClose, onSave, aircraftTypeToEdit }) => {\n    const isEditing = !!aircraftTypeToEdit;\n    \n    // ESTADOS: Sincronizar com os dados de edi√ß√£o ou resetar\n    const [type, setType] = useState(aircraftTypeToEdit?.type || '');\n    // O campo 'seats' √© agora um estado interno que ser√° atualizado pelo editor\n    const [seats, setSeats] = useState(aircraftTypeToEdit?.seats || 0); \n    const [description, setDescription] = useState(aircraftTypeToEdit?.description || '');\n    const [layoutData, setLayoutData] = useState(aircraftTypeToEdit?.layoutData || '');\n\n    // Efeito para preencher os dados de edi√ß√£o\n    useEffect(() => {\n        if (aircraftTypeToEdit) {\n            setType(aircraftTypeToEdit.type);\n            setSeats(aircraftTypeToEdit.seats);\n            setDescription(aircraftTypeToEdit.description);\n            setLayoutData(aircraftTypeToEdit.layoutData);\n        } else {\n            // Resetar estados para novo formul√°rio\n            setType('');\n            setSeats(0);\n            setDescription('');\n            setLayoutData('');\n        }\n    }, [aircraftTypeToEdit, isOpen]);\n\n\n    if (!isOpen) return null;\n\n    // Fun√ß√£o de callback do SeatMapEditor para atualizar o layoutData\n    const handleLayoutChange = (newLayoutJson: string) => {\n        setLayoutData(newLayoutJson);\n    };\n\n    // NOVO: Fun√ß√£o de callback do SeatMapEditor para atualizar a contagem de assentos\n    const handleSeatCountChange = (count: number) => {\n        setSeats(count);\n    };\n\n\n    const handleSubmit = (e: FormEvent) => {\n        e.preventDefault();\n        \n        // Simula√ß√£o de salvamento\n        const dataToSave: Omit<AircraftType, 'id'> = {\n            type,\n            // O valor de 'seats' √© o estado calculado, e n√£o o valor de um input manual.\n            seats, \n            description,\n            layoutData,\n        };\n\n        onSave(dataToSave);\n        onClose();\n    };\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>{isEditing ? 'Edit Aircraft Type' : 'Add new type'}</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    {/* Campos de Texto (Type, Description) */}\n                    <div style={modalStyles.inputGroup}>\n                        <label htmlFor=\"type\">Type</label>\n                        <input id=\"type\" type=\"text\" value={type} onChange={(e) => setType(e.target.value)} required style={modalStyles.input} />\n                    </div>\n                    \n                    {/* CAMPO SEATS (AGORA CALCULADO/READONLY) */}\n                    <div style={modalStyles.inputGroup}>\n                        <label htmlFor=\"seats\">Seats (Auto-calculated)</label>\n                        <input \n                            id=\"seats\" \n                            type=\"number\" \n                            value={seats} \n                            readOnly // Torna o campo somente leitura\n                            style={{...modalStyles.input, backgroundColor: '#eee'}} // Visualmente diferente\n                        />\n                    </div>\n                    \n                    <div style={modalStyles.inputGroup}>\n                        <label htmlFor=\"description\">Description</label>\n                        <textarea id=\"description\" value={description} onChange={(e) => setDescription(e.target.value)} required style={{...modalStyles.input, minHeight: '80px'}} />\n                    </div>\n\n                    {/* Editor de Mapa de Assentos */}\n                    <div style={modalStyles.seatMapSection}>\n                         <label>Seat map</label>\n                         <SeatMapEditor \n                             initialLayout={layoutData} \n                             onLayoutChange={handleLayoutChange} \n                             onSeatCountChange={handleSeatCountChange} // NOVO: Passa a fun√ß√£o de callback\n                             isEditing={true} \n                         />\n                    </div>\n                    \n\n                    {/* Bot√µes de A√ß√£o */}\n                    <div style={modalStyles.buttonGroup}>\n                        <PrimaryButton type=\"submit\">\n                            {isEditing ? 'Save changes' : 'Add new type'}\n                        </PrimaryButton>\n                        <Button type=\"button\" onClick={onClose} variant=\"link\" className='text-red-500 hover:text-red-600'>\n                            Cancel\n                        </Button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AircraftTypeModal;\n\n// ... (Restante dos estilos) ...\nconst modalStyles: { [key: string]: React.CSSProperties } = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.6)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '10px',\n        width: '90%', maxWidth: '700px', boxShadow: '0 8px 15px rgba(0, 0, 0, 0.2)',\n        maxHeight: '90vh', overflowY: 'auto',\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px', textAlign: 'center',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    inputGroup: {\n        marginBottom: '15px',\n    },\n    input: {\n        width: '100%', padding: '10px', marginTop: '5px', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px', boxSizing: 'border-box',\n    },\n    seatMapSection: {\n        marginTop: '20px',\n    },\n    buttonGroup: {\n        marginTop: '30px', display: 'flex', flexDirection: 'column', alignItems: 'center',\n        gap: '10px',\n    },\n};","size_bytes":6627},"frontend/src/pages/EmployeesPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport AddEmployeeModal from '../components/addModal';\nimport UpdateEmployeeModal from '../components/updateModal';\nimport { API_BASE_URL, Employee } from '../constants';\nimport Navbar from \"../components/layouts/navbar\"; \nimport PageContainer from \"../components/layouts/pageContainer\"; \nimport SectionHeader from \"../components/layouts/sectionHeader\"; \nimport { AdminTabs } from \"../components/layouts/adminTabs\"; \n\nconst EmployeesPage: React.FC = () => {\n    const [employees, setEmployees] = useState<Employee[]>([]);\n    const [isLoading, setIsLoading] = useState<boolean>(true);\n    const [isAddModalOpen, setIsAddModalOpen] = useState<boolean>(false);\n    const [isUpdateModalOpen, setIsUpdateModalOpen] = useState<boolean>(false);\n    const [employeeToUpdate, setEmployeeToUpdate] = useState<Employee | null>(null);\n\n    const fetchEmployees = async () => {\n        setIsLoading(true);\n        try {\n            const response = await axios.get<Employee[]>(API_BASE_URL); \n            setEmployees(response.data);\n        } catch (error) {\n            console.error('Erro ao buscar funcion√°rios:', error);\n            alert('Erro ao carregar a lista de funcion√°rios.');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchEmployees();\n    }, []);\n\n    const handleEdit = (employee: Employee) => {\n        setEmployeeToUpdate(employee);\n        setIsUpdateModalOpen(true);\n    };\n\n    const handleDelete = async (id: number, name: string) => {\n        if (!window.confirm(`Tem certeza que deseja deletar o funcion√°rio ${name}?`)) {\n            return;\n        }\n        try {\n            await axios.delete(`${API_BASE_URL}/${id}`);\n            alert(`Funcion√°rio ${name} deletado com sucesso!`);\n            fetchEmployees(); \n        } catch (error) {\n            console.error('Erro ao deletar funcion√°rio:', error);\n            alert('Erro ao deletar funcion√°rio. Verifique o console.');\n        }\n    };\n\n    if (isLoading) {\n        return (\n             <div className=\"min-h-screen bg-gray-50\">\n                 <Navbar />\n                 <div style={loadingStyles}>Carregando funcion√°rios...</div>\n             </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <Navbar />\n            <AdminTabs /> \n            <PageContainer>\n                \n                <SectionHeader \n                    title=\"Employees\" \n                    buttonText=\"Add new employee\" \n                    onButtonClick={() => setIsAddModalOpen(true)} \n                />\n\n                <div style={listContainerStyles}>\n                    {employees.length === 0 ? (\n                        <p>Nenhum funcion√°rio cadastrado.</p>\n                    ) : (\n                        employees.map(employee => (\n                            <div key={employee.id} style={cardStyles.card}>\n                                <div style={cardStyles.dataGroup}>\n                                    <p style={cardStyles.dataLabel}>Name:</p>\n                                    <p style={cardStyles.dataValue}>{employee.name}</p>\n                                </div>\n                                <div style={cardStyles.dataGroup}>\n                                    <p style={cardStyles.dataLabel}>Birthday:</p>\n                                    <p style={cardStyles.dataValue}>{employee.birthday}</p>\n                                </div>\n                                <div style={cardStyles.dataGroup}>\n                                    <p style={cardStyles.dataLabel}>E-mail:</p>\n                                    <p style={cardStyles.dataValue}>{employee.email}</p>\n                                </div>\n                                <div style={cardStyles.dataGroup}>\n                                    <p style={cardStyles.dataLabel}>Phone:</p>\n                                    <p style={cardStyles.dataValue}>{employee.phoneNumber}</p>\n                                </div>\n                                <div style={cardStyles.dataGroup}>\n                                    <p style={cardStyles.dataLabel}>Category:</p>\n                                    <p style={cardStyles.dataValue}>{employee.category}</p>\n                                </div>\n\n                                <div style={cardStyles.actions}>\n                                    <span \n                                        onClick={() => handleEdit(employee)} \n                                        style={cardStyles.icon}\n                                        title=\"Editar\"\n                                    >\n                                        ‚úèÔ∏è \n                                    </span>\n                                    <span \n                                        onClick={() => handleDelete(employee.id, employee.name)} \n                                        style={{...cardStyles.icon, color: 'red'}}\n                                        title=\"Deletar\"\n                                    >\n                                        üóëÔ∏è \n                                    </span>\n                                </div>\n                            </div>\n                        ))\n                    )}\n                </div>\n\n                <AddEmployeeModal\n                    isOpen={isAddModalOpen}\n                    onClose={() => setIsAddModalOpen(false)}\n                    onEmployeeAdded={fetchEmployees}\n                />\n                <UpdateEmployeeModal\n                    isOpen={isUpdateModalOpen}\n                    onClose={() => setIsUpdateModalOpen(false)}\n                    employeeToUpdate={employeeToUpdate}\n                    onEmployeeUpdated={fetchEmployees}\n                />\n            </PageContainer>\n        </div>\n    );\n};\n\nexport default EmployeesPage;\n\nconst listContainerStyles: React.CSSProperties = {\n    display: 'flex', \n    flexWrap: 'wrap', \n    gap: '20px',\n};\n\nconst loadingStyles: React.CSSProperties = {\n    textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n    color: '#555',\n};\n\nconst cardStyles: React.CSSProperties & {\n    card: React.CSSProperties;\n    dataGroup: React.CSSProperties;\n    dataLabel: React.CSSProperties;\n    dataValue: React.CSSProperties;\n    actions: React.CSSProperties;\n    icon: React.CSSProperties;\n} = {\n    card: {\n        backgroundColor: '#fff', border: '1px solid #ddd',\n        borderRadius: '8px', padding: '20px', width: '300px',\n        boxShadow: '0 2px 5px rgba(0,0,0,0.05)', position: 'relative',\n    },\n    dataGroup: {\n        display: 'flex', marginBottom: '5px',\n    },\n    dataLabel: {\n        fontWeight: 'bold', color: '#333', marginRight: '5px',\n    },\n    dataValue: {\n        color: '#555', margin: 0,\n    },\n    actions: {\n        position: 'absolute', bottom: '10px', right: '10px',\n        display: 'flex', gap: '10px',\n    },\n    icon: {\n        cursor: 'pointer', fontSize: '18px',\n        transition: 'transform 0.1s',\n        padding: '5px',\n    }\n};","size_bytes":7106},"backend/src/employees/employees.service.ts":{"content":"import { Injectable, NotFoundException } from '@nestjs/common'; // Adicionado NotFoundException\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { Employees } from './employees.entity';\nimport { CreateEmployeesDto } from './create-employees.dto';\nimport { UpdateEmployeesDto } from './update-employees.dto'; // Importa o novo DTO\n\n@Injectable()\nexport class EmployeesService {\n  constructor(\n    @InjectRepository(Employees)\n    private employeesRepository: Repository<Employees>,\n  ) {}\n\n  findAll() {\n    return this.employeesRepository.find(); // J√° existente\n  }\n\n  create(CreateEmployeesDto: CreateEmployeesDto) {\n    const employees = this.employeesRepository.create(CreateEmployeesDto); // J√° existente\n    return this.employeesRepository.save(employees); // J√° existente\n  }\n  \n  // Novo: Buscar funcion√°rio por ID (GET /employees/:id)\n  async findOne(id: number): Promise<Employees> {\n    const employee = await this.employeesRepository.findOne({ where: { id } });\n    if (!employee) {\n      // Lan√ßa uma exce√ß√£o se n√£o encontrar o recurso\n      throw new NotFoundException(`Employee with ID ${id} not found.`);\n    }\n    return employee;\n  }\n  \n  // Novo: Atualizar funcion√°rio (PATCH /employees/:id)\n  async update(id: number, updateEmployeesDto: UpdateEmployeesDto) {\n    const result = await this.employeesRepository.update(id, updateEmployeesDto);\n    \n    // Verifica se a atualiza√ß√£o afetou algum registro\n    if (result.affected === 0) {\n        throw new NotFoundException(`Employee with ID ${id} not found.`);\n    }\n    // Retorna o funcion√°rio atualizado\n    return this.employeesRepository.findOne({ where: { id } });\n  }\n\n  // Novo: Deletar funcion√°rio (DELETE /employees/:id)\n  async remove(id: number): Promise<void> {\n    const result = await this.employeesRepository.delete(id);\n    \n    // Verifica se o delete afetou algum registro\n    if (result.affected === 0) {\n      throw new NotFoundException(`Employee with ID ${id} not found.`);\n    }\n  }\n}","size_bytes":2037},"frontend/src/components/aircraftModal.tsx":{"content":"import React, { useState, FormEvent, ChangeEvent, useEffect } from 'react';\nimport axios from 'axios'; // NOVO: Importar axios\nimport { Button } from './ui/button';\nimport { PrimaryButton } from './buttons/primaryButton';\n// Assumindo que este arquivo existe e cont√©m a URL e as interfaces\nimport { API_BASE_URL, Aircraft, CreateAircraftDto, UpdateAircraftDto } from '../aircrafts.constants'; \nimport { AircraftType } from '../aircraft-types.constants'; \n\ninterface AircraftModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onAircraftSaved: () => void;\n    aircraftToEdit: Aircraft | null;\n    aircraftTypes: AircraftType[]; \n}\n\nconst initialFormData: CreateAircraftDto = {\n    id: '',\n    aircraftTypeId: 0,\n};\n\nconst AircraftModal: React.FC<AircraftModalProps> = ({ isOpen, onClose, onAircraftSaved, aircraftToEdit, aircraftTypes }) => {\n    const isEditMode = !!aircraftToEdit;\n    const [formData, setFormData] = useState<CreateAircraftDto | UpdateAircraftDto>(initialFormData);\n\n    useEffect(() => {\n        if (aircraftToEdit) {\n            setFormData({\n                aircraftTypeId: aircraftToEdit.aircraftTypeId,\n            } as UpdateAircraftDto);\n        } else {\n            // FIX: No modo de cria√ß√£o, use o ID do primeiro AircraftType dispon√≠vel\n            const defaultTypeId = aircraftTypes.length > 0 ? aircraftTypes[0].id : 0;\n\n            setFormData({\n                id: '',\n                // Garante que o ID inicial do tipo seja v√°lido para o DDL/API\n                aircraftTypeId: defaultTypeId, \n            });\n        }\n    }, [aircraftToEdit, isOpen, aircraftTypes]); // Adicionado aircraftTypes como depend√™ncia\n\n    if (!isOpen) return null;\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        // Converte aircraftTypeId para n√∫mero, pois o DTO espera um number.\n        setFormData(prev => ({ ...prev, [name]: (name === 'aircraftTypeId' ? Number(value) : value) }));\n    };\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        \n        const dataToSave = formData as CreateAircraftDto | UpdateAircraftDto;\n\n        try {\n            if (isEditMode && aircraftToEdit) {\n                // Requisi√ß√£o PATCH (Update)\n                // Envia o payload do DTO de atualiza√ß√£o (apenas aircraftTypeId) para a rota /aircrafts/{id}\n                await axios.patch(`${API_BASE_URL}/${aircraftToEdit.id}`, dataToSave);\n                alert(`Aeronave ${aircraftToEdit.id} updated successfully!`); \n            } else {\n                // Requisi√ß√£o POST (Create)\n                // Envia o payload do DTO de cria√ß√£o (id e aircraftTypeId) para a rota /aircrafts\n                await axios.post(API_BASE_URL, dataToSave as CreateAircraftDto);\n                alert('Aircraft added successfully!');\n            }\n            \n            onAircraftSaved(); // Recarrega a lista\n            onClose();\n        } catch (error) {\n            console.error(`Error saving aircraft:`, error);\n            // Mensagem de erro mais detalhada se for erro de valida√ß√£o (ex: ID j√° existe)\n            const errorMessage = axios.isAxiosError(error) && error.response?.data?.message\n                ? error.response.data.message\n                : `Error saving aircraft. Check the console.`;\n            alert(errorMessage);\n        }\n    };\n\n    const title = isEditMode ? 'Update Aircraft' : 'Add new aircraft';\n    const buttonText = isEditMode ? 'Save changes' : 'Add new aircraft';\n    \n    // Define o valor selecionado no DDL (garantindo que seja um n√∫mero ou um valor do DDL)\n    const selectedAircraftTypeId = Number((formData as CreateAircraftDto).aircraftTypeId) || aircraftTypes[0]?.id || 0;\n    // Garante que o DDL tenha um valor selecionado mesmo que o formData esteja vazio no modo Update\n    const displayAircraftTypeId = isEditMode && aircraftToEdit ? aircraftToEdit.aircraftTypeId : selectedAircraftTypeId;\n\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>{title}</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    {/* Campo ID da Aeronave (Apenas para Create) */}\n                    {!isEditMode && (\n                        <div style={modalStyles.inputGroup}>\n                            <label htmlFor=\"id\">Aircraft ID (e.g., A001)</label>\n                            <input\n                                id=\"id\"\n                                type=\"text\"\n                                name=\"id\"\n                                value={(formData as CreateAircraftDto).id || ''}\n                                onChange={handleChange}\n                                style={modalStyles.input}\n                                required\n                            />\n                        </div>\n                    )}\n                    \n                    {/* Campo Tipo de Aeronave (DDL) */}\n                    <div style={modalStyles.inputGroup}>\n                        <label htmlFor=\"aircraftTypeId\">Aircraft Type</label>\n                        <select\n                            id=\"aircraftTypeId\"\n                            name=\"aircraftTypeId\"\n                            // No modo de edi√ß√£o, usa o ID do objeto original at√© que o usu√°rio mude\n                            value={isEditMode ? aircraftToEdit?.aircraftTypeId : displayAircraftTypeId}\n                            onChange={handleChange}\n                            style={modalStyles.input}\n                            required\n                        >\n                             {/* Garante que o valor inicial seja o valor atual do objeto em edi√ß√£o */}\n                            {aircraftTypes.map(type => (\n                                <option key={type.id} value={type.id}>\n                                    {type.type} ({type.seats} seats)\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div style={modalStyles.buttonGroup}>\n                        <PrimaryButton type=\"submit\">\n                            {buttonText}\n                        </PrimaryButton>\n                        <Button type=\"button\" onClick={onClose} variant=\"link\" className='text-red-500 hover:text-red-600'>\n                            Cancel\n                        </Button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AircraftModal;\n\n// Estilos mantidos para layout\nconst modalStyles: { [key: string]: React.CSSProperties } = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '8px',\n        width: '400px', boxShadow: '0 4px 10px rgba(0, 0, 0, 0.1)',\n        textAlign: 'center'\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    inputGroup: {\n        marginBottom: '15px',\n    },\n    input: {\n        padding: '10px', margin: '5px 0 15px 0', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px', boxSizing: 'border-box',\n    },\n    buttonGroup: {\n        marginTop: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center',\n        gap: '10px',\n    },\n};","size_bytes":7702},"frontend/README.md":{"content":"# Getting Started with Create React App\n\nThis project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).\n\n## Available Scripts\n\nIn the project directory, you can run:\n\n### `npm start`\n\nRuns the app in the development mode.\\\nOpen [http://localhost:3000](http://localhost:3000) to view it in the browser.\n\nThe page will reload if you make edits.\\\nYou will also see any lint errors in the console.\n\n### `npm test`\n\nLaunches the test runner in the interactive watch mode.\\\nSee the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.\n\n### `npm run build`\n\nBuilds the app for production to the `build` folder.\\\nIt correctly bundles React in production mode and optimizes the build for the best performance.\n\nThe build is minified and the filenames include the hashes.\\\nYour app is ready to be deployed!\n\nSee the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.\n\n### `npm run eject`\n\n**Note: this is a one-way operation. Once you `eject`, you can‚Äôt go back!**\n\nIf you aren‚Äôt satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.\n\nInstead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you‚Äôre on your own.\n\nYou don‚Äôt have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn‚Äôt feel obligated to use this feature. However we understand that this tool wouldn‚Äôt be useful if you couldn‚Äôt customize it when you are ready for it.\n\n## Learn More\n\nYou can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).\n\nTo learn React, check out the [React documentation](https://reactjs.org/).\n","size_bytes":2117},"backend/src/flightTypes/flight-types.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column } from 'typeorm';\n\n@Entity()\nexport class FlightTypes {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({ unique: true })\n  name: string; // Ex: Fretado, Internacional, Nacional\n}","size_bytes":232},"frontend/src/aircrafts.constants.ts":{"content":"import { AircraftType } from \"./aircraft-types.constants\";\nimport { API_BASE_URL as BASE_URL } from './config';\n\nexport const API_BASE_URL = `${BASE_URL}/aircrafts`;\n\nexport interface Aircraft {\n    id: string; // ID √∫nico da aeronave (ex: A001)\n    aircraftTypeId: number;\n    // O backend injeta o objeto completo do tipo de aeronave\n    aircraftType: AircraftType; \n}\n\nexport type CreateAircraftDto = Omit<Aircraft, 'aircraftType'>;\nexport type UpdateAircraftDto = Partial<Omit<Aircraft, 'id' | 'aircraftType'>>;","size_bytes":516},"backend/src/aircraftTypes/update-aircraft-types.dto.ts":{"content":"import { IsString, IsNumber, IsOptional } from 'class-validator';\n\nexport class UpdateAircraftTypesDto {\n  @IsString()\n  @IsOptional()\n  type?: string;\n\n  @IsNumber()\n  @IsOptional()\n  seats?: number;\n\n  @IsString()\n  @IsOptional()\n  description?: string;\n\n  @IsString()\n  @IsOptional()\n  layoutData?: string; // O JSON do mapa de assentos\n}","size_bytes":341},"frontend/src/pages/FlightTypesPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Navbar from '../components/layouts/navbar';\nimport PageContainer from '../components/layouts/pageContainer';\nimport SectionHeader from '../components/layouts/sectionHeader';\nimport { AdminTabs } from '../components/layouts/adminTabs';\nimport DataCard from '../components/cards/DataCard';\nimport DangerButton from '../components/buttons/dangerButton';\nimport FlightTypeModal from '../components/flightTypeModal'; \nimport { API_BASE_URL, FlightType } from '../flight-types.constants';\n\nconst AdminFlightTypesPage: React.FC = () => {\n    const [flightTypes, setFlightTypes] = useState<FlightType[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [typeToEdit, setTypeToEdit] = useState<FlightType | null>(null);\n\n    const fetchFlightTypes = async () => {\n        setIsLoading(true);\n        try {\n            const response = await axios.get<FlightType[]>(API_BASE_URL); \n            setFlightTypes(response.data);\n        } catch (error) {\n            console.error('Error fetching flight types:', error);\n            alert('Error loading flight types list.');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchFlightTypes();\n    }, []);\n\n    const handleSaveType = async () => {\n        await fetchFlightTypes(); \n        setIsModalOpen(false);\n    };\n\n    const handleDeleteType = async (id: number, typeName: string) => {\n        if (!window.confirm(`Are you sure you want to delete the flight type ${typeName}?`)) {\n            return;\n        }\n        try {\n            await axios.delete(`${API_BASE_URL}/${id}`);\n            alert(`Flight type ${typeName} deleted successfully.`);\n            fetchFlightTypes(); \n        } catch (error) {\n            console.error('Error deleting flight type:', error);\n            alert('Error deleting flight type. Check the console.');\n        }\n    };\n\n    const handleOpenAddModal = () => {\n        setTypeToEdit(null);\n        setIsModalOpen(true);\n    };\n\n    const handleOpenEditModal = (type: FlightType) => {\n        setTypeToEdit(type);\n        setIsModalOpen(true);\n    };\n\n\n    if (isLoading) {\n        return (\n             <div className=\"min-h-screen bg-gray-50\">\n                <Navbar />\n                <div style={loadingStyles}>Loading flight types...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <Navbar />\n            <AdminTabs />\n            <PageContainer>\n                <SectionHeader\n                    title=\"Flight Types\"\n                    buttonText=\"Add New Type\"\n                    onButtonClick={handleOpenAddModal}\n                />\n                \n                <div className=\"space-y-4\">\n                    {flightTypes.length === 0 ? (\n                        <p className=\"text-gray-500\">Nenhum tipo de voo cadastrado.</p>\n                    ) : (\n                        flightTypes.map(type => (\n                            <DataCard\n                                key={type.id}\n                                actions={\n                                    <>\n                                        <button \n                                            onClick={() => handleOpenEditModal(type)} \n                                            className=\"text-blue-800 hover:text-blue-900 p-1 rounded transition\"\n                                            title=\"Edit Type\"\n                                        >\n                                            ‚úèÔ∏è\n                                        </button>\n                                        <DangerButton onClick={() => handleDeleteType(type.id, type.name)}>üóëÔ∏è</DangerButton>\n                                    </>\n                                }\n                            >\n                                <div className=\"flex justify-between w-full\">\n                                    <span className=\"font-medium\">{type.name}</span>\n                                </div>\n                            </DataCard>\n                        ))\n                    )}\n                </div>\n\n                <FlightTypeModal\n                    isOpen={isModalOpen}\n                    onClose={() => setIsModalOpen(false)}\n                    onFlightTypeSaved={handleSaveType}\n                    flightTypeToEdit={typeToEdit}\n                />\n            </PageContainer>\n        </div>\n    );\n};\n\nexport default AdminFlightTypesPage;\n\nconst loadingStyles: React.CSSProperties = {\n    textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n    color: '#555',\n};","size_bytes":4735},"frontend/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n","size_bytes":426},"frontend/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"../../lib/utils\"\n\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-input hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"underline-offset-4 hover:underline text-primary\"\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\"\n      }\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\"\n    }\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1772},"backend/src/airports/airports.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { AirportsService } from './airports.service';\nimport { AirportsController } from './airports.controller';\nimport { Airports } from './airports.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([Airports])],\n  controllers: [AirportsController],\n  providers: [AirportsService],\n})\nexport class AirportsModule {}","size_bytes":414},"frontend/src/flight-types.constants.ts":{"content":"import { API_BASE_URL as BASE_URL } from './config';\n\nexport const API_BASE_URL = `${BASE_URL}/flight-types`;\n\nexport interface FlightType {\n    id: number;\n    name: string;\n}\n\nexport type CreateFlightTypeDto = Omit<FlightType, 'id'>;\nexport type UpdateFlightTypeDto = Partial<CreateFlightTypeDto>;","size_bytes":299},"backend/src/aircraftTypes/create-aircraft-types.dto.ts":{"content":"import { IsString, IsNumber, IsNotEmpty } from 'class-validator';\n\nexport class CreateAircraftTypesDto {\n  @IsString()\n  @IsNotEmpty()\n  type: string;\n\n  @IsNumber()\n  @IsNotEmpty()\n  seats: number;\n\n  @IsString()\n  @IsNotEmpty()\n  description: string;\n\n  @IsString()\n  @IsNotEmpty()\n  layoutData: string; \n}","size_bytes":308},"frontend/src/services/api.ts":{"content":"import { API_BASE_URL } from '../config';\n\nexport async function getUsers() {\n  const res = await fetch(`${API_BASE_URL}/users`);\n  if (!res.ok) throw new Error('Erro ao buscar usu√°rios');\n  return res.json();\n}\n\nexport async function createUser(data: any) {\n  const res = await fetch(`${API_BASE_URL}/users`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(data),\n  });\n  return res.json();\n}\n\n","size_bytes":448},"frontend/src/aircraft-types.constants.ts":{"content":"import { API_BASE_URL as BASE_URL } from './config';\n\nexport const API_BASE_URL = `${BASE_URL}/aircraft-types`;\n\nexport interface AircraftType {\n    id: number;\n    type: string;\n    seats: number;\n    description: string;\n    layoutData: string; \n}\n\nexport type CreateAircraftTypeDto = Omit<AircraftType, 'id'>;\nexport type UpdateAircraftTypeDto = Partial<CreateAircraftTypeDto>;","size_bytes":380},"frontend/src/components/layouts/adminTabs.tsx":{"content":"import React from 'react';\nimport { NavLink, useLocation } from 'react-router-dom';\n\nconst adminItems = [\n    { label: \"Flights\", path: \"/admin/flights\" },\n    { label: \"Flight Types\", path: \"/admin/flightTypesPage\" },\n    { label: \"Aircraft Types\", path: \"/admin/aircraftTypes\" },\n    { label: \"Aircrafts\", path: \"/admin/aircrafts\" },\n    { label: \"Airports\", path: \"/admin/airports\" },\n    { label: \"Employees\", path: \"/admin/employees\" },\n];\n\nexport const AdminTabs: React.FC = () => {\n    const location = useLocation();\n\n    return (\n        <div className=\"bg-white border-b border-gray-200\">\n            <div className=\"max-w-5xl mx-auto\">\n                <nav className=\"flex space-x-4 pt-2\"> \n                    {adminItems.map((item) => (\n                        <NavLink\n                            key={item.label}\n                            to={item.path}\n                            className={({ isActive }) => \n                                `py-3 px-2 text-sm font-medium transition duration-150 ease-in-out \n                                ${isActive \n                                    ? 'border-b-2 border-blue-600 text-blue-900 font-semibold' \n                                    : 'text-gray-500 hover:text-blue-600 hover:border-blue-300 border-b-2 border-transparent'\n                                }`\n                            }\n                        >\n                            {item.label}\n                        </NavLink>\n                    ))}\n                </nav>\n            </div>\n        </div>\n    );\n};","size_bytes":1552},"frontend/src/components/forms/formRow.tsx":{"content":"import React, { ReactNode } from \"react\";\n\ninterface FormRowProps {\n  label: string;\n  children: ReactNode;\n}\n\nexport const FormRow: React.FC<FormRowProps> = ({ label, children }) => {\n  return (\n    // Usa classes Tailwind para layout vertical e espa√ßamento\n    <div className=\"flex flex-col gap-1 mb-3\">\n      <label className=\"text-sm font-medium text-gray-700\">{label}</label>\n      {children}\n    </div>\n  );\n};","size_bytes":417},"backend/src/aircrafts/aircrafts.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Patch, Delete } from '@nestjs/common';\nimport { AircraftsService } from './aircrafts.service';\nimport { CreateAircraftsDto } from './create-aircrafts.dto';\nimport { UpdateAircraftsDto } from './update-aircrafts.dto';\n\n@Controller('aircrafts')\nexport class AircraftsController {\n  constructor(private aircraftsService: AircraftsService) {}\n\n  @Get()\n  findAll() {\n    return this.aircraftsService.findAll();\n  }\n\n  @Post()\n  create(@Body() createAircraftsDto: CreateAircraftsDto) {\n    return this.aircraftsService.create(createAircraftsDto);\n  }\n\n  @Get(':id')\n  findOne(@Param('id') id: string) {\n    return this.aircraftsService.findOne(id);\n  }\n\n  @Patch(':id')\n  update(@Param('id') id: string, @Body() updateAircraftsDto: UpdateAircraftsDto) {\n    return this.aircraftsService.update(id, updateAircraftsDto);\n  }\n\n  @Delete(':id')\n  remove(@Param('id') id: string) {\n    return this.aircraftsService.remove(id);\n  }\n}","size_bytes":967},"backend/src/users/user.controller.ts":{"content":"import { Controller, Get, Post, Body } from '@nestjs/common';\nimport { UsersService } from './user.service';\nimport { CreateUserDto } from './create-user.dto'; \n@Controller('users')\nexport class UsersController {\n  constructor(private usersService: UsersService) {}\n\n  @Get() \n  findAll() {\n    return this.usersService.findAll();\n  }\n\n  @Post()\n  create(@Body() createUserDto: CreateUserDto) { \n    return this.usersService.create(createUserDto); \n  }\n}","size_bytes":454},"frontend/src/react-app-env.d.ts":{"content":"/// <reference types=\"react-scripts\" />\n","size_bytes":40},"frontend/src/pages/UserFlightsPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport Navbar from '../components/layouts/navbar';\nimport { API_BASE_URL } from '../config';\n\n// 1. CONSTANTES E INTERFACES (Seguindo seu padr√£o)\n// Assumindo que a API de voos est√° neste endpoint\nconst API_URL = `${API_BASE_URL}/userFlights`; \n\n// Interface para definir a estrutura de um voo, baseada na imagem\ninterface Flight {\n  userFlightId: number; // Usado para a 'key' da lista\n  seat: string;\n  status: 'booked' | 'checked-in' | 'cancelled' | 'completed';\n  flightNumber: string;\n  duration: string;\n  flightType: string;\n  departureDate: string;\n  departureTime: string;\n  arrivalDate: string;\n  arrivalTime: string;\n  aircraftType: string;\n  originCity: string;\n  originIATA: string;\n  destinationCity: string;\n  destinationIATA: string;\n}\n\ninterface FlightDetailModalProps {\n    flight: Flight;\n    onClose: () => void; // Fun√ß√£o para fechar o modal\n}\n\nconst FlightDetailModal: React.FC<FlightDetailModalProps> = ({ flight, onClose }) => {\n    \n    const dateParts = flight.departureDate.split('-'); // ex: [\"05\", \"10\", \"2025\"]\n    const timeParts = flight.departureTime.split(':'); // ex: [\"19\", \"35\"]\n    \n    // new Date(ano, m√™sIndexadoEmZero, dia, hora, minuto)\n    const departureDateTime = new Date(\n        parseInt(dateParts[0]),         // Ano: 2025\n        parseInt(dateParts[1]) - 1,   // M√™s: 10 precisa virar 9 (Outubro)\n        parseInt(dateParts[2]),         // Dia: 05\n        parseInt(timeParts[0]),         // Hora: 19\n        parseInt(timeParts[1])          // Minuto: 35\n    );\n\n    // 2. Pegar a data e hora atuais\n    const now = new Date();\n\n    // 3. Calcular a diferen√ßa em milissegundos e depois em horas\n    const diffMs = departureDateTime.getTime() - now.getTime();\n    const diffHours = diffMs / (1000 * 60 * 60); // (ms * seg * min)\n\n    // 4. A condi√ß√£o final: O voo √© cancel√°vel se a diferen√ßa for maior que 24h\n    const isCancellable = diffHours > 24;\n\n    // Impede que o clique no conte√∫do do modal feche o modal\n    const handleModalContentClick = (e: React.MouseEvent) => {\n        e.stopPropagation();\n    };\n\n    // A√ß√£o do bot√£o (por enquanto, apenas fecha o modal)\n    const handleCancelFlight = () => {\n        alert(`A√ß√£o de cancelar o voo ${flight.flightNumber} ainda n√£o implementada.`);\n        // Aqui voc√™ poderia adicionar a l√≥gica de API para cancelar\n        onClose(); \n    };\n    \n    return (\n        // O Overlay (fundo escuro) que fecha ao clicar\n        <div style={styles.modalOverlay} onClick={onClose}>\n            \n            {/* O conte√∫do do modal */}\n            <div style={styles.modalContent} onClick={handleModalContentClick}>\n                \n                {/* Cabe√ßalho do Modal */}\n                <div style={styles.modalHeader}>\n                    <span style={styles.modalHeaderText}>\n                        {flight.originCity} ({flight.departureDate})\n                    </span>\n                    <span style={styles.modalHeaderArrow}>‚Üí</span>\n                    <span style={styles.modalHeaderText}>\n                        {flight.destinationCity} ({flight.arrivalDate})\n                    </span>\n                </div>\n\n                {/* Corpo do Modal (dividido em 2 colunas) */}\n                <div style={styles.modalBody}>\n                    {/* Coluna Esquerda */}\n                    <div style={styles.modalColumn}>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Departure:</span>\n                            <span style={styles.modalValue}>{flight.departureTime} {flight.originIATA}</span>\n                        </div>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Flight duration:</span>\n                            <span style={styles.modalValue}>{flight.duration}</span>\n                        </div>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Aircraft:</span>\n                            <span style={styles.modalValue}>{flight.aircraftType}</span>\n                        </div>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Flight number:</span>\n                            <span style={styles.modalValue}>{flight.flightNumber}</span>\n                        </div>\n                    </div>\n                    \n                    {/* Coluna Direita */}\n                    <div style={styles.modalColumn}>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Estimated arrival:</span>\n                            <span style={styles.modalValue}>{flight.arrivalTime} {flight.destinationIATA}</span>\n                        </div>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Seats:</span>\n                            <span style={styles.modalValue}>{flight.seat}</span>\n                        </div>\n                        <div style={styles.modalRow}>\n                            <span style={styles.modalLabel}>Status:</span>\n                            <span style={styles.modalValueStatus}>{flight.status}</span>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Rodap√© do Modal */}\n                <div style={styles.modalFooter}>\n                    {isCancellable ? (\n                        <button style={styles.cancelButton} onClick={handleCancelFlight}>\n                            Cancel flight\n                        </button>\n                    ) : (\n                        <span style={styles.modalLabel}>\n                            Cancellation is only available up to 24 hours before departure.\n                        </span>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\ninterface FlightCardProps {\n    flight: Flight;\n    onClick: (flight: Flight) => void;\n}\n\nconst FlightCard: React.FC<FlightCardProps> = ({ flight, onClick }) => {\n\n    return (\n        <div style={styles.flightCardButton} onClick={() => onClick(flight)}>\n            <div style={styles.flightRow}>\n                {/* Se√ß√£o de Partida */}\n                <div style={styles.flightEndpoint}>\n                    <span style={styles.flightCity}>{flight.originCity} ({flight.departureDate})</span>\n                    <span style={styles.flightTime}>{flight.departureTime}</span>\n                </div>\n\n                <span style={styles.flightArrow}>‚Üí</span>\n\n                {/* Se√ß√£o de Chegada */}\n                <div style={styles.flightEndpoint}>\n                    <span style={styles.flightCity}>{flight.destinationCity} ({flight.arrivalDate})</span>\n                    <span style={styles.flightTime}>{flight.arrivalTime}</span>\n                </div>\n            </div>\n            <div style={styles.flightDetails}>\n                <span>{flight.flightType} - Duration: {flight.duration}</span>\n            </div>\n        </div>\n    );\n};\n\n\n// 3. COMPONENTE PRINCIPAL (UserFlightList)\nconst UserFlights: React.FC = () => {\n    // State para voos, loading e mensagens (mesmo padr√£o)\n    const [flights, setFlights] = useState<Flight[]>([]);\n    const [loading, setLoading] = useState(true); // Come√ßa true para buscar dados\n    const [message, setMessage] = useState('');\n    const [selectedFlight, setSelectedFlight] = useState<Flight | null>(null);\n\n    // L√≥gica de busca de dados (Adaptado do seu handleSubmit)\n    useEffect(() => {\n        // Fun√ß√£o async para buscar os dados\n        const fetchFlights = async () => {\n            setLoading(true);\n            setMessage('');\n\n            try {\n                // Trocamos fetch 'POST' por 'GET'\n                const response = await fetch(API_URL, {\n                    credentials: 'include',\n                });\n\n                if (response.ok) {\n                    const data: Flight[] = await response.json();\n                    setFlights(data);\n                } else {\n                    const errorData = await response.json();\n                    setMessage(`Erro ao carregar voos: ${errorData.message || response.statusText}`);\n                }\n            } catch (error) {\n                console.error('Erro de rede:', error);\n                setMessage('Erro de conex√£o com o servidor.');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchFlights(); // Executa a fun√ß√£o ao carregar o componente\n    }, []); // O array vazio [] garante que isso rode apenas uma vez\n\n    const handleCardClick = (flight: Flight) => {\n        setSelectedFlight(flight);\n    };\n\n    const handleCloseModal = () => {\n        setSelectedFlight(null);\n    };\n\n    // Fun√ß√£o para renderizar o conte√∫do da lista\n    const renderContent = () => {\n        if (loading) {\n            return <p>Carregando voos...</p>;\n        }\n        if (message) {\n            // Reutiliza o estilo de mensagem do seu c√≥digo\n            return <p style={{ color: 'red' }}>{message}</p>;\n        }\n        if (flights.length === 0) {\n            return <p>Nenhum voo encontrado.</p>;\n        }\n        \n        // Mapeia os dados do state para o sub-componente FlightCard\n        return flights.map(flight => (\n            <FlightCard key={flight.userFlightId} flight={flight} onClick={handleCardClick}/>\n        ));\n    };\n\n    return (\n        <div style={styles.container}>\n            <Navbar/>\n\n            <div style={styles.mainContent}>\n                <div style={styles.flightListContainer}>\n                    <h2 style={styles.title}>Your flights:</h2>\n                    \n                    <div style={styles.listArea}>\n                        {renderContent()}\n                    </div>\n                </div>\n            </div>\n            {selectedFlight && (\n                <FlightDetailModal \n                    flight={selectedFlight} \n                    onClose={handleCloseModal} \n                />\n            )}\n        </div>\n    );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    container: {\n        minHeight: '100vh',\n        backgroundColor: '#f5f5f5',\n    },\n    header: {\n        backgroundColor: '#00254A',\n        color: 'white',\n        padding: '10px 50px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logoText: {\n        fontSize: '20px',\n        fontWeight: 'bold',\n        marginLeft: '10px',\n    },\n    signInButton: {\n        backgroundColor: '#1E90FF', \n        color: 'white',\n        border: 'none',\n        padding: '10px 20px',\n        borderRadius: '20px', \n        cursor: 'pointer',\n        fontWeight: 'bold',\n        fontSize: '16px',\n    },\n    registerLink: { \n        textDecoration: 'none',\n    },\n    mainContent: {\n        display: 'flex',\n        justifyContent: 'center',\n        padding: '40px 20px', \n    },\n\n    flightListContainer: { \n        backgroundColor: 'transparent', \n        width: '100%',\n        maxWidth: '700px', \n    },\n    title: {\n        color: '#00254A', \n        marginBottom: '20px',\n        fontSize: '24px',\n        fontWeight: 'bold',\n    },\n    listArea: {\n        width: '100%',\n    },\n    \n    flightCardButton: {\n        backgroundColor: 'white',\n        borderRadius: '12px',\n        padding: '20px 24px',\n        marginBottom: '16px',\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.05)',\n        border: '1px solid #eee',\n        width: '100%',\n        cursor: 'pointer',\n        textAlign: 'left', \n        fontFamily: 'inherit',\n    },\n    flightRow: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '12px',\n    },\n    flightEndpoint: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    flightCity: {\n        fontSize: '16px',\n        color: '#333',\n    },\n    flightTime: {\n        fontSize: '22px',\n        fontWeight: 'bold',\n        color: '#00254A',\n    },\n    flightArrow: {\n        fontSize: '24px',\n        color: '#00254A',\n        margin: '0 20px',\n    },\n    flightDetails: {\n        fontSize: '14px',\n        color: '#555',\n        borderTop: '1px solid #f0f0f0',\n        paddingTop: '12px',\n        marginTop: '12px',\n    },\n\n    //MODAL STYLES\n    modalOverlay: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100vw',\n        height: '100vh',\n        backgroundColor: 'rgba(0, 0, 0, 0.6)',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        zIndex: 1000,\n    },\n    modalContent: {\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        padding: '24px',\n        width: '100%',\n        maxWidth: '550px',\n        boxShadow: '0 5px 15px rgba(0, 0, 0, 0.3)',\n    },\n    modalHeader: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        borderBottom: '1px solid #eee',\n        paddingBottom: '16px',\n        marginBottom: '16px',\n    },\n    modalHeaderText: {\n        fontSize: '20px',\n        fontWeight: 'bold',\n        color: '#00254A',\n    },\n    modalHeaderArrow: {\n        fontSize: '20px',\n        color: '#00254A',\n    },\n    modalBody: {\n        display: 'flex',\n        flexDirection: 'row',\n        gap: '24px', // Espa√ßo entre as colunas\n    },\n    modalColumn: {\n        flex: 1, // Faz as colunas dividirem o espa√ßo\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '12px',\n    },\n    modalRow: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    modalLabel: {\n        fontSize: '14px',\n        color: '#555',\n        marginBottom: '2px',\n    },\n    modalValue: {\n        fontSize: '16px',\n        fontWeight: '500',\n        color: '#111',\n    },\n    modalValueStatus: {\n        fontSize: '16px',\n        fontWeight: 'bold',\n        color: '#00254A',\n        textTransform: 'capitalize', // Deixa 'booked' com 'B' mai√∫sculo\n    },\n    modalFooter: {\n        borderTop: '1px solid #eee',\n        paddingTop: '16px',\n        marginTop: '16px',\n        display: 'flex',\n        justifyContent: 'flex-end', // Alinha o bot√£o √† direita\n    },\n    cancelButton: {\n        backgroundColor: '#d9534f', // Vermelho\n        color: 'white',\n        border: 'none',\n        padding: '10px 20px',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        fontWeight: 'bold',\n        fontSize: '16px',\n    },\n};\n\nexport default UserFlights;","size_bytes":14758},"backend/src/userFlights/userFlights-response.dto.ts":{"content":"// Este DTO define a estrutura da resposta do seu service:\n// findFlightsForUserFrontend(userId: number): Promise<UserFlightResponseDto[]>\n\nimport { AircraftTypes } from \"src/aircraftTypes/aircraft-types.entity\";\n\nexport class UserFlightsResponseDto {\n    // --- Dados da Reserva (UserFlight) ---\n    userFlightId: number;\n    seat: string;\n    status: 'booked' | 'checked-in' | 'cancelled' | 'completed';\n  \n    // --- Dados do Voo (Flight) ---\n    flightNumber: string;\n    duration: string;\n    flightType: string;\n    departureDate: string;\n    departureTime: string; // Enviar como string ISO (ex: \"2025-10-05T05:04:00.000Z\")\n    arrivalDate: string;\n    arrivalTime: string;   // O frontend pode formatar\n    aircraftType: string;\n  \n    // --- Dados do Aeroporto de Origem (Airport) ---\n    originCity: string;\n    originCountry: string;\n    originIATA: string;\n  \n    // --- Dados do Aeroporto de Destino (Airport) ---\n    destinationCity: string;\n    destinationCountry: string;\n    destinationIATA: string;\n  }","size_bytes":1020},"backend/src/flights/flights.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { FlightsService } from './flights.service';\nimport { FlightsController } from './flights.controller';\nimport { Flights } from './flights.entity';\nimport { Employees } from '../employees/employees.entity'; // Assumindo o caminho\nimport { EmployeeFlight } from './employee-flight.entity';\n\n@Module({\n  imports: [\n    TypeOrmModule.forFeature([Flights, EmployeeFlight, Employees]),\n  ],\n  controllers: [FlightsController],\n  providers: [FlightsService],\n  exports: [TypeOrmModule]\n})\nexport class FlightsModule {}","size_bytes":608},"frontend/src/components/layouts/pageContainer.tsx":{"content":"export default function PageContainer({ children }: { children: React.ReactNode }) {\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <main className=\"max-w-5xl mx-auto mt-10 p-6 bg-white rounded-lg shadow-sm\">\n        {children}\n      </main>\n    </div>\n  );\n}\n","size_bytes":276},"backend/src/employees/employees.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column } from 'typeorm';\n\n@Entity()\nexport class Employees {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  name: string;\n  @Column()\n  phoneNumber: string;\n  @Column()\n  email: string;\n  @Column()\n  birthday: string;\n  @Column()\n  category: string;\n}","size_bytes":302},"backend/src/auth/login.dto.ts":{"content":"import { IsEmail, IsNotEmpty, IsString, MinLength } from 'class-validator';\n\nexport class LoginDto {\n  \n  @IsEmail({}, { message: 'Por favor, forne√ßa um email v√°lido.' })\n  @IsNotEmpty({ message: 'O email n√£o pode estar vazio.' })\n  email: string;\n\n  @IsString()\n  @IsNotEmpty({ message: 'A senha n√£o pode estar vazia.' })\n  @MinLength(6, { message: 'A senha deve ter no m√≠nimo 6 caracteres.' })\n  password: string;\n}","size_bytes":422},"backend/src/users/user.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column, OneToMany } from 'typeorm';\nimport { UserFlights } from 'src/userFlights/userFlights.entity';\n\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  name: string;\n  @Column()\n  address: string;\n  @Column()\n  phoneNumber: string;\n  @Column()\n  email: string;\n  @Column()\n  workplace: string;\n  @Column()\n  workplaceAddress: string;\n  @Column()\n  birthday: string;\n  @Column()\n  CPF: string;\n  @Column()\n  RG: string;\n  @Column()\n  RGIssueDate: string;\n  @Column()\n  IssuingBodyofRG: string;\n  @Column()\n  password: string;\n  @Column({ default: true })\n  @Column({ default: 'user' }) \n  role: 'admin' | 'user';\n  isActive: boolean;\n    \n  @OneToMany(() => UserFlights, (userFlights) => userFlights.user)\n  bookings: UserFlights[];\n}\n","size_bytes":813},"backend/src/app.controller.ts":{"content":"import { Controller, Get } from '@nestjs/common';\nimport { AppService } from './app.service';\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @Get()\n  getHello(): string {\n    return this.appService.getHello();\n  }\n}\n","size_bytes":274},"backend/src/aircrafts/update-aircrafts.dto.ts":{"content":"import { IsString, IsNotEmpty, IsOptional, IsNumber } from 'class-validator';\n\nexport class UpdateAircraftsDto {\n  // O ID (PrimaryColumn) n√£o √© atualiz√°vel, mas os outros campos s√£o opcionais\n  \n  @IsNumber()\n  @IsOptional()\n  aircraftTypeId?: number;\n}","size_bytes":258},"backend/README.md":{"content":"# Aurora-Airlines\n√öltimo trabalho Andy\n\n<p align=\"center\">\n  <a href=\"http://nestjs.com/\" target=\"blank\"><img src=\"https://nestjs.com/img/logo-small.svg\" width=\"120\" alt=\"Nest Logo\" /></a>\n</p>\n\n[circleci-image]: https://img.shields.io/circleci/build/github/nestjs/nest/master?token=abc123def456\n[circleci-url]: https://circleci.com/gh/nestjs/nest\n\n  <p align=\"center\">A progressive <a href=\"http://nodejs.org\" target=\"_blank\">Node.js</a> framework for building efficient and scalable server-side applications.</p>\n    <p align=\"center\">\n<a href=\"https://www.npmjs.com/~nestjscore\" target=\"_blank\"><img src=\"https://img.shields.io/npm/v/@nestjs/core.svg\" alt=\"NPM Version\" /></a>\n<a href=\"https://www.npmjs.com/~nestjscore\" target=\"_blank\"><img src=\"https://img.shields.io/npm/l/@nestjs/core.svg\" alt=\"Package License\" /></a>\n<a href=\"https://www.npmjs.com/~nestjscore\" target=\"_blank\"><img src=\"https://img.shields.io/npm/dm/@nestjs/common.svg\" alt=\"NPM Downloads\" /></a>\n<a href=\"https://circleci.com/gh/nestjs/nest\" target=\"_blank\"><img src=\"https://img.shields.io/circleci/build/github/nestjs/nest/master\" alt=\"CircleCI\" /></a>\n<a href=\"https://discord.gg/G7Qnnhy\" target=\"_blank\"><img src=\"https://img.shields.io/badge/discord-online-brightgreen.svg\" alt=\"Discord\"/></a>\n<a href=\"https://opencollective.com/nest#backer\" target=\"_blank\"><img src=\"https://opencollective.com/nest/backers/badge.svg\" alt=\"Backers on Open Collective\" /></a>\n<a href=\"https://opencollective.com/nest#sponsor\" target=\"_blank\"><img src=\"https://opencollective.com/nest/sponsors/badge.svg\" alt=\"Sponsors on Open Collective\" /></a>\n  <a href=\"https://paypal.me/kamilmysliwiec\" target=\"_blank\"><img src=\"https://img.shields.io/badge/Donate-PayPal-ff3f59.svg\" alt=\"Donate us\"/></a>\n    <a href=\"https://opencollective.com/nest#sponsor\"  target=\"_blank\"><img src=\"https://img.shields.io/badge/Support%20us-Open%20Collective-41B883.svg\" alt=\"Support us\"></a>\n  <a href=\"https://twitter.com/nestframework\" target=\"_blank\"><img src=\"https://img.shields.io/twitter/follow/nestframework.svg?style=social&label=Follow\" alt=\"Follow us on Twitter\"></a>\n</p>\n  <!--[![Backers on Open Collective](https://opencollective.com/nest/backers/badge.svg)](https://opencollective.com/nest#backer)\n  [![Sponsors on Open Collective](https://opencollective.com/nest/sponsors/badge.svg)](https://opencollective.com/nest#sponsor)-->\n\n## Description\n\n[Nest](https://github.com/nestjs/nest) framework TypeScript starter repository.\n\n## Project setup\n\n```bash\n$ npm install\n```\n\n## Compile and run the project\n\n```bash\n# development\n$ npm run start\n\n# watch mode\n$ npm run start:dev\n\n# production mode\n$ npm run start:prod\n```\n\n## Run tests\n\n```bash\n# unit tests\n$ npm run test\n\n# e2e tests\n$ npm run test:e2e\n\n# test coverage\n$ npm run test:cov\n```\n\n## Deployment\n\nWhen you're ready to deploy your NestJS application to production, there are some key steps you can take to ensure it runs as efficiently as possible. Check out the [deployment documentation](https://docs.nestjs.com/deployment) for more information.\n\nIf you are looking for a cloud-based platform to deploy your NestJS application, check out [Mau](https://mau.nestjs.com), our official platform for deploying NestJS applications on AWS. Mau makes deployment straightforward and fast, requiring just a few simple steps:\n\n```bash\n$ npm install -g @nestjs/mau\n$ mau deploy\n```\n\nWith Mau, you can deploy your application in just a few clicks, allowing you to focus on building features rather than managing infrastructure.\n\n## Resources\n\nCheck out a few resources that may come in handy when working with NestJS:\n\n- Visit the [NestJS Documentation](https://docs.nestjs.com) to learn more about the framework.\n- For questions and support, please visit our [Discord channel](https://discord.gg/G7Qnnhy).\n- To dive deeper and get more hands-on experience, check out our official video [courses](https://courses.nestjs.com/).\n- Deploy your application to AWS with the help of [NestJS Mau](https://mau.nestjs.com) in just a few clicks.\n- Visualize your application graph and interact with the NestJS application in real-time using [NestJS Devtools](https://devtools.nestjs.com).\n- Need help with your project (part-time to full-time)? Check out our official [enterprise support](https://enterprise.nestjs.com).\n- To stay in the loop and get updates, follow us on [X](https://x.com/nestframework) and [LinkedIn](https://linkedin.com/company/nestjs).\n- Looking for a job, or have a job to offer? Check out our official [Jobs board](https://jobs.nestjs.com).\n\n## Support\n\nNest is an MIT-licensed open source project. It can grow thanks to the sponsors and support by the amazing backers. If you'd like to join them, please [read more here](https://docs.nestjs.com/support).\n\n## Stay in touch\n\n- Author - [Kamil My≈õliwiec](https://twitter.com/kammysliwiec)\n- Website - [https://nestjs.com](https://nestjs.com/)\n- Twitter - [@nestframework](https://twitter.com/nestframework)\n\n## License\n\nNest is [MIT licensed](https://github.com/nestjs/nest/blob/master/LICENSE).\n","size_bytes":5069},"replit.md":{"content":"# Aurora Airlines - Flight Management System\n\n## Overview\nAurora Airlines is a full-stack flight management application designed to streamline flight operations and enhance the customer booking experience. It features robust administration tools for managing aircraft, airports, employees, and flights, alongside a user-friendly interface for flight search, booking, and managing reservations. The system aims to provide a comprehensive solution for modern airline operations, focusing on efficiency, user experience, and scalability.\n\n## User Preferences\nNo specific user preferences documented yet.\n\n## System Architecture\n\n### UI/UX Decisions\nThe frontend features a modern design with:\n- **Glass morphism**: Applied to the flight search page for a sleek, translucent effect.\n- **Aurora Background**: Dynamic background imagery with gradient fallbacks for visual appeal.\n- **Component-based Design**: Reusable UI components built with React and styled with Tailwind CSS for consistency and rapid development.\n- **Interactive Seat Selection**: Visual seat maps for an intuitive booking experience.\n- **Dynamic Forms**: Payment forms dynamically render based on selected payment method.\n\n### Technical Implementations\n- **Backend**: Developed with NestJS (TypeScript) utilizing a modular architecture for managing various airline entities (aircrafts, flights, users, etc.).\n- **Frontend**: Built with React (TypeScript) and Tailwind CSS, featuring a responsive and interactive user interface.\n- **Authentication**: Session-based authentication powered by Passport.js for secure user and administrator access.\n- **Database**: SQLite with TypeORM as the ORM for managing relational data.\n- **API Communication**: Centralized API configuration in the frontend with automatic environment detection (local vs. Replit deployment).\n- **Booking Flow**: A multi-step booking process managed by a React Context, handling flight search, selection (departure/return), seat mapping, passenger information, and secure payment processing.\n- **Purchase Management**: Dedicated backend module for handling completed flight purchases, including passenger details, payment method, and status tracking.\n\n### Feature Specifications\n- **Admin Features**: Comprehensive management of aircraft fleets, aircraft types, airports, employee records, flight scheduling, and flight type categorization.\n- **User Features**:\n    - Secure account creation and authentication.\n    - Advanced flight search functionality.\n    - Multi-leg flight booking (round-trip support).\n    - Online check-in and flight cancellation capabilities.\n    - \"My Flights\" section for viewing and managing bookings.\n- **Dynamic Payment Gateway**: Supports various payment methods like Credit Card and Bank Slip, with integrated form validation and PDF generation for bank slips.\n\n### System Design Choices\n- **Monorepo-like Structure**: Separate `backend` and `frontend` directories managed within a single project.\n- **Environment Agnostic Configuration**: Backend and frontend are configured to run seamlessly across different environments (local development, Replit) using environment variables and dynamic API URL resolution.\n- **Graceful Shutdown**: The startup script (`start.sh`) ensures both services are initiated correctly and handles shutdown processes.\n- **Database Schema**: Robust schema design with TypeORM entities for Users, Employees, Aircrafts, Airports, Flights, User Flight Bookings, and Purchases, including JSON storage for complex data like seats and passenger details.\n\n## External Dependencies\n\n- **NestJS**: Backend framework.\n- **React**: Frontend library.\n- **TypeORM**: ORM for database interaction.\n- **SQLite**: Database.\n- **Passport.js**: Authentication middleware.\n- **Axios**: HTTP client for frontend API calls.\n- **Tailwind CSS**: Utility-first CSS framework.\n- **Radix UI**: UI component library (used in frontend).\n- **bcrypt**: Password hashing library.\n- **Express Session**: Session management for Node.js.","size_bytes":3997},"backend/src/airports/airports.service.ts":{"content":"import { Injectable, NotFoundException } from '@nestjs/common'; \nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { Airports } from './airports.entity';\nimport { CreateAirportsDto } from './create-airports.dto';\nimport { UpdateAirportsDto } from './update-airports.dto'; \n\n@Injectable()\nexport class AirportsService {\n  constructor(\n    @InjectRepository(Airports)\n    private airportsRepository: Repository<Airports>,\n  ) {}\n\n  findAll() {\n    return this.airportsRepository.find(); \n  }\n\n  create(CreateAirportsDto: CreateAirportsDto) {\n    const airports = this.airportsRepository.create(CreateAirportsDto); \n    return this.airportsRepository.save(airports); \n  }\n  \n  // GET /employees/:id\n  async findOne(id: number): Promise<Airports> {\n    const airport = await this.airportsRepository.findOne({ where: { id } });\n    if (!airport) {\n      throw new NotFoundException(`Airport with ID ${id} not found.`);\n    }\n    return airport;\n  }\n  \n  // PATCH /employees/:id\n  async update(id: number, updateAirportsDto: UpdateAirportsDto) {\n    const result = await this.airportsRepository.update(id, updateAirportsDto);\n    \n    // Verifica se a atualiza√ß√£o afetou algum registro\n    if (result.affected === 0) {\n        throw new NotFoundException(`Airport with ID ${id} not found.`);\n    }\n    return this.airportsRepository.findOne({ where: { id } });\n  }\n\n  // DELETE /employees/:id\n  async remove(id: number): Promise<void> {\n    const result = await this.airportsRepository.delete(id);\n    \n    // Verifica se o delete afetou algum registro\n    if (result.affected === 0) {\n      throw new NotFoundException(`Airport with ID ${id} not found.`);\n    }\n  }\n}","size_bytes":1711},"frontend/src/components/forms/seatMapEditor.tsx":{"content":"import React, { useState, useEffect, useCallback } from 'react';\nimport { Button } from '../ui/button';\n\n// --- Tipagem de Dados ---\ntype CellType = 'seat' | 'aisle' | 'exit' | 'galley';\ntype SeatLayout = CellType[][]; \n\ninterface SeatMapEditorProps {\n  initialLayout: string; \n  onLayoutChange: (layoutJson: string) => void;\n  // NOVO: Fun√ß√£o para notificar o componente pai sobre a contagem de assentos\n  onSeatCountChange: (count: number) => void; \n  isEditing?: boolean;\n}\n\nconst cellClasses: Record<CellType, string> = {\n  'seat': 'bg-blue-200 hover:bg-blue-300',\n  'aisle': 'bg-gray-100 hover:bg-gray-200 border-dashed border-gray-300',\n  'exit': 'bg-yellow-400 hover:bg-yellow-500',\n  'galley': 'bg-red-200 hover:bg-red-300',\n};\n\nconst typeColors: Record<CellType, string> = {\n    'seat': 'bg-blue-600',\n    'aisle': 'bg-gray-500',\n    'exit': 'bg-yellow-600',\n    'galley': 'bg-red-600',\n};\n\nconst SeatMapEditor: React.FC<SeatMapEditorProps> = ({ initialLayout, onLayoutChange, onSeatCountChange, isEditing = false }) => {\n  const [layout, setLayout] = useState<SeatLayout>([]);\n  const [rows, setRows] = useState(10);\n  const [cols, setCols] = useState(6);\n  const [activeTool, setActiveTool] = useState<CellType>('seat');\n\n  // Fun√ß√£o auxiliar para contar assentos\n  const countSeats = (currentLayout: SeatLayout): number => {\n    return currentLayout.flat().filter(cell => cell === 'seat').length;\n  };\n\n  // Efeito para sincronizar a contagem de assentos sempre que o layout muda localmente\n  useEffect(() => {\n    if (layout.length > 0) {\n        const count = countSeats(layout);\n        onSeatCountChange(count);\n    }\n  }, [layout, onSeatCountChange]);\n\n\n  // Inicializa o layout com base nos props ou valores padr√£o\n  useEffect(() => {\n    if (initialLayout) {\n      try {\n        const parsedLayout: SeatLayout = JSON.parse(initialLayout);\n        setLayout(parsedLayout);\n        setRows(parsedLayout.length);\n        setCols(parsedLayout[0]?.length || 0);\n        return;\n      } catch (e) {\n        console.error(\"Erro ao carregar layout inicial:\", e);\n      }\n    }\n    handleInitializeLayout(10, 6); \n  }, [initialLayout]);\n\n  // Fun√ß√£o para criar/resetar o grid. \n  const handleInitializeLayout = useCallback((newRows: number, newCols: number) => {\n    setRows(newRows);\n    setCols(newCols);\n    \n    // Cria o novo layout (ex: todos 'seat')\n    const newLayout: SeatLayout = Array.from({ length: newRows }, () =>\n      Array.from({ length: newCols }, () => 'seat' as CellType)\n    );\n    \n    setLayout(newLayout);\n    \n    // Salva o novo layout no formul√°rio pai (layoutData)\n    onLayoutChange(JSON.stringify(newLayout)); \n    // A contagem de assentos ser√° atualizada pelo useEffect acima\n  }, [onLayoutChange]);\n\n  // Fun√ß√£o para lidar com o clique na c√©lula (aplicar a ferramenta ativa)\n  const handleCellClick = (rowIndex: number, colIndex: number) => {\n    if (!isEditing) return;\n    \n    const newLayout = layout.map((row, rIdx) =>\n      row.map((cell, cIdx) => {\n        if (rIdx === rowIndex && cIdx === colIndex) {\n          return activeTool; \n        }\n        return cell;\n      })\n    );\n    setLayout(newLayout);\n    onLayoutChange(JSON.stringify(newLayout)); \n  };\n\n  return (\n    <div className=\"p-4 border border-gray-300 rounded-md\">\n      <h3 className=\"text-md font-semibold mb-3\">Seat Map Editor</h3>\n\n      {/* Ferramentas e Configura√ß√µes de Dimens√£o */}\n      <div className=\"flex justify-between items-end mb-4 p-3 bg-gray-50 rounded-md border\">\n        {/* Ferramentas de Desenho */}\n        <div className=\"flex space-x-2\">\n            {(['seat', 'aisle', 'exit', 'galley'] as CellType[]).map(type => (\n                <button\n                    key={type}\n                    onClick={() => setActiveTool(type)}\n                    type=\"button\" \n                    className={`py-1 px-3 text-sm font-medium rounded-full transition \n                    ${activeTool === type ? `${typeColors[type]} text-white shadow-md` : 'bg-white text-gray-700 border border-gray-300 hover:bg-gray-100'}`}\n                >\n                    {type.charAt(0).toUpperCase() + type.slice(1)}\n                </button>\n            ))}\n        </div>\n\n        {/* Controles de Dimens√£o (Permanece como input, mas o bot√£o Redraw √© necess√°rio) */}\n        <div className=\"flex space-x-3 items-center text-sm\">\n            <label>Rows: \n                <input \n                    type=\"number\" \n                    value={rows} \n                    onChange={(e) => setRows(Number(e.target.value))} \n                    className=\"w-16 ml-1 p-1 border rounded\"\n                />\n            </label>\n            <label>Cols: \n                <input \n                    type=\"number\" \n                    value={cols} \n                    onChange={(e) => setCols(Number(e.target.value))} \n                    className=\"w-16 ml-1 p-1 border rounded\"\n                />\n            </label>\n            <Button \n                onClick={() => handleInitializeLayout(rows, cols)}\n                type=\"button\" \n                variant=\"destructive\"\n                size=\"sm\"\n            >\n                Redraw Grid\n            </Button>\n        </div>\n      </div>\n\n\n      {/* Grid do Mapa de Assentos */}\n      <div className=\"overflow-auto max-h-96\">\n        <div \n          style={{ gridTemplateColumns: `repeat(${cols}, 40px)` }}\n          className=\"inline-grid gap-1 border p-2 bg-white shadow-inner\"\n        >\n          {layout.map((row, rowIndex) => (\n            <React.Fragment key={rowIndex}>\n              {row.map((cellType, colIndex) => (\n                <div\n                  key={colIndex}\n                  onClick={() => handleCellClick(rowIndex, colIndex)}\n                  className={`w-10 h-10 flex items-center justify-center text-xs border cursor-pointer select-none \n                              ${cellClasses[cellType]} \n                              ${cellType === 'aisle' ? 'border-dashed' : 'rounded-sm'}`}\n                  title={`Row ${rowIndex + 1}, Col ${colIndex + 1}: ${cellType}`}\n                >\n                  {cellType === 'seat' && `${String.fromCharCode(65 + colIndex)}${rowIndex + 1}`}\n                  {cellType === 'exit' && 'Exit'}\n                  {cellType === 'galley' && 'Galley'}\n                </div>\n              ))}\n            </React.Fragment>\n          ))}\n        </div>\n      </div>\n      \n    </div>\n  );\n};\n\nexport default SeatMapEditor;","size_bytes":6469},"backend/test/app.e2e-spec.ts":{"content":"import { Test, TestingModule } from '@nestjs/testing';\nimport { INestApplication } from '@nestjs/common';\nimport * as request from 'supertest';\nimport { App } from 'supertest/types';\nimport { AppModule } from './../src/app.module';\n\ndescribe('AppController (e2e)', () => {\n  let app: INestApplication<App>;\n\n  beforeEach(async () => {\n    const moduleFixture: TestingModule = await Test.createTestingModule({\n      imports: [AppModule],\n    }).compile();\n\n    app = moduleFixture.createNestApplication();\n    await app.init();\n  });\n\n  it('/ (GET)', () => {\n    return request(app.getHttpServer())\n      .get('/')\n      .expect(200)\n      .expect('Hello World!');\n  });\n});\n","size_bytes":674},"backend/src/airports/airports.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column } from 'typeorm';\n\n@Entity()\nexport class Airports {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  name: string;\n  @Column()\n  city: string;\n  @Column()\n  country: string;\n  @Column()\n  state: string;\n  @Column()\n  IATA: string;\n}","size_bytes":289},"backend/src/aircrafts/create-aircrafts.dto.ts":{"content":"import { IsString, IsNotEmpty, IsNumber } from 'class-validator';\n\nexport class CreateAircraftsDto {\n  @IsString()\n  @IsNotEmpty()\n  id: string; // ID fornecido pelo Admin (ex: A001)\n\n  @IsNumber()\n  @IsNotEmpty()\n  aircraftTypeId: number; // ID do AircraftType selecionado no DDL\n}","size_bytes":282},"backend/src/airports/create-airports.dto.ts":{"content":"export class CreateAirportsDto {\n    name: string; \n    city: string;\n    country: string;\n    state: string;\n    IATA: string;\n  }","size_bytes":131},"backend/src/app.service.ts":{"content":"import { Injectable } from '@nestjs/common';\n\n@Injectable()\nexport class AppService {\n  getHello(): string {\n    return 'Hello World!';\n  }\n}\n","size_bytes":142},"backend/src/employees/employees.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { EmployeesService } from './employees.service';\nimport { EmployeesController } from './employees.controller';\nimport { Employees } from './employees.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([Employees])],\n  controllers: [EmployeesController],\n  providers: [EmployeesService],\n})\nexport class EmployeesModule {}\n","size_bytes":425},"frontend/src/components/layouts/navbar.tsx":{"content":"import { Button } from \"../ui/button\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport { Link, useNavigate } from \"react-router-dom\"; \nimport React from \"react\"; \n\nconst styles: { [key: string]: React.CSSProperties } = {\n    logoContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        \n        marginBottom: '0', \n    },\n    logo: {\n        width: '80px', \n        height: 'auto',\n        marginRight: '10px',\n    },\n    logoText: {\n        color: 'white',\n        fontSize: '20px', \n        fontWeight: 'bold',\n        letterSpacing: '2px',\n    },\n};\n\nexport default function Navbar() {\n  const { isAuthenticated, logout, user } = useAuth(); \n  const navigate = useNavigate();\n\n  const handleAuthClick = () => {\n    if (isAuthenticated) {\n      logout();\n      navigate(\"/\");\n    } else {\n      navigate(\"/\");\n    }\n  };\n\n  const userBaseRoute = user?.type === \"admin\" ? \"/admin/employees\" : \"/home\"; \n\n  return (\n    <nav className=\"bg-blue-900 text-white flex justify-between items-center px-8 py-3\">\n      <div className=\"flex items-center space-x-8\">\n        <Link to={userBaseRoute} className=\"flex items-center space-x-2\">\n          \n          <div style={styles.logoContainer}>\n              <img src=\"/logo-branca.png\" alt=\"Aurora Airlines Logo\" style={styles.logo} />\n          </div>\n          \n\n        </Link>\n      </div>\n\n      <div className=\"flex items-center space-x-3\">\n        {isAuthenticated && user?.type === 'admin' && (\n          <Link to=\"/admin/reports\">\n             <Button variant=\"outline\" className=\"text-white border-white hover:bg-blue-800\">\n                Reports\n             </Button>\n            </Link>\n        )}\n        \n        <Button \n            onClick={handleAuthClick} \n            className={`${isAuthenticated ? 'bg-emerald-500 hover:bg-emerald-600' : 'bg-emerald-500 hover:bg-emerald-600'} text-white`}>\n          {isAuthenticated ? 'Sign out' : 'Sign in'}\n        </Button>\n      </div>\n    </nav>\n  );\n}","size_bytes":2023},"frontend/src/index.tsx":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom'; \nimport { AuthProvider } from './contexts/AuthContext';\nimport { BookingProvider } from './contexts/BookingContext';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <AuthProvider>\n        <BookingProvider>\n          <App />\n        </BookingProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  </React.StrictMode>\n);\n\nreportWebVitals();\n","size_bytes":654},"backend/src/auth/auth.service.ts":{"content":"// src/auth/auth.service.ts\nimport { Injectable, UnauthorizedException } from '@nestjs/common';\nimport { UsersService } from 'src/users/user.service';\nimport bcrypt =  require('bcrypt');\nimport { User } from 'src/users/user.entity';\n\n@Injectable()\nexport class AuthService {\n  constructor(private usersService: UsersService) {}\n\n  /**\n   * Valida o usu√°rio e senha.\n   * Chamado pelo LocalStrategy.\n   */\n  async validateUser(email: string, pass: string): Promise<any> {\n    // 1. Encontre o usu√°rio pelo email\n    // (Assumindo que voc√™ tem 'findOneByEmail' no seu UsersService)\n    const user = await this.usersService.findOneByEmail(email);\n    console.log('AUTHSERVICE: USUARIO ENCONTRADO')\n\n    if (user) {\n      // 2. Compare a senha enviada com o hash salvo no banco\n      const isMatch = await bcrypt.compare(pass, user.password);\n      \n      if (isMatch) {\n        // 3. Se bater, retorne o usu√°rio (sem a senha)\n        const { password, ...result } = user;\n        return result;\n      } else {\n        console.log(\"AUTHSERVICE: PASS DONT MATCH\")\n      }\n    }\n    \n    // 4. Se n√£o encontrar ou a senha n√£o bater, lance um erro\n    throw new UnauthorizedException('Invalid e-mail or password');\n  }\n}","size_bytes":1219},"backend/src/flightTypes/update-flight-types.dto.ts":{"content":"import { IsString, IsOptional } from 'class-validator';\n\nexport class UpdateFlightTypesDto {\n  @IsString()\n  @IsOptional()\n  name?: string;\n}","size_bytes":141},"backend/src/users/create-user.dto.ts":{"content":"export class CreateUserDto {\n  name: string;\n  address: string; \n  phoneNumber: string;\n  email: string;\n  workplace: string;\n  workplaceAddress: string;\n  birthday: string;\n  CPF: string;\n  RG: string;\n  RGIssueDate: string;\n  IssuingBodyofRG: string;\n  password: string;\n}","size_bytes":274},"backend/src/flightTypes/flight-types.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { FlightTypesService } from './flight-types.services';\nimport { FlightTypesController } from './flight-types.controller';\nimport { FlightTypes } from './flight-types.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([FlightTypes])],\n  controllers: [FlightTypesController],\n  providers: [FlightTypesService],\n  exports: [TypeOrmModule]\n})\nexport class FlightTypesModule {}","size_bytes":475},"frontend/src/components/updateModal.tsx":{"content":"import React, { useState, useEffect, FormEvent, ChangeEvent } from 'react';\nimport axios from 'axios';\nimport { API_BASE_URL, CATEGORY_OPTIONS, Employee, UpdateEmployeeDto } from '../constants';\n\ninterface UpdateEmployeeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    // O objeto pode ser nulo se o modal n√£o estiver aberto\n    employeeToUpdate: Employee | null; \n    onEmployeeUpdated: () => void;\n}\n\nconst UpdateEmployeeModal: React.FC<UpdateEmployeeModalProps> = ({ isOpen, onClose, employeeToUpdate, onEmployeeUpdated }) => {\n    // Tipagem do estado com UpdateEmployeeDto (campos opcionais)\n    const [formData, setFormData] = useState<UpdateEmployeeDto>({});\n\n    useEffect(() => {\n        if (employeeToUpdate) {\n            // Sincroniza o estado do formul√°rio com os dados do funcion√°rio para edi√ß√£o\n            const { id, ...rest } = employeeToUpdate;\n            setFormData(rest);\n        }\n    }, [employeeToUpdate]);\n\n    if (!isOpen || !employeeToUpdate) return null;\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        try {\n            // Requisi√ß√£o PATCH usa o ID do funcion√°rio original\n            await axios.patch(`${API_BASE_URL}/${employeeToUpdate.id}`, formData);\n            alert('Funcion√°rio atualizado com sucesso!');\n            onEmployeeUpdated(); \n            onClose(); \n        } catch (error) {\n            console.error('Erro ao atualizar funcion√°rio:', error);\n            alert('Erro ao atualizar funcion√°rio. Verifique o console.');\n        }\n    };\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>Update employee</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    {/* Mapeamento dos campos */}\n                    {['Name', 'Birthday', 'E-mail', 'Phone'].map(label => {\n                        const name = label.toLowerCase().replace(/[-]/g, '');\n                        // Mapeia o label para a chave correta do DTO\n                        const key: keyof UpdateEmployeeDto = name === 'e-mail' ? 'email' : (name === 'phone' ? 'phoneNumber' : name as keyof UpdateEmployeeDto);\n                        return (\n                            <React.Fragment key={key}>\n                                <label style={modalStyles.label}>{label}</label>\n                                <input\n                                    type={key === 'birthday' ? 'date' : 'text'}\n                                    name={key}\n                                    // Utiliza employeeToUpdate para o valor inicial, j√° que o estado √© parcial\n                                    value={formData[key] || employeeToUpdate[key as keyof Employee]} \n                                    onChange={handleChange}\n                                    style={modalStyles.input}\n                                    required\n                                />\n                            </React.Fragment>\n                        );\n                    })}\n\n                    {/* Campo de Category (DDL) */}\n                    <label style={modalStyles.label}>Category</label>\n                    <select\n                        name=\"category\"\n                        value={formData.category || employeeToUpdate.category}\n                        onChange={handleChange}\n                        style={modalStyles.input}\n                        required\n                    >\n                        {CATEGORY_OPTIONS.map(option => (\n                            <option key={option} value={option}>{option}</option>\n                        ))}\n                    </select>\n\n                    <div style={modalStyles.buttonGroup}>\n                        <button type=\"submit\" style={modalStyles.updateButton}>\n                            Update employee\n                        </button>\n                        <button type=\"button\" onClick={onClose} style={modalStyles.cancelButton}>\n                            Cancel\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default UpdateEmployeeModal;\n\ninterface CustomStyles{\n    overlay: React.CSSProperties;\n    container: React.CSSProperties;\n    title: React.CSSProperties;\n    form: React.CSSProperties;\n    label: React.CSSProperties;\n    input: React.CSSProperties;\n    buttonGroup: React.CSSProperties;\n    updateButton: React.CSSProperties;\n    cancelButton: React.CSSProperties;\n}\n\n// Estilos b√°sicos (mantidos do c√≥digo anterior)\nconst modalStyles: CustomStyles= {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '8px',\n        width: '400px', boxShadow: '0 4px 10px rgba(0, 0, 0, 0.1)',\n        textAlign: 'center'\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    label: {\n        fontSize: '14px', color: '#333', marginTop: '10px',\n    },\n    input: {\n        padding: '10px', margin: '5px 0 15px 0', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px',\n    },\n    buttonGroup: {\n        marginTop: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center',\n    },\n    updateButton: {\n        backgroundColor: '#003366', color: 'white', padding: '12px 20px',\n        border: 'none', borderRadius: '5px', cursor: 'pointer',\n        fontSize: '16px', fontWeight: 'bold', boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n        marginBottom: '10px', width: '100%',\n    },\n    cancelButton: {\n        backgroundColor: 'transparent', color: '#CC0000', border: 'none',\n        cursor: 'pointer', fontSize: '14px', textDecoration: 'underline',\n    }\n};","size_bytes":6263},"frontend/src/components/airportCard.tsx":{"content":"import React from 'react';\nimport { Airport } from '../airports.constants';\n\ninterface AirportCardProps {\n    airport: Airport;\n    onEdit: (airport: Airport) => void;\n    onDelete: (id: number, name: string) => void;\n}\n\nconst AirportCard: React.FC<AirportCardProps> = ({ airport, onEdit, onDelete }) => {\n    return (\n        <div style={cardStyles.card}>\n            <div style={cardStyles.row}>\n                {/* Lado Esquerdo */}\n                <div style={cardStyles.column}>\n                    <p style={cardStyles.dataItem}>\n                        <span style={cardStyles.dataLabel}>IATA:</span> {airport.IATA}\n                    </p>\n                    <p style={cardStyles.dataItem}>\n                        <span style={cardStyles.dataLabel}>City:</span> {airport.city}\n                    </p>\n                </div>\n                \n                {/* Lado Direito */}\n                <div style={cardStyles.column}>\n                    <p style={cardStyles.dataItem}>\n                        <span style={cardStyles.dataLabel}>Name:</span> {airport.name}\n                    </p>\n                    <p style={cardStyles.dataItem}>\n                        <span style={cardStyles.dataLabel}>State:</span> {airport.state}\n                        <span style={{...cardStyles.dataLabel, marginLeft: '15px'}}>Country:</span> {airport.country}\n                    </p>\n                </div>\n            </div>\n\n            {/* √çcones de A√ß√£o (Adaptado do design) */}\n            <div style={cardStyles.actions}>\n                <span \n                    onClick={() => onEdit(airport)} \n                    style={cardStyles.icon}\n                    title=\"Editar\"\n                >\n                    ‚úèÔ∏è \n                </span>\n                <span \n                    onClick={() => onDelete(airport.id, airport.name)} \n                    style={{...cardStyles.icon, color: '#CC0000'}}\n                    title=\"Deletar\"\n                >\n                    üóëÔ∏è \n                </span>\n            </div>\n        </div>\n    );\n};\n\nexport default AirportCard;\n\n// Estilos para o Card\nconst cardStyles: any = {\n    card: {\n        backgroundColor: '#fff', border: '1px solid #ddd',\n        borderRadius: '8px', padding: '15px 20px', width: '100%',\n        boxShadow: '0 2px 5px rgba(0,0,0,0.05)', position: 'relative',\n        marginBottom: '15px',\n    },\n    row: {\n        display: 'flex', justifyContent: 'space-between',\n        paddingRight: '60px', // Espa√ßo para os √≠cones\n    },\n    column: {\n        flex: 1, \n        minWidth: '300px', \n    },\n    dataItem: {\n        margin: '5px 0',\n        fontSize: '15px',\n    },\n    dataLabel: {\n        fontWeight: 'bold', \n        color: '#333', \n        marginRight: '5px',\n    },\n    actions: {\n        position: 'absolute', top: '50%', right: '15px',\n        transform: 'translateY(-50%)',\n        display: 'flex', gap: '10px',\n    },\n    icon: {\n        cursor: 'pointer', \n        fontSize: '18px',\n        padding: '5px',\n    }\n};","size_bytes":3027},"frontend/src/components/forms/formSection.tsx":{"content":"import React, { ReactNode } from \"react\";\n\ninterface FormSectionProps {\n  title: string;\n  children: ReactNode;\n}\n\nexport const FormSection: React.FC<FormSectionProps> = ({ title, children }) => {\n  return (\n    // Usa classes Tailwind para styling: fundo branco, sombra, arredondamento e padding\n    <section className=\"bg-white shadow-sm rounded-2xl p-5 mb-5\">\n      <h2 className=\"text-lg font-semibold mb-4 text-gray-800\">{title}</h2>\n      {children}\n    </section>\n  );\n};","size_bytes":478},"backend/src/airports/airports.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Patch, Delete } from '@nestjs/common'; \nimport { AirportsService } from './airports.service';\nimport { CreateAirportsDto } from './create-airports.dto'; \nimport { UpdateAirportsDto } from './update-airports.dto'; \n\n@Controller('airports')\nexport class AirportsController {\n  constructor(private AirportsService: AirportsService) {} \n\n  // GET /airports\n  @Get() \n  findAll() {\n    return this.AirportsService.findAll(); \n  }\n\n  // POST /airports\n  @Post()\n  create(@Body() CreateAirportsDto: CreateAirportsDto) { \n    return this.AirportsService.create(CreateAirportsDto); \n  }\n  \n  // GET /airports/:id\n  @Get(':id')\n  findOne(@Param('id') id: string) {\n    return this.AirportsService.findOne(+id); \n  }\n\n  // PATCH /airports/:id\n  @Patch(':id')\n  update(@Param('id') id: string, @Body() updateAirportsDto: UpdateAirportsDto) {\n    // O m√©todo PATCH √© usado para atualiza√ß√µes parciais\n    return this.AirportsService.update(+id, updateAirportsDto);\n  }\n\n  // DELETE /airports/:id\n  @Delete(':id')\n  remove(@Param('id') id: string) {\n    return this.AirportsService.remove(+id);\n  }\n}","size_bytes":1134},"frontend/src/contexts/AuthContext.tsx":{"content":"import React, { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { API_BASE_URL } from '../config';\n\nconst AUTH_STATUS_URL = `${API_BASE_URL}/auth/status`;\n\ninterface User {\n    id: number;\n    name: string;\n    email: string;\n    type: 'admin' | 'user'; \n}\n\ninterface AuthContextType {\n    user: User | null;\n    isAuthenticated: boolean;\n    isLoading: boolean;\n    login: (userData: User) => void; \n    logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\ninterface AuthProviderProps {\n    children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n    const [user, setUser] = useState<User | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const isAuthenticated = !!user; \n\n    const login = (userData: User) => { \n        setUser(userData);\n    };\n\n    const logout = () => {\n        setUser(null);\n    };\n\n    /*return (\n        <AuthContext.Provider value={{ user, isAuthenticated, login, logout }}>\n            {children}\n        </AuthContext.Provider>\n    );*/\n    useEffect(() => {\n        const checkAuthStatus = async () => {\n            try {\n                const response = await fetch(AUTH_STATUS_URL, {\n                    method: 'GET',\n                    credentials: 'include', // Envia o cookie de sess√£o\n                });\n\n                if (response.ok) {\n                    const userData = await response.json();\n                    // Se o cookie for v√°lido, logamos o usu√°rio no React\n                    login({\n                        id: userData.id,\n                        name: userData.name,\n                        email: userData.email,\n                        type: userData.role \n                    });\n                } else {\n                    // Se o cookie n√£o for v√°lido (ou n√£o existir), deslogamos\n                    logout();\n                }\n            } catch (error) {\n                console.error(\"Erro ao verificar status de auth:\", error);\n                logout();\n            } finally {\n                // 5. Termina o 'loading'\n                setIsLoading(false);\n            }\n        };\n\n        checkAuthStatus();\n    }, []); // O array vazio [] faz isso rodar S√ì UMA VEZ\n\n    // 6. N√£o renderize o app at√© a verifica√ß√£o terminar\n    if (isLoading) {\n        return <div>Carregando...</div>; // Ou um componente de Spinner\n    }\n\n    return (\n        <AuthContext.Provider value={{ user, isAuthenticated, isLoading, login, logout }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n        throw new Error('useAuth deve ser usado dentro de um AuthProvider');\n    }\n    return context;\n};","size_bytes":2841},"backend/src/users/user.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UsersService } from './user.service';\nimport { UsersController } from './user.controller';\nimport { User } from './user.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([User])],\n  controllers: [UsersController],\n  providers: [UsersService],\n  exports: [UsersService]\n})\nexport class UsersModule {}\n","size_bytes":406},"backend/src/auth/session-auth.guard.ts":{"content":"import { \n  CanActivate, \n  ExecutionContext, \n  Injectable, \n  UnauthorizedException \n} from '@nestjs/common';\n\n@Injectable()\nexport class SessionAuthGuard implements CanActivate {\n  \n  /**\n   * Este m√©todo √© chamado automaticamente pelo Nest.js\n   * sempre que o Guard √© usado em uma rota.\n   */\n  canActivate(context: ExecutionContext): boolean {\n    \n    // 1. Obt√©m o objeto 'request' da requisi√ß√£o\n    const request = context.switchToHttp().getRequest();\n\n    // 2. A \"M√°gica\" do Passport.js\n    //    Se o 'passport.session()' (do main.ts) e o \n    //    'SessionSerializer' (deserializeUser) funcionaram,\n    //    o Passport anexa a fun√ß√£o 'isAuthenticated()' ao request.\n    const isAuthenticated = request.isAuthenticated();\n\n    // 3. Verifica√ß√£o\n    if (isAuthenticated) {\n      // Se a sess√£o for v√°lida, permite o acesso.\n      return true;\n    } else {\n      // Se n√£o houver sess√£o v√°lida (sem cookie ou cookie expirado),\n      // lan√ßa uma exce√ß√£o, que o Nest.js converte em uma\n      // resposta HTTP 401 Unauthorized.\n      throw new UnauthorizedException('Acesso n√£o autorizado. Por favor, fa√ßa o login.');\n    }\n  }\n}","size_bytes":1160},"frontend/postcss.config.js":{"content":"module.exports = {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":82},"frontend/src/pages/AircraftTypesPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios from 'axios'; // Importar axios para requisi√ß√µes HTTP\nimport Navbar from '../components/layouts/navbar';\nimport PageContainer from '../components/layouts/pageContainer';\nimport SectionHeader from '../components/layouts/sectionHeader';\nimport { AdminTabs } from '../components/layouts/adminTabs';\nimport { EditableCard } from '../components/cards/EditableCard';\nimport AircraftTypeModal from '../components/aircraftTypesModal'; \nimport SeatMapViewerModal from '../components/seatMapViewerModal'; \n// Importar constantes e interfaces do novo arquivo\nimport { API_BASE_URL, AircraftType, CreateAircraftTypeDto, UpdateAircraftTypeDto } from '../aircraft-types.constants'; \n\n// O array initialAircraftTypes √© removido e substitu√≠do por estado vazio.\n\nconst AdminAircraftTypesPage: React.FC = () => {\n    // Inicializar com array vazio e adicionar estado de carregamento\n    const [aircraftTypes, setAircraftTypes] = useState<AircraftType[]>([]);\n    const [isLoading, setIsLoading] = useState<boolean>(true);\n    \n    // Estados do Modal de Edi√ß√£o/Cria√ß√£o\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n    const [typeToEdit, setTypeToEdit] = useState<AircraftType | null>(null);\n    \n    // Estados do Modal de Visualiza√ß√£o\n    const [isViewerModalOpen, setIsViewerModalOpen] = useState(false);\n    const [typeToView, setTypeToView] = useState<{ type: string; layoutData: string } | null>(null);\n\n    // NOVO: Fun√ß√£o para buscar a lista de tipos de aeronave (GET /aircraft-types)\n    const fetchAircraftTypes = async () => {\n        setIsLoading(true);\n        try {\n            const response = await axios.get<AircraftType[]>(API_BASE_URL); \n            setAircraftTypes(response.data);\n        } catch (error) {\n            console.error('Error fetching aircraft types:', error);\n            alert('Error loading aircraft types list.');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    // Chama a busca na montagem do componente\n    useEffect(() => {\n        fetchAircraftTypes();\n    }, []);\n\n    // --- Fun√ß√µes de Edi√ß√£o/Cria√ß√£o ---\n    const handleOpenAddModal = () => {\n        setTypeToEdit(null);\n        setIsEditModalOpen(true);\n    };\n\n    const handleOpenEditModal = (type: AircraftType) => {\n        setTypeToEdit(type);\n        setIsEditModalOpen(true);\n    };\n    \n    // --- Fun√ß√µes de Visualiza√ß√£o ---\n    const handleViewSeatMap = (type: AircraftType) => {\n        setTypeToView({ \n            type: type.type, \n            layoutData: type.layoutData \n        });\n        setIsViewerModalOpen(true);\n    };\n\n\n    // ATUALIZADO: Usando axios.delete\n    const handleDeleteType = async (id: number, typeName: string) => {\n        if (!window.confirm(`Are you sure you want to delete the aircraft type ${typeName}?`)) {\n            return;\n        }\n        try {\n            await axios.delete(`${API_BASE_URL}/${id}`);\n            alert(`Aircraft type ${typeName} deleted successfully.`);\n            fetchAircraftTypes(); // Recarrega a lista\n        } catch (error) {\n            console.error('Error deleting aircraft type:', error);\n            alert('Error deleting aircraft type. Check the console.');\n        }\n    };\n\n    // ATUALIZADO: Usando axios.post/patch\n    const handleSaveType = async (data: Omit<AircraftType, 'id'>) => {\n        try {\n            if (typeToEdit) {\n                // Edi√ß√£o: PATCH\n                await axios.patch(`${API_BASE_URL}/${typeToEdit.id}`, data as UpdateAircraftTypeDto);\n                alert('Aircraft type updated successfully!');\n            } else {\n                // Cria√ß√£o: POST\n                await axios.post(API_BASE_URL, data as CreateAircraftTypeDto);\n                alert('Aircraft type added successfully!');\n            }\n            fetchAircraftTypes(); // Recarrega a lista\n        } catch (error) {\n            console.error(`Error saving aircraft type:`, error);\n            alert(`Error saving aircraft type. Check the console.`);\n        }\n    };\n\n    // NOVO: Estado de Carregamento\n    if (isLoading) {\n        return (\n             <div className=\"min-h-screen bg-gray-50\">\n                <Navbar />\n                <div style={loadingStyles}>Loading aircraft types...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <Navbar />\n            <AdminTabs />\n            <PageContainer>\n                <SectionHeader\n                    title=\"Aircraft Types\"\n                    buttonText=\"Add New Type\"\n                    onButtonClick={handleOpenAddModal}\n                />\n                \n                <div className=\"space-y-4\">\n                    {aircraftTypes.length === 0 ? (\n                        <p className=\"text-gray-500\">Nenhum tipo de aeronave cadastrado.</p>\n                    ) : (\n                        aircraftTypes.map(type => (\n                            <EditableCard\n                                key={type.id}\n                                type={type.type}\n                                seats={type.seats}\n                                description={type.description}\n                                onViewSeatMap={() => handleViewSeatMap(type)} \n                                onEdit={() => handleOpenEditModal(type)}\n                                onDelete={() => handleDeleteType(type.id, type.type)}\n                            />\n                        ))\n                    )}\n                </div>\n\n                <AircraftTypeModal\n                    isOpen={isEditModalOpen}\n                    onClose={() => setIsEditModalOpen(false)}\n                    onSave={handleSaveType}\n                    aircraftTypeToEdit={typeToEdit}\n                />\n\n                <SeatMapViewerModal\n                    isOpen={isViewerModalOpen}\n                    onClose={() => setIsViewerModalOpen(false)}\n                    aircraftTypeData={typeToView}\n                />\n            </PageContainer>\n        </div>\n    );\n};\n\nexport default AdminAircraftTypesPage;\n\n// Estilo para o estado de loading\nconst loadingStyles: React.CSSProperties = {\n    textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n    color: '#555',\n};","size_bytes":6285},"frontend/src/components/tables/table.tsx":{"content":"import React, { ReactNode } from \"react\";\n\ninterface TableProps {\n  headers: string[];\n  children: ReactNode;\n}\n\nexport const Table: React.FC<TableProps> = ({ headers, children }) => {\n  return (\n    <table className=\"min-w-full border-collapse\">\n      <thead>\n        <tr className=\"bg-gray-100\">\n          {headers.map((header, idx) => (\n            <th\n              key={idx}\n              className=\"text-left px-4 py-2 text-sm font-semibold text-gray-700\"\n            >\n              {header}\n            </th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>{children}</tbody>\n    </table>\n  );\n};\n","size_bytes":613},"backend/src/app.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { UsersModule } from './users/user.module';\nimport { EmployeesModule } from './employees/employees.module';\nimport { AirportsModule } from './airports/airports.module';\nimport { AircraftTypesModule } from './aircraftTypes/aircraft-types.module';\nimport { AircraftsModule } from './aircrafts/aircrafts.module';\nimport { FlightTypesModule } from './flightTypes/flight-types.module';\nimport { FlightsModule } from './flights/flights.module';\nimport { AuthModule } from './auth/auth.module';\nimport { UserFlightsModule } from './userFlights/userFlights.module';\nimport { PurchasesModule } from './purchases/purchases.module';\n\n@Module({\n  imports: [\n    TypeOrmModule.forRoot({\n      type: 'sqlite',\n      database: 'database.sqlite',\n      entities: [__dirname + '/**/*.entity{.ts,.js}'],\n      synchronize: true, \n    }),\n    UsersModule,\n    EmployeesModule,\n    AirportsModule,\n    AircraftTypesModule,\n    AircraftsModule,\n    FlightTypesModule,\n    FlightsModule,\n    AuthModule,\n    UserFlightsModule,\n    PurchasesModule\n  ],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n\n","size_bytes":1310},"backend/src/flights/update-flights.dto.ts":{"content":"import { IsString, IsNumber, IsOptional, IsArray } from 'class-validator';\n\nexport class UpdateFlightsDto {\n  @IsString()\n  @IsOptional()\n  flightNumber?: string;\n\n  @IsNumber()\n  @IsOptional()\n  flightTypeId?: number;\n\n  @IsNumber()\n  @IsOptional()\n  aircraftTypeId?: number;\n\n  @IsNumber()\n  @IsOptional()\n  originAirportId?: number;\n\n  @IsNumber()\n  @IsOptional()\n  destinationAirportId?: number;\n\n  @IsString()\n  @IsOptional()\n  departureTime?: string;\n\n  @IsString()\n  @IsOptional()\n  departureDate?: string;\n\n  @IsString()\n  @IsOptional()\n  arrivalTime?: string;\n\n  @IsString()\n  @IsOptional()\n  arrivalDate?: string;\n\n  @IsString()\n  @IsOptional()\n  estimatedDuration?: string;\n  \n  @IsString()\n  @IsOptional()\n  transfers?: string; \n\n  @IsArray()\n  @IsNumber({}, { each: true })\n  @IsOptional()\n  staffIds?: number[];\n}","size_bytes":827},"frontend/src/reportWebVitals.ts":{"content":"import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","size_bytes":425},"frontend/src/components/buttons/outlineButton.tsx":{"content":"import React from \"react\";\n\ninterface OutlineButtonProps {\n  children: React.ReactNode;\n  onClick?: () => void;\n}\n\nexport const OutlineButton: React.FC<OutlineButtonProps> = ({\n  children,\n  onClick,\n}) => {\n  return (\n    <button\n      onClick={onClick}\n      className=\"border border-blue-500 text-blue-600 hover:bg-blue-50 font-medium py-1.5 px-3 rounded-lg transition\"\n    >\n      {children}\n    </button>\n  );\n};\n","size_bytes":418},"frontend/src/components/buttons/primaryButton.tsx":{"content":"import React from \"react\";\n\n\ninterface PrimaryButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  children: React.ReactNode;\n}\n\nexport const PrimaryButton: React.FC<PrimaryButtonProps> = ({\n  children,\n  onClick,\n  ...props \n}) => {\n  return (\n    <button\n      onClick={onClick}\n      className=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg shadow-sm transition\"\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};\n","size_bytes":475},"backend/src/main.ts":{"content":"import { NestFactory } from '@nestjs/core';\nimport { ValidationPipe } from '@nestjs/common';\nimport { AppModule } from './app.module';\nimport session = require('express-session');\nimport passport = require('passport');\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  app.enableCors({\n    origin: true,\n    credentials: true,\n  });\n\n  app.use(\n    session({                                                                                                                 \n      secret: process.env.SESSION_SECRET || 'STRONG_SESSION_SECRET_CHANGE_IN_PRODUCTION',\n      resave: false,\n      saveUninitialized: false,\n      cookie: {\n        maxAge: 3600000,\n        httpOnly: true,\n        sameSite: 'lax',\n      },\n    }),\n  );\n\n  app.use(passport.initialize());\n  app.use(passport.session());\n  app.useGlobalPipes(new ValidationPipe());\n\n  const port = process.env.BACKEND_PORT || process.env.PORT || 5000;\n  const host = process.env.HOST || '0.0.0.0';\n  await app.listen(port, host);\n  console.log(`Backend is running on ${host}:${port}`);\n}\n\nbootstrap();","size_bytes":1089},"frontend/src/pages/FlightSearchPage.tsx":{"content":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useBooking } from '../contexts/BookingContext';\nimport { API_BASE_URL } from '../config';\n\ninterface SearchFormData {\n    from: string;\n    to: string;\n    departureDate: string;\n    returnDate: string;\n}\n\nconst FlightSearchPage: React.FC = () => {\n    const navigate = useNavigate();\n    const { logout } = useAuth();\n    const { setSearchData, clearBooking } = useBooking();\n    const [formData, setFormData] = useState<SearchFormData>({\n        from: '',\n        to: '',\n        departureDate: '',\n        returnDate: ''\n    });\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSearch = async (e: React.FormEvent) => {\n        e.preventDefault();\n        \n        clearBooking();\n        setSearchData(formData);\n        \n        try {\n            const response = await fetch(`${API_BASE_URL}/flights/search`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(formData),\n                credentials: 'include',\n            });\n\n            if (response.ok) {\n                const results = await response.json();\n                navigate('/flight-results', { state: { results, searchData: formData, isReturn: false } });\n            } else {\n                console.error('Search failed');\n                alert('Failed to search for flights. Please try again.');\n            }\n        } catch (error) {\n            console.error('Error searching for flights:', error);\n            alert('Error searching for flights. Please try again.');\n        }\n    };\n\n    const handleSignOut = async () => {\n        try {\n            const response = await fetch(`${API_BASE_URL}/auth/logout`, {\n                method: 'POST',\n                credentials: 'include',\n            });\n            \n            if (response.ok) {\n                logout();\n                navigate('/', { replace: true });\n            }\n        } catch (error) {\n            console.error('Error logging out:', error);\n            logout();\n            navigate('/', { replace: true });\n        }\n    };\n\n    return (\n        <div style={styles.pageContainer}>\n            {/* Top Navigation Bar */}\n            <nav style={styles.navbar}>\n                <div style={styles.logoContainer}>\n                    <img src=\"/logo-branca.png\" alt=\"Aurora Airlines\" style={styles.logo} />\n                </div>\n                <button onClick={handleSignOut} style={styles.signInButton}>\n                    Sign out\n                </button>\n            </nav>\n\n            {/* Main Content with Background */}\n            <div style={styles.mainContent}>\n                {/* Glass Panel Container */}\n                <div style={styles.searchContainer}>\n                    <div style={styles.glassPanel}>\n                        <h2 style={styles.title}>Choose your departure flight:</h2>\n                        \n                        <form onSubmit={handleSearch} style={styles.form}>\n                            <div style={styles.row}>\n                                <div style={styles.inputGroup}>\n                                    <label style={styles.label}>From:</label>\n                                    <input\n                                        type=\"text\"\n                                        name=\"from\"\n                                        value={formData.from}\n                                        onChange={handleChange}\n                                        style={styles.input}\n                                        placeholder=\"Departure city\"\n                                        required\n                                    />\n                                </div>\n                                <div style={styles.inputGroup}>\n                                    <label style={styles.label}>To:</label>\n                                    <input\n                                        type=\"text\"\n                                        name=\"to\"\n                                        value={formData.to}\n                                        onChange={handleChange}\n                                        style={styles.input}\n                                        placeholder=\"Destination city\"\n                                        required\n                                    />\n                                </div>\n                            </div>\n\n                            {/* Swap Icon (centered between rows) */}\n                            <div style={styles.swapIconContainer}>\n                                <div style={styles.swapIcon}>\n                                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                        <path d=\"M7 16V4M7 4L3 8M7 4L11 8\" />\n                                        <path d=\"M17 8V20M17 20L21 16M17 20L13 16\" />\n                                    </svg>\n                                </div>\n                            </div>\n\n                            <div style={styles.row}>\n                                <div style={styles.inputGroup}>\n                                    <label style={styles.label}>Departure:</label>\n                                    <input\n                                        type=\"date\"\n                                        name=\"departureDate\"\n                                        value={formData.departureDate}\n                                        onChange={handleChange}\n                                        style={styles.input}\n                                        required\n                                    />\n                                </div>\n                                <div style={styles.inputGroup}>\n                                    <label style={styles.label}>Return:</label>\n                                    <input\n                                        type=\"date\"\n                                        name=\"returnDate\"\n                                        value={formData.returnDate}\n                                        onChange={handleChange}\n                                        style={styles.input}\n                                        required\n                                    />\n                                </div>\n                            </div>\n\n                            <button type=\"submit\" style={styles.searchButton}>\n                                <span>Search</span>\n                                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginLeft: '8px' }}>\n                                    <circle cx=\"11\" cy=\"11\" r=\"8\" />\n                                    <path d=\"M21 21l-4.35-4.35\" />\n                                </svg>\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    pageContainer: {\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#e5e7eb',\n    },\n    navbar: {\n        backgroundColor: '#1e3a5f',\n        padding: '1rem 2rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logo: {\n        height: '50px',\n        width: 'auto',\n    },\n    signInButton: {\n        backgroundColor: '#34d399',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        transition: 'background-color 0.3s',\n    },\n    mainContent: {\n        flex: 1,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '2rem',\n        backgroundImage: 'url(\"/aurora-bg.jpg\"), linear-gradient(to bottom, #0f172a, #1e293b, #0c4a6e)',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        position: 'relative',\n    },\n    searchContainer: {\n        width: '100%',\n        maxWidth: '900px',\n        padding: '2rem',\n    },\n    glassPanel: {\n        background: 'rgba(255, 255, 255, 0.15)',\n        backdropFilter: 'blur(10px)',\n        borderRadius: '24px',\n        padding: '3rem',\n        boxShadow: '0 8px 32px 0 rgba(31, 38, 135, 0.37)',\n        border: '1px solid rgba(255, 255, 255, 0.18)',\n    },\n    title: {\n        color: 'white',\n        fontSize: '1.5rem',\n        fontWeight: '600',\n        marginBottom: '2rem',\n        textAlign: 'left',\n    },\n    form: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '1.5rem',\n    },\n    row: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '1.5rem',\n    },\n    inputGroup: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    label: {\n        color: 'white',\n        fontSize: '0.95rem',\n        fontWeight: '500',\n        marginBottom: '0.5rem',\n    },\n    input: {\n        padding: '0.875rem 1rem',\n        fontSize: '1rem',\n        border: 'none',\n        borderRadius: '12px',\n        backgroundColor: 'white',\n        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\n        outline: 'none',\n        transition: 'box-shadow 0.3s',\n    },\n    swapIconContainer: {\n        display: 'flex',\n        justifyContent: 'center',\n        margin: '-0.75rem 0',\n    },\n    swapIcon: {\n        backgroundColor: 'white',\n        borderRadius: '50%',\n        width: '48px',\n        height: '48px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.15)',\n        color: '#1e3a5f',\n    },\n    searchButton: {\n        backgroundColor: '#0e7490',\n        color: 'white',\n        border: 'none',\n        padding: '1rem 2rem',\n        borderRadius: '12px',\n        fontSize: '1.1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        alignSelf: 'center',\n        marginTop: '1rem',\n        boxShadow: '0 4px 12px rgba(14, 116, 144, 0.3)',\n        transition: 'all 0.3s',\n        minWidth: '200px',\n    },\n};\n\nexport default FlightSearchPage;\n","size_bytes":10759},"backend/src/auth/auth.controller.ts":{"content":"// src/auth/auth.controller.ts\nimport { Controller, Post, UseGuards, Request, Get, Body, HttpCode, HttpStatus } from '@nestjs/common';\nimport { LocalAuthGuard } from './local-auth.guard'; // Criaremos este guardinha\nimport { SessionAuthGuard } from './session-auth.guard';\nimport { LoginDto } from './login.dto'; // Crie um DTO simples\n\n@Controller('auth')\nexport class AuthController {\n\n  /**\n   * Rota de Login: POST /auth/login\n   * Usa o LocalAuthGuard para ativar a LocalStrategy.\n   */\n  @UseGuards(LocalAuthGuard)\n  @Post('login')\n  @HttpCode(HttpStatus.OK)\n  async login(@Request() req, @Body() loginDto: LoginDto): Promise<any> {\n    // Se o 'LocalAuthGuard' passar, o 'req.user' j√° foi\n    // preenchido pelo 'validate' da LocalStrategy.\n    // O Passport cria a sess√£o automaticamente aqui.\n    return req.user;\n  }\n\n  /**\n   * Rota de Logout: POST /auth/logout\n   */\n  @UseGuards(SessionAuthGuard) // S√≥ pode deslogar se estiver logado\n  @Post('logout')\n  logout(@Request() req) {\n    req.session.destroy(); // Destr√≥i a sess√£o no servidor\n    return { msg: 'Usu√°rio deslogado' };\n  }\n\n  /**\n   * Rota de Status: GET /auth/status\n   * Verifica se o usu√°rio tem uma sess√£o ativa (cookie).\n   */\n  @UseGuards(SessionAuthGuard)\n  @Get('status')\n  status(@Request() req) {\n    // Se o 'SessionAuthGuard' passar, o 'req.user' foi\n    // preenchido pelo 'deserializeUser'.\n    return req.user;\n  }\n}","size_bytes":1413},"backend/src/aircraftTypes/aircraft-types.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { AircraftTypesService } from './aircraft-types.service';\nimport { AircraftTypesController } from './aircraft-types.controller';\nimport { AircraftTypes } from './aircraft-types.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([AircraftTypes])],\n  controllers: [AircraftTypesController],\n  providers: [AircraftTypesService],\n})\nexport class AircraftTypesModule {}","size_bytes":467},"backend/src/aircraftTypes/aircraft-types.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column } from 'typeorm';\n\n@Entity()\nexport class AircraftTypes {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  type: string;\n\n  @Column({ type: 'int' })\n  seats: number;\n\n  @Column()\n  description: string;\n\n  @Column({ type: 'text' }) // Usa tipo 'text' para armazenar o JSON do layout\n  layoutData: string;\n}","size_bytes":361},"frontend/src/pages/HomePage.tsx":{"content":"import { useAuth } from '../contexts/AuthContext'; \nimport React from 'react';\nimport Navbar from \"../components/layouts/navbar\"; \nimport PageContainer from \"../components/layouts/pageContainer\"; \n\nconst HomeScreen: React.FC = () => {\n    const { user } = useAuth(); \n\n    if (!user) {\n        return (\n             <div className=\"min-h-screen bg-gray-50\">\n                <Navbar />\n                <PageContainer>\n                    <div style={pageStyles.loading}>Carregando dados do usu√°rio...</div>\n                </PageContainer>\n            </div>\n        );\n    }\n\n    return(\n        <div className=\"min-h-screen bg-gray-50\">\n            <Navbar />\n            <PageContainer>\n                <h1 className=\"text-2xl font-bold text-blue-900 mb-6 border-b pb-2\">Bem-vindo, {user.name}!</h1>\n                <div className=\"space-y-4 p-4 bg-gray-50 rounded-lg\">\n                    <h2 className=\"text-xl font-semibold text-gray-800\">Detalhes do Usu√°rio:</h2>\n                    <p className=\"text-gray-600\"><strong>Nome:</strong> {user.name}</p>\n                    <p className=\"text-gray-600\"><strong>E-mail:</strong> {user.email}</p>\n                    <p className=\"text-gray-600\"><strong>ID:</strong> {user.id}</p>\n                    <p className=\"text-gray-600\"><strong>Tipo de Usu√°rio:</strong> {user.type === 'admin' ? 'Administrador' : 'Usu√°rio Padr√£o'}</p>\n                </div>\n            </PageContainer>\n        </div>\n    )\n};\nexport default HomeScreen;\n\nconst pageStyles: any = {\n    loading: {\n        textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n        color: '#555',\n    }\n};","size_bytes":1629},"frontend/src/components/airportModal.tsx":{"content":"import React, { useState, FormEvent, ChangeEvent, useEffect } from 'react';\nimport axios from 'axios';\nimport { API_BASE_URL, CreateAirportDto, Airport, UpdateAirportDto } from '../airports.constants';\n\ninterface AirportModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onAirportSaved: () => void;\n    // Se for nulo, √© um modal de adi√ß√£o (Create). Se for Airport, √© de edi√ß√£o (Update).\n    airportToEdit: Airport | null; \n}\n\nconst initialFormData: CreateAirportDto = {\n    name: '',\n    city: '',\n    country: '',\n    state: '',\n    IATA: '',\n};\n\nconst AirportModal: React.FC<AirportModalProps> = ({ isOpen, onClose, onAirportSaved, airportToEdit }) => {\n    // Inicializa o estado com o aeroporto a ser editado ou com um formul√°rio vazio\n    const [formData, setFormData] = useState<CreateAirportDto | UpdateAirportDto>(initialFormData);\n    const isEditMode = !!airportToEdit;\n\n    useEffect(() => {\n        if (airportToEdit) {\n            // Se estiver editando, preenche o formul√°rio com os dados do aeroporto\n            const { id, ...rest } = airportToEdit;\n            setFormData(rest);\n        } else {\n            // Se estiver adicionando, reseta o formul√°rio\n            setFormData(initialFormData);\n        }\n    }, [airportToEdit, isOpen]);\n\n    if (!isOpen) return null;\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name]: value }));\n    };\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        \n        try {\n            if (isEditMode && airportToEdit) {\n                // Requisi√ß√£o PATCH (Update)\n                await axios.patch(`${API_BASE_URL}/${airportToEdit.id}`, formData as UpdateAirportDto);\n                alert('Aeroporto atualizado com sucesso!');\n            } else {\n                // Requisi√ß√£o POST (Create)\n                await axios.post(API_BASE_URL, formData as CreateAirportDto);\n                alert('Aeroporto adicionado com sucesso!');\n            }\n            \n            onAirportSaved(); // Atualiza a lista\n            onClose(); // Fecha o modal\n        } catch (error) {\n            console.error(`Erro ao ${isEditMode ? 'atualizar' : 'adicionar'} aeroporto:`, error);\n            alert(`Erro ao ${isEditMode ? 'atualizar' : 'adicionar'} aeroporto. Verifique o console.`);\n        }\n    };\n\n    const title = isEditMode ? 'Update Airport' : 'Add new airport';\n    const buttonText = isEditMode ? 'Update airport' : 'Add new airport';\n    \n    // Lista de campos e suas respectivas chaves DTO\n    const fields: { label: string, key: keyof CreateAirportDto }[] = [\n        { label: 'Name', key: 'name' },\n        { label: 'City', key: 'city' },\n        { label: 'State', key: 'state' },\n        { label: 'Country', key: 'country' },\n        { label: 'IATA Code', key: 'IATA' },\n    ];\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>{title}</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    {fields.map(({ label, key }) => (\n                        <React.Fragment key={key}>\n                            <label style={modalStyles.label}>{label}</label>\n                            <input\n                                type=\"text\"\n                                name={key}\n                                // Usa o valor do estado local, ou o valor do objeto original (se estiver editando)\n                                value={formData[key] || ''} \n                                onChange={handleChange}\n                                style={modalStyles.input}\n                                required\n                            />\n                        </React.Fragment>\n                    ))}\n\n                    <div style={modalStyles.buttonGroup}>\n                        <button type=\"submit\" style={modalStyles.saveButton}>\n                            {buttonText}\n                        </button>\n                        <button type=\"button\" onClick={onClose} style={modalStyles.cancelButton}>\n                            Cancel\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AirportModal;\n\n// Estilos b√°sicos (adaptados)\nconst modalStyles: any = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '8px',\n        width: '400px', boxShadow: '0 4px 10px rgba(0, 0, 0, 0.1)',\n        textAlign: 'center'\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    label: {\n        fontSize: '14px', color: '#333', marginTop: '10px',\n    },\n    input: {\n        padding: '10px', margin: '5px 0 15px 0', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px',\n    },\n    buttonGroup: {\n        marginTop: '20px', display: 'flex', flexDirection: 'column', alignItems: 'center',\n    },\n    saveButton: {\n        backgroundColor: '#003366', color: 'white', padding: '12px 20px',\n        border: 'none', borderRadius: '5px', cursor: 'pointer',\n        fontSize: '16px', fontWeight: 'bold', boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n        marginBottom: '10px', width: '100%',\n    },\n    cancelButton: {\n        backgroundColor: 'transparent', color: '#CC0000', border: 'none',\n        cursor: 'pointer', fontSize: '14px', textDecoration: 'underline',\n    }\n};","size_bytes":5861},"frontend/src/components/forms/seatMapViewer.tsx":{"content":"import React from 'react';\n\n// --- Tipagem de Dados (Reaproveitada) ---\ntype CellType = 'seat' | 'aisle' | 'exit' | 'galley';\ntype SeatLayout = CellType[][]; \n\ninterface SeatMapViewerProps {\n  layoutData: string; // O JSON string do layout\n  typeName: string; // Nome da aeronave para t√≠tulo\n}\n\n// Mapeamento de tipos para classes Tailwind (Apenas cores est√°ticas, sem hover)\nconst cellClasses: Record<CellType, string> = {\n  'seat': 'bg-blue-200',\n  'aisle': 'bg-gray-100 border-dashed border-gray-300',\n  'exit': 'bg-yellow-400',\n  'galley': 'bg-red-200',\n};\n\nconst SeatMapViewer: React.FC<SeatMapViewerProps> = ({ layoutData, typeName }) => {\n  let layout: SeatLayout = [];\n  let rows = 0;\n  let cols = 0;\n\n  try {\n    layout = JSON.parse(layoutData);\n    rows = layout.length;\n    cols = layout[0]?.length || 0;\n  } catch (e) {\n    return <p className=\"text-red-500\">Error loading seat map data.</p>;\n  }\n\n  if (rows === 0 || cols === 0) {\n    return <p className=\"text-gray-500\">No seat map defined for this aircraft type.</p>;\n  }\n\n  return (\n    <div className=\"p-4 border border-gray-300 rounded-md bg-white\">\n      <h3 className=\"text-lg font-bold mb-4 text-center\">{typeName} Seat Map</h3>\n\n      <div className=\"overflow-auto max-h-[80vh]\">\n        <div \n          style={{ gridTemplateColumns: `repeat(${cols}, 40px)` }}\n          className=\"inline-grid gap-1 border p-2 bg-gray-50 shadow-inner\"\n        >\n          {layout.map((row, rowIndex) => (\n            <React.Fragment key={rowIndex}>\n              {row.map((cellType, colIndex) => (\n                <div\n                  key={colIndex}\n                  // Removido cursor-pointer e select-none, pois √© apenas visualiza√ß√£o\n                  className={`w-10 h-10 flex items-center justify-center text-xs border \n                              ${cellClasses[cellType]} \n                              ${cellType === 'aisle' ? 'border-dashed' : 'rounded-sm'}`}\n                  title={`Row ${rowIndex + 1}, Col ${colIndex + 1}: ${cellType}`}\n                >\n                  {cellType === 'seat' && `${String.fromCharCode(65 + colIndex)}${rowIndex + 1}`}\n                  {cellType === 'exit' && 'Exit'}\n                  {cellType === 'galley' && 'Galley'}\n                </div>\n              ))}\n            </React.Fragment>\n          ))}\n        </div>\n      </div>\n      \n      <p className=\"mt-4 text-sm text-gray-600 text-center\">Total seats: {layout.flat().filter(cell => cell === 'seat').length}</p>\n    </div>\n  );\n};\n\nexport default SeatMapViewer;","size_bytes":2537},"backend/src/employees/employees.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Patch, Delete } from '@nestjs/common'; // Adicionados Param, Patch, Delete\nimport { EmployeesService } from './employees.service';\nimport { CreateEmployeesDto } from './create-employees.dto'; \nimport { UpdateEmployeesDto } from './update-employees.dto'; // Importa o novo DTO\n\n@Controller('employees')\nexport class EmployeesController {\n  constructor(private EmployeesService: EmployeesService) {} // J√° existente\n\n  // Endpoint: Buscar todos os funcion√°rios (GET /employees)\n  @Get() \n  findAll() {\n    return this.EmployeesService.findAll(); // J√° existente\n  }\n\n  // Endpoint: Adicionar novo funcion√°rio (POST /employees)\n  @Post()\n  create(@Body() CreateEmployeesDto: CreateEmployeesDto) { \n    return this.EmployeesService.create(CreateEmployeesDto); // J√° existente\n  }\n  \n  // Novo Endpoint: Buscar funcion√°rio por ID (GET /employees/:id)\n  @Get(':id')\n  findOne(@Param('id') id: string) {\n    // O '+' converte a string do par√¢metro para n√∫mero\n    return this.EmployeesService.findOne(+id); \n  }\n\n  // Novo Endpoint: Modificar/Atualizar funcion√°rio (PATCH /employees/:id)\n  @Patch(':id')\n  update(@Param('id') id: string, @Body() updateEmployeesDto: UpdateEmployeesDto) {\n    // O m√©todo PATCH √© usado para atualiza√ß√µes parciais\n    return this.EmployeesService.update(+id, updateEmployeesDto);\n  }\n\n  // Novo Endpoint: Deletar funcion√°rio (DELETE /employees/:id)\n  @Delete(':id')\n  remove(@Param('id') id: string) {\n    return this.EmployeesService.remove(+id);\n  }\n}","size_bytes":1536},"frontend/src/constants.ts":{"content":"import { API_BASE_URL as BASE_URL } from './config';\n\nexport const API_BASE_URL = `${BASE_URL}/employees`;\n\nexport const CATEGORY_OPTIONS: string[] = [\n    'International Pilot (Commander)',\n    'International Pilot (Co-pilot)',\n    'Domestic Pilot (Commander)',\n    'Domestic Pilot (Co-pilot)',\n    'Flight Attendant',\n];\n\nexport interface Employee {\n    id: number;\n    name: string;\n    phoneNumber: string;\n    email: string;\n    birthday: string;\n    category: string;\n}\n\nexport type CreateEmployeeDto = Omit<Employee, 'id'>;\nexport type UpdateEmployeeDto = Partial<CreateEmployeeDto>;","size_bytes":590},"frontend/src/components/tables/tableRow.tsx":{"content":"import React from \"react\";\nimport { OutlineButton } from \"../buttons/outlineButton\";\n\ninterface TableRowProps {\n  type: string;\n  seats: number;\n  description: string;\n  onSeatMapClick?: () => void;\n}\n\nexport const TableRow: React.FC<TableRowProps> = ({\n  type,\n  seats,\n  description,\n  onSeatMapClick,\n}) => {\n  return (\n    <tr className=\"border-b hover:bg-gray-50 transition\">\n      <td className=\"px-4 py-2 font-medium text-gray-800\">{type}</td>\n      <td className=\"px-4 py-2\">{seats}</td>\n      <td className=\"px-4 py-2\">{description}</td>\n      <td className=\"px-4 py-2 text-right\">\n        <OutlineButton onClick={onSeatMapClick}>See seat map</OutlineButton>\n      </td>\n    </tr>\n  );\n};\n","size_bytes":698},"frontend/src/input.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n","size_bytes":59},"frontend/src/App.css":{"content":".App {\n  text-align: center;\n}\n\n.App-logo {\n  height: 40vmin;\n  pointer-events: none;\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .App-logo {\n    animation: App-logo-spin infinite 20s linear;\n  }\n}\n\n.App-header {\n  background-color: #282c34;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-size: calc(10px + 2vmin);\n  color: white;\n}\n\n.App-link {\n  color: #61dafb;\n}\n\n@keyframes App-logo-spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n","size_bytes":564},"frontend/src/pages/FlightsPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport axios, { AxiosResponse } from 'axios'; // NOVO: Importar AxiosResponse\nimport Navbar from '../components/layouts/navbar';\nimport PageContainer from '../components/layouts/pageContainer';\nimport SectionHeader from '../components/layouts/sectionHeader';\nimport DataCard from '../components/cards/DataCard';\nimport DangerButton from '../components/buttons/dangerButton';\nimport { AdminTabs } from '../components/layouts/adminTabs';\nimport FlightModal from '../components/flightModal'; \n// Importar todas as interfaces e APIs necess√°rias\nimport { API_BASE_URL as FLIGHTS_API, Flight, CreateFlightDto, UpdateFlightDto, Transfer } from '../flights.constants'; \nimport { API_BASE_URL as FLIGHT_TYPES_API, FlightType } from '../flight-types.constants';\nimport { API_BASE_URL as AIRCRAFT_TYPES_API, AircraftType } from '../aircraft-types.constants';\nimport { API_BASE_URL as AIRPORTS_API, Airport } from '../airports.constants';\nimport { API_BASE_URL } from '../config';\nimport { Employee } from '../constants'; // Assumindo a interface Employee\n\n// Interface auxiliar para formatar os dados para o DataCard\ninterface FlightDisplayData {\n    flightNumber: string;\n    flightType: string;\n    aircraftType: string;\n    departureDate: string;\n    departureTime: string;\n    arrivalDate: string;\n    arrivalTime: string;\n    estimatedDuration: string;\n    originAirport: string;\n    destinationAirport: string;\n    transferCount: number;\n    staffNames: string;\n}\n\nconst AdminFlightsPage: React.FC = () => {\n    const [flights, setFlights] = useState<Flight[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [flightToEdit, setFlightToEdit] = useState<Flight | null>(null);\n\n    // Estados para os dados de DDL (Chaves Estrangeiras)\n    const [allFlightTypes, setAllFlightTypes] = useState<FlightType[]>([]);\n    const [allAircraftTypes, setAllAircraftTypes] = useState<AircraftType[]>([]);\n    const [allAirports, setAllAirports] = useState<Airport[]>([]);\n    const [allEmployees, setAllEmployees] = useState<Employee[]>([]);\n\n\n    // --- Fun√ß√µes de API ---\n    const fetchAllData = async () => {\n        setIsLoading(true);\n        try {\n            // 1. DEFINI√á√ÉO DA TUPLA DE RESPOSTA (For√ßa a ordem correta para o compilador)\n            type FlightDataTuple = [\n                AxiosResponse<Flight[]>,\n                AxiosResponse<FlightType[]>,\n                AxiosResponse<AircraftType[]>,\n                AxiosResponse<Airport[]>,\n                AxiosResponse<Employee[]>,\n            ];\n\n            const responses = await Promise.all([\n            axios.get<Flight[]>(FLIGHTS_API),\n            axios.get<FlightType[]>(FLIGHT_TYPES_API),\n            axios.get<AircraftType[]>(AIRCRAFT_TYPES_API),\n            axios.get<Airport[]>(AIRPORTS_API),\n            axios.get<Employee[]>(`${API_BASE_URL}/employees`),\n            ]);\n\n            const [\n            flightsResponse,\n            flightTypesResponse,\n            aircraftTypesResponse,\n            airportsResponse,\n            employeesResponse,\n            ] = responses;\n            // As atribui√ß√µes de estado s√£o corretas:\n            setFlights(flightsResponse.data);\n            setAllFlightTypes(flightTypesResponse.data);\n            setAllAircraftTypes(aircraftTypesResponse.data);\n            setAllAirports(airportsResponse.data);\n            setAllEmployees(employeesResponse.data);\n\n        } catch (error) {\n            console.error('Error fetching flight data:', error);\n            alert('Error loading flight data. Check the console and ensure backend is running.');\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchAllData();\n    }, []);\n\n    // 2. Fun√ß√£o de Salvar/Atualizar\n    const handleSaveFlight = async (data: CreateFlightDto | UpdateFlightDto) => {\n        try {\n            if (flightToEdit) {\n                await axios.patch(`${FLIGHTS_API}/${flightToEdit.id}`, data as UpdateFlightDto);\n                alert(`Flight ${flightToEdit.flightNumber} updated successfully!`); \n            } else {\n                await axios.post(FLIGHTS_API, data as CreateFlightDto);\n                alert('Flight added successfully!');\n            }\n            \n            fetchAllData(); \n            setIsModalOpen(false);\n        } catch (error) {\n            console.error(`Error saving flight:`, error);\n            const errorMessage = axios.isAxiosError(error) && error.response?.data?.message\n                ? error.response.data.message\n                : `Error saving flight. Check the console.`;\n            alert(errorMessage);\n        }\n    };\n\n    // 3. Fun√ß√£o de Exclus√£o\n    const handleDeleteFlight = async (id: number, flightNumber: string) => {\n        if (!window.confirm(`Are you sure you want to delete flight number ${flightNumber}?`)) {\n            return;\n        }\n        try {\n            await axios.delete(`${FLIGHTS_API}/${id}`);\n            alert(`Flight ${flightNumber} deleted successfully.`);\n            fetchAllData();\n        } catch (error) {\n            console.error('Error deleting flight:', error);\n            alert('Error deleting flight. Check the console.');\n        }\n    };\n\n    // --- Fun√ß√µes de Modal ---\n    const handleAdd = () => {\n        setFlightToEdit(null);\n        setIsModalOpen(true);\n    };\n\n    const handleEdit = (flight: Flight) => {\n        setFlightToEdit(flight);\n        setIsModalOpen(true);\n    };\n\n    // --- Auxiliar de Formata√ß√£o para o Card ---\n    const formatFlightData = (flight: Flight): FlightDisplayData => {\n        const staffNames = flight.staff\n            .map(s => s.employee.name)\n            .join(' | ');\n        \n        const transfers: Transfer[] = flight.transfers ? JSON.parse(flight.transfers) : [];\n\n        return {\n            flightNumber: flight.flightNumber,\n            flightType: flight.flightType.name,\n            aircraftType: flight.aircraftType.type,\n            departureDate: flight.departureDate,\n            departureTime: flight.departureTime,\n            arrivalDate: flight.arrivalDate,\n            arrivalTime: flight.arrivalTime,\n            estimatedDuration: flight.estimatedDuration,\n            originAirport: `${flight.originAirport.name} (${flight.originAirport.IATA})`,\n            destinationAirport: `${flight.destinationAirport.name} (${flight.destinationAirport.IATA})`,\n            transferCount: transfers.length,\n            staffNames: staffNames || 'No staff assigned',\n        };\n    };\n\n    if (isLoading) {\n        return (\n            <div className=\"min-h-screen bg-gray-50\">\n                <Navbar />\n                <AdminTabs />\n                <div style={loadingStyles}>Loading flight data...</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gray-50\">\n            <Navbar />\n            <AdminTabs />\n            <PageContainer>\n                <SectionHeader \n                    title=\"Flights\" \n                    buttonText=\"Add new flight\" \n                    onButtonClick={handleAdd} \n                />\n                \n                {flights.length === 0 && <p className=\"text-gray-500\">No flights scheduled.</p>}\n\n                <div className=\"space-y-4\">\n                    {flights.map((flight) => {\n                        const data = formatFlightData(flight);\n                        return (\n                            <DataCard\n                                key={flight.id}\n                                actions={\n                                    <>\n                                        <button \n                                            onClick={() => handleEdit(flight)} \n                                            className=\"text-blue-800 hover:text-blue-900 p-1 rounded transition\"\n                                            title=\"Edit Flight\"\n                                        >\n                                            ‚úèÔ∏è\n                                        </button>\n                                        <DangerButton onClick={() => handleDeleteFlight(flight.id, flight.flightNumber)}>üóëÔ∏è</DangerButton>\n                                    </>\n                                }\n                            >\n                                <div className=\"grid grid-cols-2 gap-x-12 gap-y-2 text-sm\">\n                                    {/* COLUNA 1 */}\n                                    <div className=\"flex flex-col space-y-1\">\n                                        <p><strong>Flight number:</strong> {data.flightNumber}</p>\n                                        <p><strong>Aircraft type:</strong> {data.aircraftType}</p>\n                                        <p><strong>Departure date:</strong> {data.departureDate}</p>\n                                        <p><strong>Departure time:</strong> {data.departureTime}</p>\n                                        <p><strong>Transfer count:</strong> {data.transferCount}</p>\n                                        <p><strong>Arrival date:</strong> {data.arrivalDate}</p>\n                                        <p><strong>Arrival time:</strong> {data.arrivalTime}</p>\n                                        <p className=\"mt-2\"><strong>Staff:</strong> {data.staffNames}</p>\n                                    </div>\n                                    \n                                    {/* COLUNA 2 */}\n                                    <div className=\"flex flex-col space-y-1\">\n                                        <p><strong>Type:</strong> {data.flightType}</p>\n                                        <p><strong>Flight duration:</strong> {data.estimatedDuration}</p>\n                                        <p><strong>From:</strong> {data.originAirport}</p>\n                                        <p><strong>To:</strong> {data.destinationAirport}</p>\n                                    </div>\n                                </div>\n                            </DataCard>\n                        );\n                    })}\n                </div>\n            </PageContainer>\n\n            {/* Modal de Adi√ß√£o/Edi√ß√£o de Voos */}\n            <FlightModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                onFlightSaved={fetchAllData}\n                flightToEdit={flightToEdit}\n                allFlightTypes={allFlightTypes}\n                allAircraftTypes={allAircraftTypes}\n                allAirports={allAirports}\n                allEmployees={allEmployees}\n            />\n        </div>\n    );\n};\n\nexport default AdminFlightsPage;\n\nconst loadingStyles: React.CSSProperties = {\n    textAlign: 'center', paddingTop: '50px', fontSize: '18px',\n    color: '#555',\n};","size_bytes":10857},"backend/src/flights/flights.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Patch, Delete, ParseIntPipe } from '@nestjs/common'; \nimport { FlightsService } from './flights.service';\nimport { CreateFlightsDto } from './create-flights.dto'; \nimport { UpdateFlightsDto } from './update-flights.dto'; \n\n@Controller('flights')\nexport class FlightsController {\n  constructor(private flightsService: FlightsService) {} \n\n  @Get() \n  findAll() {\n    return this.flightsService.findAll(); \n  }\n\n  @Post()\n  create(@Body() createFlightsDto: CreateFlightsDto) { \n    return this.flightsService.create(createFlightsDto); \n  }\n  \n  @Get(':id')\n  findOne(@Param('id', ParseIntPipe) id: number) {\n    return this.flightsService.findOne(id); \n  }\n\n  @Patch(':id')\n  update(@Param('id', ParseIntPipe) id: number, @Body() updateFlightsDto: UpdateFlightsDto) {\n    return this.flightsService.update(id, updateFlightsDto);\n  }\n\n  @Delete(':id')\n  remove(@Param('id', ParseIntPipe) id: number) {\n    return this.flightsService.remove(id);\n  }\n}","size_bytes":992},"backend/src/userFlights/userFlights.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UserFlights } from './userFlights.entity';\nimport { UserFlightsService } from './userFlights.service';\nimport { UserFlightsController } from './userFlights.controller';\nimport { AuthModule } from 'src/auth/auth.module'; // Importante para o Guard\n\n@Module({\n  imports: [\n    // 1. Importa o TypeOrm para esta entidade espec√≠fica (UserFlights)\n    // Isso permite que o UserFlightsService use @InjectRepository(UserFlights).\n    TypeOrmModule.forFeature([UserFlights]),\n    \n    // 2. Importa o AuthModule\n    // O seu UserFlightsController usa o 'SessionAuthGuard'.\n    // Importar o AuthModule garante que o guardi√£o e todas as\n    // depend√™ncias de sess√£o/passport estejam dispon√≠veis para este m√≥dulo.\n    AuthModule, \n  ],\n  // 3. Registra o controller que voc√™ criou\n  controllers: [UserFlightsController],\n  \n  // 4. Registra o service que voc√™ criou\n  providers: [UserFlightsService],\n})\nexport class UserFlightsModule {}","size_bytes":1036},"backend/src/flights/create-flights.dto.ts":{"content":"import { IsString, IsNumber, IsNotEmpty, IsArray, ArrayMinSize } from 'class-validator';\n\nexport class CreateFlightsDto {\n  @IsString()\n  @IsNotEmpty()\n  flightNumber: string;\n\n  @IsNumber()\n  @IsNotEmpty()\n  flightTypeId: number;\n\n  @IsNumber()\n  @IsNotEmpty()\n  aircraftTypeId: number;\n\n  @IsNumber()\n  @IsNotEmpty()\n  originAirportId: number;\n\n  @IsNumber()\n  @IsNotEmpty()\n  destinationAirportId: number;\n\n  @IsString()\n  @IsNotEmpty()\n  departureDate: string;\n\n  @IsString()\n  @IsNotEmpty()\n  departureTime: string;\n\n  @IsString()\n  @IsNotEmpty()\n  arrivalDate: string;\n\n  @IsString()\n  @IsNotEmpty()\n  arrivalTime: string;\n\n  @IsString()\n  @IsNotEmpty()\n  estimatedDuration: string;\n  \n  @IsString() // Espera-se que seja um JSON string do frontend\n  @IsNotEmpty()\n  transfers: string; \n\n  @IsArray()\n  @IsNumber({}, { each: true })\n  staffIds: number[]; \n}","size_bytes":863},"frontend/src/App.tsx":{"content":"\nimport React from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport LoginScreen from './pages/LoginPage'; \nimport CreateAccountScreen from './pages/CreateAccountPage';\nimport AircraftsPage from './pages/AdminAircraftsPage'; \nimport EmployeesPage from './pages/EmployeesPage';\nimport HomeScreen from './pages/HomePage';\nimport AirportsPage from './pages/AirportsPage';\nimport AdminAircraftTypesPage from './pages/AircraftTypesPage';\nimport AdminFlightTypesPage from './pages/FlightTypesPage';\nimport AdminFlightsPage from './pages/FlightsPage';\nimport UserFlights from './pages/UserFlightsPage';\nimport AdminReportsPage from './pages/AdminReportsPage';\nimport FlightSearchPage from './pages/FlightSearchPage';\nimport FlightResultsPage from './pages/FlightResultsPage';\nimport FlightDetailsPage from './pages/FlightDetailsPage';\nimport PassengerInfoPage from './pages/PassengerInfoPage';\nimport CheckoutPage from './pages/CheckoutPage';\n\nfunction App() {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<LoginScreen />} /> \n      \n      <Route path=\"/register\" element={<CreateAccountScreen />} /> \n      \n      <Route path=\"/admin/aircrafts\" element={<AircraftsPage />} />\n\n      <Route path=\"/admin/employees\" element={<EmployeesPage />} />\n\n      <Route path=\"/admin/airports\" element={<AirportsPage />} />\n\n      <Route path=\"/admin/aircraftTypes\" element={<AdminAircraftTypesPage />} />\n\n      <Route path=\"/admin/flightTypesPage\" element={<AdminFlightTypesPage />} />\n\n      <Route path=\"/admin/flights\" element={<AdminFlightsPage />} />\n\n      <Route path=\"/admin/reports\" element={ <AdminReportsPage/> }/>\n      \n      <Route path=\"/home\" element={<HomeScreen/>} />\n\n      <Route path=\"/search-flights\" element={<FlightSearchPage/>} />\n\n      <Route path=\"/flight-results\" element={<FlightResultsPage/>} />\n\n      <Route path=\"/flight-details\" element={<FlightDetailsPage/>} />\n\n      <Route path=\"/passenger-info\" element={<PassengerInfoPage/>} />\n\n      <Route path=\"/checkout\" element={<CheckoutPage/>} />\n\n      <Route path=\"/my-flights\" element={<UserFlights/>}/>\n      \n      <Route path=\"*\" element={<h1>404 | P√°gina N√£o Encontrada</h1>} />\n    </Routes>\n  );\n}\n\nexport default App;\n\n\n","size_bytes":2224},"backend/src/aircrafts/aircrafts.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { AircraftsService } from './aircrafts.service';\nimport { AircraftsController } from './aircrafts.controller';\nimport { Aircrafts } from './aircrafts.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([Aircrafts])],\n  controllers: [AircraftsController],\n  providers: [AircraftsService],\n  exports: [TypeOrmModule]\n})\nexport class AircraftsModule {}","size_bytes":451},"backend/src/flightTypes/create-flight-types.dto.ts":{"content":"import { IsString, IsNotEmpty } from 'class-validator';\n\nexport class CreateFlightTypesDto {\n  @IsString()\n  @IsNotEmpty()\n  name: string;\n}","size_bytes":140},"backend/src/employees/update-employees.dto.ts":{"content":"export class UpdateEmployeesDto {\n    name?: string; \n    phoneNumber?: string;\n    email?: string;\n    birthday?: string;\n    category?: string;\n}","size_bytes":147},"frontend/src/components/buttons/dangerButton.tsx":{"content":"export default function DangerButton({ children, onClick }: { children: React.ReactNode; onClick?: () => void }) {\n  return (\n    <button\n      onClick={onClick}\n      className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md text-sm font-medium shadow-sm\"\n    >\n      {children}\n    </button>\n  );\n}\n","size_bytes":314},"frontend/src/components/flightModal.tsx":{"content":"import React, { useState, FormEvent, ChangeEvent, useEffect } from 'react';\nimport axios from 'axios';\nimport { Button } from './ui/button';\nimport { PrimaryButton } from './buttons/primaryButton';\nimport { FormRow } from './forms/formRow'; // Importar FormRow\nimport { FormSection } from './forms/formSection'; // Importar FormSection\n// As interfaces abaixo s√£o baseadas na estrutura definida em etapas anteriores (simula√ß√£o)\nimport { API_BASE_URL, Flight, CreateFlightDto, UpdateFlightDto, Transfer } from '../flights.constants'; \nimport { FlightType } from '../flight-types.constants';\nimport { AircraftType } from '../aircraft-types.constants';\nimport { Airport } from '../airports.constants';\nimport { Employee } from '../constants'; // Assumindo que a interface Employee est√° aqui\n\n// --- Tipagem de Props e Estado ---\n\n// Estrutura de dados para o estado do formul√°rio (inclui dados prontos para o POST)\ninterface FlightFormData extends Omit<CreateFlightDto, 'transfers'> {\n    transfers: Transfer[]; // Manter como array para manipula√ß√£o de estado\n}\n\ninterface FlightModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onFlightSaved: () => void;\n    flightToEdit: Flight | null;\n    // Dados para DDLs\n    allFlightTypes: FlightType[];\n    allAircraftTypes: AircraftType[];\n    allAirports: Airport[];\n    allEmployees: Employee[];\n}\n\nconst initialFormData: FlightFormData = {\n    flightNumber: '',\n    flightTypeId: 0,\n    aircraftTypeId: 0,\n    originAirportId: 0,\n    destinationAirportId: 0,\n    departureDate: '',\n    departureTime: '',\n    arrivalDate: '',\n    arrivalTime: '',\n    estimatedDuration: '',\n    transfers: [],\n    staffIds: [],\n};\n\n// --- Componente Principal ---\n\nconst FlightModal: React.FC<FlightModalProps> = ({ \n    isOpen, onClose, onFlightSaved, flightToEdit, \n    allFlightTypes, allAircraftTypes, allAirports, allEmployees \n}) => {\n    const isEditMode = !!flightToEdit;\n    const [formData, setFormData] = useState<FlightFormData>(initialFormData);\n    const [loading, setLoading] = useState(false);\n\n    // Efeito para carregar dados de edi√ß√£o\n    useEffect(() => {\n        if (flightToEdit) {\n            const transfersArray: Transfer[] = flightToEdit.transfers ? JSON.parse(flightToEdit.transfers) : [];\n            \n            // Mapeia o staff do backend (EmployeeFlight[]) para staffIds (number[])\n            // O backend deve retornar os IDs dos funcion√°rios para o DTO\n            const initialStaffIds = flightToEdit.staff.map(s => s.employee.id); \n\n            setFormData({\n                flightNumber: flightToEdit.flightNumber,\n                flightTypeId: flightToEdit.flightTypeId,\n                aircraftTypeId: flightToEdit.aircraftTypeId,\n                originAirportId: flightToEdit.originAirportId,\n                destinationAirportId: flightToEdit.destinationAirportId,\n                departureDate: flightToEdit.departureDate,\n                departureTime: flightToEdit.departureTime,\n                arrivalDate: flightToEdit.arrivalDate,\n                arrivalTime: flightToEdit.arrivalTime,\n                estimatedDuration: flightToEdit.estimatedDuration,\n                transfers: transfersArray,\n                staffIds: initialStaffIds,\n            });\n        } else {\n            // Inicializa IDs dos DDLs com o primeiro valor v√°lido\n            setFormData({\n                ...initialFormData,\n                flightTypeId: allFlightTypes[0]?.id || 0,\n                aircraftTypeId: allAircraftTypes[0]?.id || 0,\n                originAirportId: allAirports[0]?.id || 0,\n                destinationAirportId: allAirports[0]?.id || 0,\n            });\n        }\n    }, [flightToEdit, isOpen, allFlightTypes, allAircraftTypes, allAirports, allEmployees]);\n\n    if (!isOpen) return null;\n\n    // Lida com mudan√ßa de campos simples (Input/Select)\n    const handleChange = (e: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ \n            ...prev, \n            [name]: name.includes('Id') ? Number(value) : value \n        }));\n    };\n\n    // --- L√≥gica de Escalas (Transfers) ---\n\n    const handleAddTransfer = () => {\n        setFormData(prev => ({\n            ...prev,\n            transfers: [...prev.transfers, { airportId: allAirports[0]?.id || 0, departureTime: '', arrivalTime: '' }]\n        }));\n    };\n\n    const handleRemoveTransfer = (index: number) => {\n        setFormData(prev => ({\n            ...prev,\n            transfers: prev.transfers.filter((_, i) => i !== index),\n        }));\n    };\n\n    const handleTransferChange = (index: number, field: keyof Transfer, value: string | number) => {\n        const newTransfers = formData.transfers.map((t, i) => {\n            if (i === index) {\n                return { ...t, [field]: value };\n            }\n            return t;\n        });\n        setFormData(prev => ({ ...prev, transfers: newTransfers }));\n    };\n\n    // --- L√≥gica de Funcion√°rios (Staff) ---\n\n    const handleStaffChange = (e: ChangeEvent<HTMLSelectElement>) => {\n        const selectedIds = Array.from(e.target.selectedOptions, option => Number(option.value));\n        setFormData(prev => ({ ...prev, staffIds: selectedIds }));\n    };\n    \n    // --- Submiss√£o do Formul√°rio ---\n\n    const handleSubmit = async (e: FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        \n        // Converte o array de transfers para JSON string para o backend\n        const dataToSubmit: CreateFlightDto | UpdateFlightDto = {\n            ...formData,\n            transfers: JSON.stringify(formData.transfers),\n        };\n        \n        try {\n            if (isEditMode && flightToEdit) {\n                // PATCH (Update)\n                await axios.patch(`${API_BASE_URL}/${flightToEdit.id}`, dataToSubmit as UpdateFlightDto);\n                alert(`Flight ${flightToEdit.flightNumber} updated successfully!`); \n            } else {\n                // POST (Create)\n                await axios.post(API_BASE_URL, dataToSubmit as CreateFlightDto);\n                alert('Flight added successfully!');\n            }\n            \n            onFlightSaved(); \n            onClose();\n        } catch (error) {\n            console.error(`Error saving flight:`, error);\n            const errorMessage = axios.isAxiosError(error) && error.response?.data?.message\n                ? error.response.data.message\n                : `Error saving flight. Check the console.`;\n            alert(errorMessage);\n        } finally {\n            setLoading(false);\n        }\n    };\n    \n    const title = isEditMode ? 'Update Flight' : 'Add new flight';\n    const buttonText = isEditMode ? 'Save changes' : 'Add new flight';\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <h2 style={modalStyles.title}>{title}</h2>\n                <form onSubmit={handleSubmit} style={modalStyles.form}>\n                    \n                    {/* SE√á√ÉO 1: INFORMA√á√ïES B√ÅSICAS */}\n                    <FormSection title=\"Flight Details\">\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <FormRow label=\"Flight number\">\n                                <input \n                                    type=\"text\" \n                                    name=\"flightNumber\" \n                                    value={formData.flightNumber} \n                                    onChange={handleChange} \n                                    required \n                                    readOnly={isEditMode} // ID n√£o √© edit√°vel\n                                    style={modalStyles.input}\n                                />\n                            </FormRow>\n                            <FormRow label=\"Estimated duration (h:mm)\">\n                                <input \n                                    type=\"text\" \n                                    name=\"estimatedDuration\" \n                                    value={formData.estimatedDuration} \n                                    onChange={handleChange} \n                                    placeholder=\"Ex: 03:45\"\n                                    required \n                                    style={modalStyles.input}\n                                />\n                            </FormRow>\n                            \n                            <FormRow label=\"Flight Type\">\n                                <select name=\"flightTypeId\" value={formData.flightTypeId} onChange={handleChange} required style={modalStyles.input}>\n                                    {allFlightTypes.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\n                                </select>\n                            </FormRow>\n                            <FormRow label=\"Aircraft Type\">\n                                <select name=\"aircraftTypeId\" value={formData.aircraftTypeId} onChange={handleChange} required style={modalStyles.input}>\n                                    {allAircraftTypes.map(t => <option key={t.id} value={t.id}>{t.type}</option>)}\n                                </select>\n                            </FormRow>\n                        </div>\n                    </FormSection>\n\n                    {/* SE√á√ÉO 2: TEMPO E ROTA */}\n                    <FormSection title=\"Route and Schedule\">\n                        <div className=\"grid grid-cols-3 gap-4\">\n\n                            <FormRow label=\"Departure Date\">\n                              <input type=\"date\" name=\"departureDate\" value={formData.departureDate} onChange={handleChange} required style={modalStyles.input} />\n                           </FormRow>\n                           <FormRow label=\"Arrival Date\">\n                              <input type=\"date\" name=\"arrivalDate\" value={formData.arrivalDate} onChange={handleChange} required style={modalStyles.input} />\n                           </FormRow>\n                           <div></div>\n\n                            <FormRow label=\"Departure Time (Origin)\">\n                                <input type=\"time\" name=\"departureTime\" value={formData.departureTime} onChange={handleChange} required style={modalStyles.input} />\n                            </FormRow>\n                            <FormRow label=\"Arrival Time (Final Destination)\">\n                                <input type=\"time\" name=\"arrivalTime\" value={formData.arrivalTime} onChange={handleChange} required style={modalStyles.input} />\n                            </FormRow>\n                            <div></div> {/* Coluna vazia para alinhamento */}\n                            \n                            <FormRow label=\"Origin Airport (From)\">\n                                <select name=\"originAirportId\" value={formData.originAirportId} onChange={handleChange} required style={modalStyles.input}>\n                                    {allAirports.map(a => <option key={a.id} value={a.id}>{a.name} ({a.IATA})</option>)}\n                                </select>\n                            </FormRow>\n                            <FormRow label=\"Destination Airport (At)\">\n                                <select name=\"destinationAirportId\" value={formData.destinationAirportId} onChange={handleChange} required style={modalStyles.input}>\n                                    {allAirports.map(a => <option key={a.id} value={a.id}>{a.name} ({a.IATA})</option>)}\n                                </select>\n                            </FormRow>\n                        </div>\n                    </FormSection>\n\n                    {/* SE√á√ÉO 3: ESCALAS (TRANSFERS) */}\n                    <FormSection title=\"Transfers/Scales\">\n                         <div className=\"space-y-3\">\n                            {formData.transfers.map((transfer, index) => {\n                                const airport = allAirports.find(a => a.id === transfer.airportId);\n                                return (\n                                    <div key={index} className=\"flex items-center space-x-3 border-b pb-2\">\n                                        <div className=\"flex-1 grid grid-cols-3 gap-3\">\n                                            <FormRow label=\"Airport\">\n                                                <select \n                                                    value={transfer.airportId} \n                                                    onChange={(e) => handleTransferChange(index, 'airportId', Number(e.target.value))} \n                                                    required \n                                                    style={modalStyles.input}\n                                                >\n                                                    {allAirports.map(a => <option key={a.id} value={a.id}>{a.name}</option>)}\n                                                </select>\n                                            </FormRow>\n                                            <FormRow label=\"Arrival Time\">\n                                                <input \n                                                    type=\"time\" \n                                                    value={transfer.arrivalTime} \n                                                    onChange={(e) => handleTransferChange(index, 'arrivalTime', e.target.value)} \n                                                    required \n                                                    style={modalStyles.input}\n                                                />\n                                            </FormRow>\n                                            <FormRow label=\"Departure Time\">\n                                                <input \n                                                    type=\"time\" \n                                                    value={transfer.departureTime} \n                                                    onChange={(e) => handleTransferChange(index, 'departureTime', e.target.value)} \n                                                    required \n                                                    style={modalStyles.input}\n                                                />\n                                            </FormRow>\n                                        </div>\n                                        <Button \n                                            type=\"button\" \n                                            onClick={() => handleRemoveTransfer(index)} \n                                            variant=\"destructive\"\n                                            size=\"sm\"\n                                            className=\"self-end\"\n                                        >\n                                            Remove\n                                        </Button>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                        <Button type=\"button\" onClick={handleAddTransfer} className=\"mt-3 bg-gray-200 hover:bg-gray-300 text-gray-800\">\n                            + Add Scale\n                        </Button>\n                    </FormSection>\n\n\n                    {/* SE√á√ÉO 4: STAFF */}\n                    <FormSection title=\"Flight Staff\">\n                        <p className=\"text-sm text-gray-600 mb-2\">Select employees (Pilots, Co-pilots, Flight Attendants)</p>\n                        <select \n                            name=\"staffIds\" \n                            multiple \n                            value={formData.staffIds.map(String)} // Valor esperado √© string[] para o select\n                            onChange={handleStaffChange} \n                            required \n                            style={{...modalStyles.input, minHeight: '150px'}} // Aumentar altura para sele√ß√£o m√∫ltipla\n                        >\n                            {allEmployees.map(e => (\n                                <option key={e.id} value={e.id}>\n                                    {e.name} ({e.category})\n                                </option>\n                            ))}\n                        </select>\n                        <p className=\"text-xs text-gray-500 mt-1\">Use Ctrl/Cmd para selecionar m√∫ltiplos funcion√°rios.</p>\n                    </FormSection>\n\n                    {/* BOT√ïES DE A√á√ÉO */}\n                    <div style={modalStyles.buttonGroup} className=\"mt-8\">\n                        <PrimaryButton type=\"submit\" disabled={loading}>\n                            {loading ? 'Saving...' : buttonText}\n                        </PrimaryButton>\n                        <Button type=\"button\" onClick={onClose} variant=\"link\" className='text-red-500 hover:text-red-600'>\n                            Cancel\n                        </Button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default FlightModal;\n\n// --- Estilos ---\nconst modalStyles: { [key: string]: React.CSSProperties } = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.6)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '30px 40px', borderRadius: '10px',\n        width: '90%', maxWidth: '850px', boxShadow: '0 8px 15px rgba(0, 0, 0, 0.2)',\n        maxHeight: '90vh', overflowY: 'auto',\n    },\n    title: {\n        color: '#003366', fontSize: '24px', marginBottom: '20px', textAlign: 'center',\n    },\n    form: {\n        display: 'flex', flexDirection: 'column', textAlign: 'left',\n    },\n    input: {\n        width: '100%', padding: '10px', marginTop: '5px', border: '1px solid #ccc',\n        borderRadius: '4px', fontSize: '16px', boxSizing: 'border-box',\n    },\n    buttonGroup: {\n        display: 'flex', flexDirection: 'column', alignItems: 'center',\n        gap: '10px',\n    },\n    // Estilos para FormRow s√£o tratados pelo FormRow.tsx\n};","size_bytes":18088},"backend/src/userFlights/userFlights.service.ts":{"content":"import { Inject, Injectable } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { UserFlights } from './userFlights.entity';\nimport { UserFlightsResponseDto } from './userFlights-response.dto';\n\n@Injectable()\nexport class UserFlightsService {\n    constructor(\n        @InjectRepository(UserFlights)\n        private userFlightsRepository: Repository<UserFlights>,\n    ){}\n\n    async findFlightsForUserFrontend(userId: number): Promise<UserFlightsResponseDto[]> {\n    \n        // 1. Buscamos os dados com o QueryBuilder (agora incluindo o aircraftType)\n        const userFlights = await this.userFlightsRepository.createQueryBuilder('uf')\n            .leftJoinAndSelect('uf.flight', 'f')\n            .leftJoinAndSelect('f.originAirport', 'origin')\n            .leftJoinAndSelect('f.destinationAirport', 'dest')\n            .leftJoinAndSelect('f.aircraftType', 'aircraft') // <-- ADICIONADO\n            .leftJoinAndSelect('f.flightType', 'ft')\n            .where('uf.userId = :userId', { userId: userId })\n            .getMany();\n\n            console.log(\"REGISTROS ENCONTRADOS PELO GETMANY:\", userFlights);\n\n        // 2. Mapeamos para o DTO corrigido\n        const mappedFlights = userFlights.map(uf => {\n\n            // Prote√ß√£o para caso o voo ou rela√ß√µes sejam nulos\n            if (!uf.flight || !uf.flight.originAirport || !uf.flight.destinationAirport || !uf.flight.aircraftType) {\n                return null; \n            }\n\n            return {\n                userFlightId: uf.id,\n                seat: uf.seatNumber,\n                            status: uf.status,\n                            flightNumber: uf.flight.flightNumber,\n                            duration: uf.flight.estimatedDuration,\n                            departureDate: uf.flight.departureDate,\n                            departureTime: uf.flight.departureTime,\n                            arrivalDate: uf.flight.arrivalDate,\n                            arrivalTime: uf.flight.arrivalTime,\n                            aircraftType: uf.flight.aircraftType.type,\n                            flightType: uf.flight.flightType.name,\n                            originCity: uf.flight.originAirport.city,\n                            originCountry: uf.flight.originAirport.country,\n                            originIATA: uf.flight.originAirport.IATA,\n                            destinationCity: uf.flight.destinationAirport.city,\n                            destinationCountry: uf.flight.destinationAirport.country,\n                            destinationIATA: uf.flight.destinationAirport.IATA,\n            };\n        });\n\n        return mappedFlights.filter(flight => flight !== null);\n    }\n}","size_bytes":2744},"frontend/src/components/cards/DataCard.tsx":{"content":"interface DataCardProps {\n  children: React.ReactNode;\n  actions?: React.ReactNode;\n}\n\nexport default function DataCard({ children, actions }: DataCardProps) {\n  return (\n    <div className=\"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm mb-3\">\n      <div className=\"flex-1\">{children}</div>\n      {actions && <div className=\"flex space-x-3\">{actions}</div>}\n    </div>\n  );\n}\n","size_bytes":398},"backend/src/userFlights/userFlights.controller.ts":{"content":"import { Controller, Get, Request, UseGuards, Param } from '@nestjs/common';\nimport { UserFlightsService } from './userFlights.service';\nimport { UserFlightsResponseDto } from './userFlights-response.dto'; \nimport { SessionAuthGuard } from 'src/auth/session-auth.guard';\n\n@Controller('userFlights')\nexport class UserFlightsController {\n  constructor(private userFlightsService: UserFlightsService) {}\n\n  @UseGuards(SessionAuthGuard)\n  @Get()\n  async findMyFlights(@Request() req): Promise<UserFlightsResponseDto[]> {\n    const userId: number = req.user.id;\n\n    console.log(\"BUSCANDO VOOS PARA O UserId:\", userId);\n\n    return this.userFlightsService.findFlightsForUserFrontend(userId);\n  }\n}","size_bytes":692},"backend/src/flights/flights.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column, ManyToOne, JoinColumn, OneToMany } from 'typeorm';\nimport { FlightTypes } from '../flightTypes/flight-types.entity'; // Chave Estrangeira\nimport { AircraftTypes } from '../aircraftTypes/aircraft-types.entity'; // Chave Estrangeira\nimport { Airports } from '../airports/airports.entity'; // Chave Estrangeira\nimport { EmployeeFlight } from './employee-flight.entity'; // Rela√ß√£o N:M\n\n@Entity()\nexport class Flights {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column({ unique: true })\n  flightNumber: string;\n\n  // --- Rela√ß√µes N:1 (Chaves Estrangeiras) ---\n\n  @Column()\n  flightTypeId: number;\n  @ManyToOne(() => FlightTypes)\n  @JoinColumn({ name: 'flightTypeId' })\n  flightType: FlightTypes;\n\n  @Column()\n  aircraftTypeId: number;\n  @ManyToOne(() => AircraftTypes)\n  @JoinColumn({ name: 'aircraftTypeId' })\n  aircraftType: AircraftTypes;\n\n  @Column()\n  originAirportId: number;\n  @ManyToOne(() => Airports)\n  @JoinColumn({ name: 'originAirportId' })\n  originAirport: Airports;\n\n  @Column()\n  destinationAirportId: number;\n  @ManyToOne(() => Airports)\n  @JoinColumn({ name: 'destinationAirportId' })\n  destinationAirport: Airports;\n\n  // --- Campos de Tempo e Rota ---\n  @Column()\n  departureDate: string;\n\n  @Column()\n  departureTime: string;\n\n  @Column()\n  arrivalDate: string;\n\n  @Column()\n  arrivalTime: string;\n  \n  @Column()\n  estimatedDuration: string;\n\n  @Column({ type: 'text' }) // Armazena o JSON das escalas\n  transfers: string; \n\n  // --- Rela√ß√£o N:M (Muitos para Muitos) com Funcion√°rios ---\n  @OneToMany(() => EmployeeFlight, employeeFlight => employeeFlight.flight, { cascade: true })\n  staff: EmployeeFlight[];\n}","size_bytes":1688},"backend/src/flights/flights.service.ts":{"content":"import { Injectable, NotFoundException, BadRequestException } from '@nestjs/common'; \nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository, In } from 'typeorm';\nimport { Flights } from './flights.entity';\nimport { EmployeeFlight } from './employee-flight.entity';\nimport { Employees } from '../employees/employees.entity'; // Assume que esta entidade existe\nimport { CreateFlightsDto } from './create-flights.dto';\nimport { UpdateFlightsDto } from './update-flights.dto';\n\n@Injectable()\nexport class FlightsService {\n  constructor(\n    @InjectRepository(Flights)\n    private flightsRepository: Repository<Flights>,\n    @InjectRepository(EmployeeFlight)\n    private employeeFlightRepository: Repository<EmployeeFlight>,\n    @InjectRepository(Employees)\n    private employeesRepository: Repository<Employees>, // Para validar funcion√°rios\n  ) {}\n\n  // Fun√ß√£o auxiliar para buscar todas as rela√ß√µes\n  private getFlightRelations() {\n    return ['flightType', 'aircraftType', 'originAirport', 'destinationAirport', 'staff', 'staff.employee'];\n  }\n\n  findAll() {\n    // Retorna todos os voos com todas as rela√ß√µes (JOINs)\n    return this.flightsRepository.find({ relations: this.getFlightRelations() }); \n  }\n  \n  async findOne(id: number): Promise<Flights> {\n    const flight = await this.flightsRepository.findOne({ where: { id }, relations: this.getFlightRelations() });\n    if (!flight) {\n      throw new NotFoundException(`Flight with ID ${id} not found.`);\n    }\n    return flight;\n  }\n  \n  // Fun√ß√£o auxiliar para salvar o staff (rela√ß√£o N:M)\n  private async saveStaff(flightId: number, staffIds: number[]) {\n    // 1. Deleta rela√ß√µes antigas\n    await this.employeeFlightRepository.delete({ flightId });\n\n    if (staffIds.length === 0) return;\n    \n    // 2. Valida se os funcion√°rios existem\n    const existingEmployees = await this.employeesRepository.find({\n        where: { id: In(staffIds) },\n        select: ['id']\n    });\n\n    if (existingEmployees.length !== staffIds.length) {\n        throw new BadRequestException('One or more employee IDs are invalid.');\n    }\n    \n    // 3. Cria novas rela√ß√µes\n    const newRelations = staffIds.map(employeeId => \n      this.employeeFlightRepository.create({ flightId, employeeId })\n    );\n\n    return this.employeeFlightRepository.save(newRelations);\n  }\n\n  async create(createFlightsDto: CreateFlightsDto) {\n    const { staffIds, ...flightData } = createFlightsDto;\n    \n    const flight = this.flightsRepository.create(flightData); \n    const savedFlight = await this.flightsRepository.save(flight); \n\n    await this.saveStaff(savedFlight.id, staffIds);\n    \n    return this.findOne(savedFlight.id); // Retorna o voo completo com rela√ß√µes\n  }\n  \n  async update(id: number, updateFlightsDto: UpdateFlightsDto) {\n    const { staffIds, ...flightData } = updateFlightsDto;\n    \n    // 1. Atualiza os dados principais do voo\n    const result = await this.flightsRepository.update(id, flightData);\n    if (result.affected === 0) {\n        throw new NotFoundException(`Flight with ID ${id} not found.`);\n    }\n\n    // 2. Atualiza os dados do staff, se staffIds foi fornecido\n    if (staffIds !== undefined) {\n        await this.saveStaff(id, staffIds);\n    }\n    \n    return this.findOne(id);\n  }\n\n  async remove(id: number): Promise<void> {\n    const result = await this.flightsRepository.delete(id);\n    \n    if (result.affected === 0) {\n      throw new NotFoundException(`Flight with ID ${id} not found.`);\n    }\n  }\n}","size_bytes":3502},"frontend/src/components/layouts/sectionHeader.tsx":{"content":"interface SectionHeaderProps {\n  title: string;\n  buttonText?: string;\n  onButtonClick?: () => void;\n}\n\nexport default function SectionHeader({ title, buttonText, onButtonClick }: SectionHeaderProps) {\n  return (\n    <div className=\"flex justify-between items-center mb-6\">\n      <h1 className=\"text-2xl font-semibold text-blue-900\">{title}</h1>\n      {buttonText && (\n        <button\n          onClick={onButtonClick}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md shadow-sm\"\n        >\n          {buttonText}\n        </button>\n      )}\n    </div>\n  );\n}\n","size_bytes":591},"start.sh":{"content":"#!/bin/bash\n\n# Detect environment and set ports accordingly\nif [ -n \"$REPL_ID\" ]; then\n  # Running in Replit: backend on 3001, frontend on 5000\n  export BACKEND_PORT=3001\n  export PORT=5000\n  echo \"Replit environment detected - Backend: 3001, Frontend: 5000\"\nelse\n  # Running locally (VS Code): backend on 5000, frontend on 3000\n  export BACKEND_PORT=5000\n  # PORT defaults to 3000 for React (no need to set)\n  echo \"Local environment detected - Backend: 5000, Frontend: 3000 (default)\"\nfi\n\n# Start backend in the background\ncd backend\nnpm run start:dev &\nBACKEND_PID=$!\n\n# Wait a moment for backend to initialize\nsleep 3\n\n# Start frontend\ncd ../frontend\nnpm start\n\n# When frontend stops, also stop backend\nkill $BACKEND_PID\n","size_bytes":725},"backend/src/aircrafts/aircrafts.service.ts":{"content":"import { Injectable, NotFoundException } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { Aircrafts } from './aircrafts.entity';\nimport { CreateAircraftsDto } from './create-aircrafts.dto';\nimport { UpdateAircraftsDto } from './update-aircrafts.dto';\n\n@Injectable()\nexport class AircraftsService {\n  constructor(\n    @InjectRepository(Aircrafts)\n    private aircraftsRepository: Repository<Aircrafts>,\n  ) {}\n\n  // Busca todas as aeronaves e inclui o tipo de aeronave (JOIN)\n  findAll() {\n    return this.aircraftsRepository.find({ relations: ['aircraftType'] });\n  }\n\n  // Cria uma nova aeronave. O ID √© fornecido no DTO.\n  create(createAircraftsDto: CreateAircraftsDto) {\n    const aircraft = this.aircraftsRepository.create(createAircraftsDto);\n    return this.aircraftsRepository.save(aircraft);\n  }\n\n  async findOne(id: string): Promise<Aircrafts> {\n    const aircraft = await this.aircraftsRepository.findOne({ where: { id }, relations: ['aircraftType'] });\n    if (!aircraft) {\n      throw new NotFoundException(`Aircraft with ID ${id} not found.`);\n    }\n    return aircraft;\n  }\n\n  async update(id: string, updateAircraftsDto: UpdateAircraftsDto) {\n    // Usamos update para garantir que apenas o campo modificado seja atualizado\n    const result = await this.aircraftsRepository.update(id, updateAircraftsDto);\n\n    if (result.affected === 0) {\n        throw new NotFoundException(`Aircraft with ID ${id} not found.`);\n    }\n    // Retorna a entidade completa atualizada\n    return this.aircraftsRepository.findOne({ where: { id }, relations: ['aircraftType'] });\n  }\n\n  async remove(id: string): Promise<void> {\n    const result = await this.aircraftsRepository.delete(id);\n\n    if (result.affected === 0) {\n      throw new NotFoundException(`Aircraft with ID ${id} not found.`);\n    }\n  }\n}","size_bytes":1876},"backend/src/airports/update-airports.dto.ts":{"content":"export class UpdateAirportsDto {\n    name?: string; \n    city?: string;\n    country?: string;\n    state?: string;\n    IATA?: string;\n  }","size_bytes":136},"frontend/src/components/seatMapViewerModal.tsx":{"content":"import React from 'react';\nimport SeatMapViewer from './forms/seatMapViewer';\nimport { Button } from './ui/button';\n\ninterface SeatMapViewerModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    // Dados do tipo de aeronave para visualiza√ß√£o\n    aircraftTypeData: { \n        type: string; \n        layoutData: string;\n    } | null;\n}\n\nconst SeatMapViewerModal: React.FC<SeatMapViewerModalProps> = ({ isOpen, onClose, aircraftTypeData }) => {\n    if (!isOpen || !aircraftTypeData) return null;\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                \n                <SeatMapViewer \n                    layoutData={aircraftTypeData.layoutData} \n                    typeName={aircraftTypeData.type}\n                />\n                \n                <div className=\"mt-6 flex justify-center\">\n                    <Button onClick={onClose} type=\"button\">\n                        Close\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default SeatMapViewerModal;\n\n// Estilos b√°sicos (Reaproveitados de AircraftTypeModal)\nconst modalStyles: { [key: string]: React.CSSProperties } = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.7)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '20px', borderRadius: '10px',\n        width: '90%', maxWidth: '750px', boxShadow: '0 8px 15px rgba(0, 0, 0, 0.2)',\n        maxHeight: '90vh', overflowY: 'auto',\n    },\n};","size_bytes":1662},"backend/src/auth/local.strategy.ts":{"content":"// src/auth/local.strategy.ts\nimport { Strategy } from 'passport-local';\nimport { PassportStrategy } from '@nestjs/passport';\nimport { Injectable, UnauthorizedException } from '@nestjs/common';\nimport { AuthService } from './auth.service';\n\n@Injectable()\nexport class LocalStrategy extends PassportStrategy(Strategy) {\n  constructor(private authService: AuthService) {\n    // Diz ao Passport para usar o campo 'email' como 'username'\n    super({ usernameField: 'email' });\n  }\n\n  /**\n   * Esta fun√ß√£o √© chamada automaticamente pelo Passport\n   * quando @UseGuards(LocalAuthGuard) √© usado.\n   */\n  async validate(email: string, password: string): Promise<any> {\n    const user = await this.authService.validateUser(email, password);\n\n    if (!user) {\n      // Se o servi√ßo retornar null/false, o guardi√£o joga o 401\n      throw new UnauthorizedException('Invalid credentials');\n    }\n\n    console.log('USUARIO VALIDADO NO LOCALSTRATEGY')\n    return user;\n  }\n}","size_bytes":965},"frontend/tailwind.config.js":{"content":"/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    \"./src/**/*.{js,jsx,ts,tsx,html}\", \n  ],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n","size_bytes":170},"backend/src/aircrafts/aircrafts.entity.ts":{"content":"import { Entity, PrimaryColumn, Column, ManyToOne, JoinColumn } from 'typeorm';\nimport { AircraftTypes } from '../aircraftTypes/aircraft-types.entity'; // Importa o tipo de aeronave\n\n@Entity()\nexport class Aircrafts {\n  // O ID √© fornecido pelo administrador (ex: A001, B002), n√£o auto-gerado\n  @PrimaryColumn()\n  id: string;\n\n  // Chave Estrangeira e Rela√ß√£o com AircraftTypes\n  @Column()\n  aircraftTypeId: number;\n\n  @ManyToOne(() => AircraftTypes)\n  @JoinColumn({ name: 'aircraftTypeId' })\n  aircraftType: AircraftTypes;\n}","size_bytes":529},"backend/src/users/user.service.ts":{"content":"import { Injectable, NotFoundException } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { User } from './user.entity';\nimport { CreateUserDto } from './create-user.dto';\nimport bcrypt = require('bcrypt');\n\n@Injectable()\nexport class UsersService {\n  constructor(\n    @InjectRepository(User)\n    private usersRepository: Repository<User>,\n  ) {}\n\n  findAll() {\n    return this.usersRepository.find();\n  }\n\n  async create(createUserDto: CreateUserDto) {\n    const saltRounds = 10;\n    const hashedPassword = await bcrypt.hash(createUserDto.password, saltRounds)\n\n    const userToSave = {\n      ...createUserDto,\n      password: hashedPassword,\n    };\n\n    const user = this.usersRepository.create(userToSave); \n    return this.usersRepository.save(user);\n  }\n\n  async findOneByEmail(email: string): Promise<User | null> {\n      // 2. Usa o m√©todo 'findOneBy' do TypeORM\n      // √â ass√≠ncrono, ent√£o usamos 'await'\n      const user = await this.usersRepository.findOneBy({\n        email: email, // Busca onde a coluna 'email' bate com o argumento 'email'\n      });\n\n      return user;\n  }\n\n  async findOneById(id: number): Promise<User> {\n    const user = await this.usersRepository.findOneBy({ id: id });\n\n    if (!user) {\n      throw new NotFoundException(`Usu√°rio com ID ${id} n√£o encontrado`);\n    }\n\n    return user;\n  }\n\n}\n","size_bytes":1405},"frontend/src/airports.constants.ts":{"content":"import { API_BASE_URL as BASE_URL } from './config';\n\nexport const API_BASE_URL = `${BASE_URL}/airports`;\n\n// Interface da Entidade Completa (baseada em airports.entity.ts)\nexport interface Airport {\n    id: number;\n    name: string;\n    city: string;\n    country: string;\n    state: string;\n    IATA: string;\n}\n\n// Tipo para Cria√ß√£o (DTO - Omitindo 'id')\n// Baseado em airports/create-airports.dto.ts\nexport type CreateAirportDto = Omit<Airport, 'id'>;\n\n// Tipo para Atualiza√ß√£o (DTO - Tornando todos os campos opcionais)\n// Baseado em airports/update-airports.dto.ts\nexport type UpdateAirportDto = Partial<CreateAirportDto>;","size_bytes":630},"frontend/src/components/cards/EditableCard.tsx":{"content":"import React from \"react\";\nimport { OutlineButton } from \"../buttons/outlineButton\";\nimport DangerButton from \"../buttons/dangerButton\"; // NOVO: Importar DangerButton\n\ninterface EditableCardProps {\n  type: string;\n  seats: number;\n  description: string;\n  onViewSeatMap?: () => void;\n  // NOVOS: Fun√ß√µes para edi√ß√£o e exclus√£o\n  onEdit: () => void;\n  onDelete: () => void;\n}\n\nexport const EditableCard: React.FC<EditableCardProps> = ({\n  type,\n  seats,\n  description,\n  onViewSeatMap,\n  onEdit, // NOVO\n  onDelete, // NOVO\n}) => {\n  return (\n    <div className=\"flex justify-between items-center bg-white shadow-sm rounded-xl px-4 py-3 mb-3\">\n      {/* Dados do Tipo de Aeronave */}\n      <div className=\"flex-1 min-w-0 pr-4\">\n        <div className=\"flex space-x-6 text-sm text-gray-700\">\n            <p className=\"w-40 font-semibold text-gray-800\">{type}</p>\n            <p className=\"w-16\">{seats} seats</p>\n            <p className=\"flex-1\">{description}</p>\n        </div>\n      </div>\n\n      {/* Bot√µes de A√ß√£o */}\n      <div className=\"flex space-x-3 items-center\">\n        {onViewSeatMap && <OutlineButton onClick={onViewSeatMap}>See seat map</OutlineButton>}\n        \n        {/* NOVO: Bot√£o de Edi√ß√£o (‚úèÔ∏è) */}\n        <button \n            onClick={onEdit} \n            className=\"text-blue-600 hover:text-blue-800 p-1 rounded transition\" \n            title=\"Edit Type\"\n        >\n            ‚úèÔ∏è\n        </button>\n        \n        {/* NOVO: Bot√£o de Exclus√£o (üóëÔ∏è) */}\n        <DangerButton onClick={onDelete}>üóëÔ∏è</DangerButton>\n      </div>\n    </div>\n  );\n};\n","size_bytes":1599},"backend/src/aircraftTypes/aircraft-types.service.ts":{"content":"import { Injectable, NotFoundException } from '@nestjs/common'; \nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { AircraftTypes } from './aircraft-types.entity';\nimport { CreateAircraftTypesDto } from './create-aircraft-types.dto';\nimport { UpdateAircraftTypesDto } from './update-aircraft-types.dto'; \n\n@Injectable()\nexport class AircraftTypesService {\n  constructor(\n    @InjectRepository(AircraftTypes)\n    private aircraftTypesRepository: Repository<AircraftTypes>,\n  ) {}\n\n  findAll() {\n    return this.aircraftTypesRepository.find(); \n  }\n\n  create(createAircraftTypesDto: CreateAircraftTypesDto) {\n    const aircraftType = this.aircraftTypesRepository.create(createAircraftTypesDto); \n    return this.aircraftTypesRepository.save(aircraftType); \n  }\n  \n  async findOne(id: number): Promise<AircraftTypes> {\n    const aircraftType = await this.aircraftTypesRepository.findOne({ where: { id } });\n    if (!aircraftType) {\n      throw new NotFoundException(`Aircraft Type with ID ${id} not found.`);\n    }\n    return aircraftType;\n  }\n  \n  async update(id: number, updateAircraftTypesDto: UpdateAircraftTypesDto) {\n    const result = await this.aircraftTypesRepository.update(id, updateAircraftTypesDto);\n    \n    if (result.affected === 0) {\n        throw new NotFoundException(`Aircraft Type with ID ${id} not found.`);\n    }\n    return this.aircraftTypesRepository.findOne({ where: { id } });\n  }\n\n  async remove(id: number): Promise<void> {\n    const result = await this.aircraftTypesRepository.delete(id);\n    \n    if (result.affected === 0) {\n      throw new NotFoundException(`Aircraft Type with ID ${id} not found.`);\n    }\n  }\n}","size_bytes":1691},"backend/src/app.controller.spec.ts":{"content":"import { Test, TestingModule } from '@nestjs/testing';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\n\ndescribe('AppController', () => {\n  let appController: AppController;\n\n  beforeEach(async () => {\n    const app: TestingModule = await Test.createTestingModule({\n      controllers: [AppController],\n      providers: [AppService],\n    }).compile();\n\n    appController = app.get<AppController>(AppController);\n  });\n\n  describe('root', () => {\n    it('should return \"Hello World!\"', () => {\n      expect(appController.getHello()).toBe('Hello World!');\n    });\n  });\n});\n","size_bytes":617},"backend/src/aircraftTypes/aircraft-types.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Patch, Delete } from '@nestjs/common'; \nimport { AircraftTypesService } from './aircraft-types.service';\nimport { CreateAircraftTypesDto } from './create-aircraft-types.dto'; \nimport { UpdateAircraftTypesDto } from './update-aircraft-types.dto'; \n\n@Controller('aircraft-types')\nexport class AircraftTypesController {\n  constructor(private aircraftTypesService: AircraftTypesService) {} \n\n  @Get() \n  findAll() {\n    return this.aircraftTypesService.findAll(); \n  }\n\n  @Post()\n  create(@Body() createAircraftTypesDto: CreateAircraftTypesDto) { \n    return this.aircraftTypesService.create(createAircraftTypesDto); \n  }\n  \n  @Get(':id')\n  findOne(@Param('id') id: string) {\n    return this.aircraftTypesService.findOne(+id); \n  }\n\n  @Patch(':id')\n  update(@Param('id') id: string, @Body() updateAircraftTypesDto: UpdateAircraftTypesDto) {\n    return this.aircraftTypesService.update(+id, updateAircraftTypesDto);\n  }\n\n  @Delete(':id')\n  remove(@Param('id') id: string) {\n    return this.aircraftTypesService.remove(+id);\n  }\n}","size_bytes":1069},"backend/src/auth/session.serializer.ts":{"content":"// src/auth/session.serializer.ts\nimport { Injectable} from '@nestjs/common';\nimport { PassportSerializer } from '@nestjs/passport';\nimport { UsersService } from 'src/users/user.service';\nimport { User } from 'src/users/user.entity';\n\n@Injectable()\nexport class SessionSerializer extends PassportSerializer {\n  constructor(private readonly usersService: UsersService) {\n    super();\n  }\n\n  /**\n   * Salva o ID do usu√°rio na sess√£o (cookie)\n   */\n  serializeUser(user: User, done: (err: Error | null, userId: number) => void) {\n    done(null, user.id);\n  }\n\n  /**\n   * Usa o ID da sess√£o para buscar o usu√°rio no banco\n   * e anex√°-lo ao 'req.user' em CADA requisi√ß√£o autenticada.\n   */\n  async deserializeUser(userId: number, done: (err: Error | null, user: User) => void) {\n    // Busca o usu√°rio no banco com o ID salvo\n    const user = await this.usersService.findOneById(userId); \n    // (Assumindo que voc√™ tem 'findOneById' no seu UsersService)\n    \n    done(null, user);\n  }\n}","size_bytes":992},"frontend/src/pages/LoginPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { API_BASE_URL } from '../config';\n\nconst API_URL = `${API_BASE_URL}/auth/login`;\n\ninterface LoginFormData {\n    email: string;\n    password: string;\n}\n\ninterface UserDto {\n    id: number;\n    name: string;\n    email: string;\n    password: string; \n    role: 'admin' | 'user';\n}\n\n\ninterface InputFieldProps {\n label: string;\n name: keyof LoginFormData; \n type?: string;\n value: string;\n onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nconst InputField: React.FC<InputFieldProps> = \n ({ label, name, type = 'text', value, onChange }) => ( \n <div style={styles.inputGroup}>\n <label htmlFor={name} style={styles.label}>{label}</label>\n <input\n id={name} \n type={type}\n name={name}\n value={value}\n onChange={onChange}\n style={styles.input}\n required\n />\n </div>\n);\n\n\n\nconst LoginScreen: React.FC = () => {\n    const [formData, setFormData] = useState<LoginFormData>({ email: '', password: '' });\n    const [loading, setLoading] = useState(false);\n    const [message, setMessage] = useState('');\n    const { login, isAuthenticated, user } = useAuth();\n    const navigate = useNavigate();\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        setFormData(prev => ({ ...prev, [name as keyof LoginFormData]: value }));\n    };\n\n    useEffect(() => {\n        if (user) {\n            if (user.type === 'admin') {\n                navigate('/admin/employees', { replace: true });\n            } else {\n                navigate('/search-flights', { replace: true }); \n            }\n        }\n    }, [user, navigate]);\n    \n    const handleLogin = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setMessage('');\n\n        /*const { email, password } = formData;\n\n        try {\n            const response = await fetch(API_URL);\n\n            if (!response.ok) {\n                setMessage('Error in communication with the server. Status:' + response.status);\n                setLoading(false);\n                return;\n            }\n\n            const users: UserDto[] = await response.json();\n\n            const foundUser = users.find(user => \n                user.email === email && user.password === password\n            );\n\n            if (foundUser) {\n                setMessage('Login successful!');\n                \n                login({ \n                    id: foundUser.id, \n                    name: foundUser.name, \n                    email: foundUser.email,\n                    type: foundUser.role\n                });\n            } else {\n                setMessage('Login failure: Incorrect user or password.');\n            }\n\n        } catch (error) {\n            console.error('Network or processing error:', error);\n            setMessage('Connection or data processing error.');\n        } finally {\n            setLoading(false);\n        }*/\n\n        try {\n            const loginData = {\n                email: formData.email,\n                password: formData.password\n            };\n\n            const response = await fetch(API_URL, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(loginData),\n                credentials: 'include',\n            });\n\n            if (response.ok) {\n                const userData = await response.json();\n\n                login({\n                    id: userData.id,\n                    name: userData.name,\n                    email: userData.email,\n                    type: userData.role\n                });\n\n                setMessage('Login sucessful!');\n\n            } else {\n                setMessage('Login failure: Incorrect user or password.')\n            }\n        } catch (error) {\n            console.error('Network or processing error:', error)\n            setMessage('Connection or data processing error.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n\n    \n\n    return (\n        <div style={{ ...styles.container, ...styles.centerContent }}>\n            <div style={styles.logoContainer}>\n                <img src=\"/logo-azul.png\" alt=\"Aurora Airlines Logo\" style={styles.logo} />\n            </div>\n\n            <form onSubmit={handleLogin} style={styles.form}>\n                <InputField \n                    label=\"E-mail\" \n                    name=\"email\" \n                    value={formData.email} \n                    onChange={handleChange} \n                />\n                <InputField \n                    label=\"Password\" \n                    name=\"password\" \n                    type=\"password\" \n                    value={formData.password} \n                    onChange={handleChange} \n                />\n\n                {message && <p style={{ color: message.startsWith('Fail') ? 'red' : 'green', marginTop: '20px' }}>{message}</p>}\n                \n                <button type=\"submit\" disabled={loading} style={styles.signInButton}>\n                    {loading ? 'Loading...' : 'Sign in'}\n                </button>\n            </form>\n            \n            <div style={styles.registerLinkContainer}>\n                <span style={styles.text}>Don't have an account?</span>\n                <Link to=\"/register\" style={styles.registerLink}>\n                    Register here\n                </Link>\n            </div>\n        </div>\n    );\n};\n\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    container: {\n        minHeight: '100vh',\n        backgroundColor: 'white',\n        color: '#00254A',\n    },\n    centerContent: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: '50px 20px',\n    },\n    logoContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        marginBottom: '50px',\n    },\n    logo: {\n        width: '120px', \n        height: 'auto',\n        marginBottom: '10px',\n    },\n    logoText: {\n        fontSize: '18px',\n        fontWeight: 'bold',\n        letterSpacing: '3px',\n        margin: '0',\n    },\n    form: {\n        width: '100%',\n        maxWidth: '350px',\n    },\n    inputGroup: {\n        marginBottom: '25px',\n    },\n    label: {\n        display: 'block',\n        marginBottom: '8px',\n        fontSize: '16px',\n        fontWeight: '500',\n    },\n    input: {\n        width: '100%',\n        padding: '12px',\n        border: '1px solid #ccc',\n        borderRadius: '5px',\n        boxSizing: 'border-box',\n        fontSize: '16px',\n    },\n    signInButton: {\n        width: '100%',\n        backgroundColor: '#00254A', \n        color: 'white',\n        padding: '15px',\n        border: 'none',\n        borderRadius: '5px',\n        cursor: 'pointer',\n        fontSize: '18px',\n        marginTop: '30px',\n        fontWeight: 'bold',\n        transition: 'background-color 0.3s',\n    },\n    registerLinkContainer: {\n        marginTop: '30px',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    text: {\n        color: '#555',\n        marginBottom: '5px',\n    },\n    registerLink: {\n        color: '#00254A',\n        textDecoration: 'underline',\n        fontWeight: 'bold',\n    }\n};\n\nexport default LoginScreen;","size_bytes":7443},"frontend/src/pages/CheckoutPage.tsx":{"content":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useBooking } from '../contexts/BookingContext';\nimport { API_BASE_URL } from '../config';\nimport jsPDF from 'jspdf';\n\nconst CheckoutPage: React.FC = () => {\n    const navigate = useNavigate();\n    const { logout } = useAuth();\n    const {\n        departureFlight,\n        departureSeats,\n        returnFlight,\n        returnSeats,\n        passengerCount,\n        passengers,\n        clearBooking\n    } = useBooking();\n\n    const [paymentMethod, setPaymentMethod] = useState<'credit_card' | 'bank_slip' | ''>('');\n    \n    const [cardNumber, setCardNumber] = useState('');\n    const [nameOnCard, setNameOnCard] = useState('');\n    const [expirationDate, setExpirationDate] = useState('');\n    const [securityNumber, setSecurityNumber] = useState('');\n    const [installments, setInstallments] = useState('1');\n    const [paymentType, setPaymentType] = useState<'debit' | 'credit'>('credit');\n    const [errors, setErrors] = useState<{[key: string]: string}>({});\n\n    if (!departureFlight || departureSeats.length === 0) {\n        navigate('/search-flights');\n        return null;\n    }\n\n    const handleSignOut = async () => {\n        try {\n            const response = await fetch(`${API_BASE_URL}/auth/logout`, {\n                method: 'POST',\n                credentials: 'include',\n            });\n            \n            if (response.ok) {\n                logout();\n                navigate('/', { replace: true });\n            }\n        } catch (error) {\n            console.error('Error logging out:', error);\n            logout();\n            navigate('/', { replace: true });\n        }\n    };\n\n    const formatTime = (time: string) => {\n        return time.substring(0, 5);\n    };\n\n    const formatDate = (dateStr: string) => {\n        const [year, month, day] = dateStr.split('-');\n        return `${day}/${month}`;\n    };\n\n    const calculatePrice = () => {\n        const basePrice = 350;\n        const internationalMultiplier = departureFlight.flightType.name.toLowerCase().includes('international') ? 2 : 1;\n        \n        let total = basePrice * internationalMultiplier * passengerCount;\n        \n        if (returnFlight) {\n            const returnInternational = returnFlight.flightType.name.toLowerCase().includes('international') ? 2 : 1;\n            total += basePrice * returnInternational * passengerCount;\n        }\n        \n        return total.toFixed(2);\n    };\n\n    const validateCreditCardForm = () => {\n        const newErrors: {[key: string]: string} = {};\n\n        if (!cardNumber) {\n            newErrors.cardNumber = 'Card number is required';\n        } else if (!/^\\d{16}$/.test(cardNumber.replace(/\\s/g, ''))) {\n            newErrors.cardNumber = 'Card number must be 16 digits';\n        }\n\n        if (!nameOnCard) {\n            newErrors.nameOnCard = 'Name on card is required';\n        } else if (!/^[a-zA-Z\\s]+$/.test(nameOnCard)) {\n            newErrors.nameOnCard = 'Name must contain only letters';\n        }\n\n        if (!expirationDate) {\n            newErrors.expirationDate = 'Expiration date is required';\n        } else if (!/^(0[1-9]|1[0-2])\\/\\d{2}$/.test(expirationDate)) {\n            newErrors.expirationDate = 'Format must be MM/YY';\n        }\n\n        if (!securityNumber) {\n            newErrors.securityNumber = 'Security number is required';\n        } else if (!/^\\d{3,4}$/.test(securityNumber)) {\n            newErrors.securityNumber = 'Security number must be 3-4 digits';\n        }\n\n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleCardNumberChange = (value: string) => {\n        const cleaned = value.replace(/\\D/g, '');\n        if (cleaned.length <= 16) {\n            const formatted = cleaned.replace(/(\\d{4})(?=\\d)/g, '$1 ');\n            setCardNumber(formatted);\n        }\n    };\n\n    const handleExpirationDateChange = (value: string) => {\n        const cleaned = value.replace(/\\D/g, '');\n        if (cleaned.length <= 4) {\n            if (cleaned.length >= 2) {\n                setExpirationDate(cleaned.substring(0, 2) + '/' + cleaned.substring(2));\n            } else {\n                setExpirationDate(cleaned);\n            }\n        }\n    };\n\n    const handleSecurityNumberChange = (value: string) => {\n        const cleaned = value.replace(/\\D/g, '');\n        if (cleaned.length <= 4) {\n            setSecurityNumber(cleaned);\n        }\n    };\n\n    const createPurchase = async (paymentMethodUsed: 'credit_card' | 'bank_slip', paymentDetailsData: any) => {\n        try {\n            const purchaseData = {\n                departureFlightId: departureFlight.id,\n                departureSeats: JSON.stringify(departureSeats),\n                returnFlightId: returnFlight ? returnFlight.id : null,\n                returnSeats: returnFlight ? JSON.stringify(returnSeats) : null,\n                passengers: JSON.stringify(passengers),\n                paymentMethod: paymentMethodUsed,\n                paymentDetails: JSON.stringify(paymentDetailsData),\n                totalPrice: parseFloat(finalPrice),\n                status: 'confirmed',\n            };\n\n            const response = await fetch(`${API_BASE_URL}/purchases`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                credentials: 'include',\n                body: JSON.stringify(purchaseData),\n            });\n\n            if (response.ok) {\n                const purchase = await response.json();\n                console.log('Purchase created successfully:', purchase);\n                alert('Booking confirmed! Your purchase ID is: ' + purchase.id);\n                clearBooking();\n                navigate('/search-flights');\n            } else {\n                const errorData = await response.json();\n                console.error('Failed to create purchase:', errorData);\n                alert('Failed to create booking. Please try again.');\n            }\n        } catch (error) {\n            console.error('Error creating purchase:', error);\n            alert('Error creating booking. Please check your connection.');\n        }\n    };\n\n    const handleConfirm = () => {\n        if (paymentMethod === 'credit_card') {\n            if (validateCreditCardForm()) {\n                const cleanCardNumber = cardNumber.replace(/\\s/g, '');\n                const lastFourDigits = cleanCardNumber.slice(-4);\n                \n                const paymentDetails = {\n                    lastFourDigits,\n                    nameOnCard,\n                    installments: parseInt(installments),\n                    paymentType,\n                };\n                createPurchase('credit_card', paymentDetails);\n            }\n        } else if (paymentMethod === 'bank_slip') {\n            const paymentDetails = {\n                bankName: 'MulberryPay Holdings',\n                barCode: '00000-09095-34343-19445',\n            };\n            createPurchase('bank_slip', paymentDetails);\n        }\n    };\n\n    const generateBankSlipPDF = () => {\n        const doc = new jsPDF();\n        const bankName = 'MulberryPay Holdings';\n        const barCode = '00000-09095-34343-19445';\n        \n        doc.setFontSize(20);\n        doc.text('Aurora Airlines - Bank Slip', 20, 20);\n        \n        doc.setFontSize(12);\n        doc.text('Payment Details', 20, 40);\n        \n        doc.setFontSize(10);\n        doc.text(`Bank: ${bankName}`, 20, 55);\n        doc.text(`Bar Code: ${barCode}`, 20, 65);\n        doc.text(`Amount: ${finalPrice} USD`, 20, 75);\n        \n        doc.text('Flight Details:', 20, 95);\n        doc.text(`Route: ${departureFlight.originAirport.city} ‚Üí ${departureFlight.destinationAirport.city}`, 20, 105);\n        doc.text(`Departure: ${departureFlight.departureDate} at ${formatTime(departureFlight.departureTime)}`, 20, 115);\n        doc.text(`Passengers: ${passengerCount}`, 20, 125);\n        \n        if (returnFlight) {\n            doc.text(`Return: ${returnFlight.originAirport.city} ‚Üí ${returnFlight.destinationAirport.city}`, 20, 135);\n            doc.text(`Return Date: ${returnFlight.departureDate} at ${formatTime(returnFlight.departureTime)}`, 20, 145);\n        }\n        \n        doc.text('Please pay this amount at any MulberryPay Holdings branch or authorized agent.', 20, 170);\n        doc.text('This bank slip is valid for 3 days from the issue date.', 20, 180);\n        \n        doc.save('aurora-airlines-bank-slip.pdf');\n    };\n\n    const finalPrice = calculatePrice();\n\n    return (\n        <div style={styles.pageContainer}>\n            <nav style={styles.navbar}>\n                <div style={styles.logoContainer}>\n                    <img src=\"/logo-branca.png\" alt=\"Aurora Airlines\" style={styles.logo} />\n                </div>\n                <button onClick={handleSignOut} style={styles.signOutButton}>\n                    Sign out\n                </button>\n            </nav>\n\n            <div style={styles.mainContent}>\n                <div style={styles.contentContainer}>\n                    <div style={styles.card}>\n                        <h2 style={styles.sectionTitle}>Details:</h2>\n                        \n                        <div style={styles.flightDetails}>\n                            <div style={styles.routeInfo}>\n                                <div style={styles.routeSection}>\n                                    <span style={styles.cityDate}>\n                                        {departureFlight.originAirport.city} ({formatDate(departureFlight.departureDate)})\n                                    </span>\n                                    <span style={styles.time}>{formatTime(departureFlight.departureTime)}</span>\n                                </div>\n                                \n                                <span style={styles.arrow}>‚Üí</span>\n                                \n                                <div style={styles.routeSection}>\n                                    <span style={styles.cityDate}>\n                                        {departureFlight.destinationAirport.city} ({formatDate(departureFlight.arrivalDate)})\n                                    </span>\n                                    <span style={styles.time}>{formatTime(departureFlight.arrivalTime)}</span>\n                                </div>\n                            </div>\n                            \n                            <div style={styles.flightInfo}>\n                                {departureFlight.flightType.name} - Duration: {departureFlight.estimatedDuration}\n                            </div>\n                            \n                            {returnFlight && (\n                                <>\n                                    <div style={styles.routeInfo}>\n                                        <div style={styles.routeSection}>\n                                            <span style={styles.cityDate}>\n                                                {returnFlight.originAirport.city} ({formatDate(returnFlight.departureDate)})\n                                            </span>\n                                            <span style={styles.time}>{formatTime(returnFlight.departureTime)}</span>\n                                        </div>\n                                        \n                                        <span style={styles.arrow}>‚Üí</span>\n                                        \n                                        <div style={styles.routeSection}>\n                                            <span style={styles.cityDate}>\n                                                {returnFlight.destinationAirport.city} ({formatDate(returnFlight.arrivalDate)})\n                                            </span>\n                                            <span style={styles.time}>{formatTime(returnFlight.arrivalTime)}</span>\n                                        </div>\n                                    </div>\n                                    \n                                    <div style={styles.flightInfo}>\n                                        {returnFlight.flightType.name} - Duration: {returnFlight.estimatedDuration}\n                                    </div>\n                                </>\n                            )}\n                            \n                            <div style={styles.passengers}>\n                                {passengerCount} passenger{passengerCount > 1 ? 's' : ''}\n                            </div>\n                        </div>\n\n                        <div style={styles.priceSection}>\n                            <span style={styles.priceLabel}>Final Price</span>\n                            <span style={styles.priceValue}>{finalPrice} USD</span>\n                        </div>\n\n                        <div style={styles.paymentMethodSection}>\n                            <h3 style={styles.paymentMethodTitle}>Payment method:</h3>\n                            <select\n                                value={paymentMethod}\n                                onChange={(e) => setPaymentMethod(e.target.value as 'credit_card' | 'bank_slip' | '')}\n                                style={styles.paymentMethodSelect}\n                            >\n                                <option value=\"\">Select payment method</option>\n                                <option value=\"credit_card\">Credit Card</option>\n                                <option value=\"bank_slip\">Bank Slip</option>\n                            </select>\n                        </div>\n\n                        {paymentMethod === 'credit_card' && (\n                            <div style={styles.paymentDetailsSection}>\n                                <div style={styles.formGrid}>\n                                    <div style={styles.formGroup}>\n                                        <label style={styles.label}>Card number</label>\n                                        <input\n                                            type=\"text\"\n                                            value={cardNumber}\n                                            onChange={(e) => handleCardNumberChange(e.target.value)}\n                                            placeholder=\"1234 5678 9012 3456\"\n                                            style={{\n                                                ...styles.input,\n                                                ...(errors.cardNumber ? styles.inputError : {})\n                                            }}\n                                        />\n                                        {errors.cardNumber && <span style={styles.errorText}>{errors.cardNumber}</span>}\n                                    </div>\n\n                                    <div style={styles.formGroup}>\n                                        <label style={styles.label}>Name on card</label>\n                                        <input\n                                            type=\"text\"\n                                            value={nameOnCard}\n                                            onChange={(e) => setNameOnCard(e.target.value)}\n                                            placeholder=\"John Doe\"\n                                            style={{\n                                                ...styles.input,\n                                                ...(errors.nameOnCard ? styles.inputError : {})\n                                            }}\n                                        />\n                                        {errors.nameOnCard && <span style={styles.errorText}>{errors.nameOnCard}</span>}\n                                    </div>\n\n                                    <div style={styles.formGroup}>\n                                        <label style={styles.label}>Expiration date</label>\n                                        <input\n                                            type=\"text\"\n                                            value={expirationDate}\n                                            onChange={(e) => handleExpirationDateChange(e.target.value)}\n                                            placeholder=\"MM/YY\"\n                                            style={{\n                                                ...styles.input,\n                                                ...(errors.expirationDate ? styles.inputError : {})\n                                            }}\n                                        />\n                                        {errors.expirationDate && <span style={styles.errorText}>{errors.expirationDate}</span>}\n                                    </div>\n\n                                    <div style={styles.formGroup}>\n                                        <label style={styles.label}>Security number</label>\n                                        <input\n                                            type=\"text\"\n                                            value={securityNumber}\n                                            onChange={(e) => handleSecurityNumberChange(e.target.value)}\n                                            placeholder=\"123\"\n                                            style={{\n                                                ...styles.input,\n                                                ...(errors.securityNumber ? styles.inputError : {})\n                                            }}\n                                        />\n                                        {errors.securityNumber && <span style={styles.errorText}>{errors.securityNumber}</span>}\n                                    </div>\n\n                                    <div style={styles.formGroup}>\n                                        <label style={styles.label}>Installments</label>\n                                        <select\n                                            value={installments}\n                                            onChange={(e) => setInstallments(e.target.value)}\n                                            style={styles.select}\n                                        >\n                                            <option value=\"1\">1x of {finalPrice} USD</option>\n                                            <option value=\"2\">2x of {(parseFloat(finalPrice) / 2).toFixed(2)} USD</option>\n                                            <option value=\"3\">3x of {(parseFloat(finalPrice) / 3).toFixed(2)} USD</option>\n                                        </select>\n                                    </div>\n\n                                    <div style={styles.formGroup}>\n                                        <div style={styles.radioGroup}>\n                                            <label style={styles.radioLabel}>\n                                                <input\n                                                    type=\"radio\"\n                                                    value=\"debit\"\n                                                    checked={paymentType === 'debit'}\n                                                    onChange={() => setPaymentType('debit')}\n                                                    style={styles.radio}\n                                                />\n                                                Debit\n                                            </label>\n                                            <label style={styles.radioLabel}>\n                                                <input\n                                                    type=\"radio\"\n                                                    value=\"credit\"\n                                                    checked={paymentType === 'credit'}\n                                                    onChange={() => setPaymentType('credit')}\n                                                    style={styles.radio}\n                                                />\n                                                Credit\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {paymentMethod === 'bank_slip' && (\n                            <div style={styles.paymentDetailsSection}>\n                                <div style={styles.bankSlipDetails}>\n                                    <div style={styles.bankSlipRow}>\n                                        <span style={styles.bankSlipLabel}>Bank:</span>\n                                        <span style={styles.bankSlipValue}>MulberryPay Holdings</span>\n                                    </div>\n                                    <div style={styles.bankSlipRow}>\n                                        <span style={styles.bankSlipLabel}>Bar code:</span>\n                                        <span style={styles.bankSlipValue}>00000-09095-34343-19445</span>\n                                    </div>\n                                </div>\n                                <div style={styles.printButtonContainer}>\n                                    <button onClick={generateBankSlipPDF} style={styles.printButton}>\n                                        Print bank slip\n                                    </button>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {paymentMethod && (\n                        <div style={styles.buttonContainer}>\n                            <button onClick={handleConfirm} style={styles.confirmButton}>\n                                Confirm\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    pageContainer: {\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#e5e7eb',\n    },\n    navbar: {\n        backgroundColor: '#1e3a5f',\n        padding: '1rem 2rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logo: {\n        height: '50px',\n        width: 'auto',\n    },\n    signOutButton: {\n        backgroundColor: '#34d399',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n    },\n    mainContent: {\n        flex: 1,\n        padding: '2rem',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'flex-start',\n    },\n    contentContainer: {\n        width: '100%',\n        maxWidth: '600px',\n    },\n    card: {\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        padding: '2rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n    },\n    sectionTitle: {\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        marginBottom: '1rem',\n        color: '#1f2937',\n    },\n    flightDetails: {\n        marginBottom: '1.5rem',\n    },\n    routeInfo: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        marginBottom: '0.5rem',\n    },\n    routeSection: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.25rem',\n    },\n    cityDate: {\n        fontSize: '0.875rem',\n        color: '#1f2937',\n    },\n    time: {\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        color: '#1f2937',\n    },\n    arrow: {\n        fontSize: '1.5rem',\n        color: '#6b7280',\n    },\n    flightInfo: {\n        fontSize: '0.875rem',\n        color: '#6b7280',\n        marginBottom: '1rem',\n    },\n    passengers: {\n        fontSize: '0.875rem',\n        color: '#1f2937',\n        marginTop: '0.5rem',\n    },\n    priceSection: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingTop: '1rem',\n        borderTop: '1px solid #e5e7eb',\n        marginBottom: '2rem',\n    },\n    priceLabel: {\n        fontSize: '1rem',\n        fontWeight: '600',\n        color: '#1f2937',\n    },\n    priceValue: {\n        fontSize: '1.25rem',\n        fontWeight: '700',\n        color: '#1f2937',\n    },\n    paymentMethodSection: {\n        marginTop: '2rem',\n        marginBottom: '1.5rem',\n    },\n    paymentMethodTitle: {\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        marginBottom: '1rem',\n        color: '#1f2937',\n    },\n    paymentMethodSelect: {\n        width: '100%',\n        padding: '0.75rem',\n        border: '1px solid #d1d5db',\n        borderRadius: '4px',\n        fontSize: '0.875rem',\n        outline: 'none',\n        backgroundColor: 'white',\n        cursor: 'pointer',\n    },\n    paymentDetailsSection: {\n        marginTop: '2rem',\n        paddingTop: '2rem',\n        borderTop: '1px solid #e5e7eb',\n    },\n    formGrid: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '1rem',\n    },\n    formGroup: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.5rem',\n    },\n    label: {\n        fontSize: '0.875rem',\n        color: '#374151',\n        fontWeight: '500',\n    },\n    input: {\n        padding: '0.75rem',\n        border: '1px solid #d1d5db',\n        borderRadius: '4px',\n        fontSize: '0.875rem',\n        outline: 'none',\n    },\n    inputError: {\n        borderColor: '#ef4444',\n    },\n    select: {\n        padding: '0.75rem',\n        border: '1px solid #d1d5db',\n        borderRadius: '4px',\n        fontSize: '0.875rem',\n        outline: 'none',\n        backgroundColor: 'white',\n        cursor: 'pointer',\n    },\n    radioGroup: {\n        display: 'flex',\n        gap: '2rem',\n        alignItems: 'center',\n        paddingTop: '1.75rem',\n    },\n    radioLabel: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n        fontSize: '0.875rem',\n        color: '#374151',\n        cursor: 'pointer',\n    },\n    radio: {\n        width: '1rem',\n        height: '1rem',\n        cursor: 'pointer',\n    },\n    errorText: {\n        fontSize: '0.75rem',\n        color: '#ef4444',\n    },\n    buttonContainer: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: '2rem',\n    },\n    confirmButton: {\n        backgroundColor: '#1e3a5f',\n        color: 'white',\n        border: 'none',\n        padding: '0.875rem 4rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    bankSlipDetails: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '1rem',\n        marginBottom: '2rem',\n    },\n    bankSlipRow: {\n        display: 'flex',\n        gap: '1rem',\n        alignItems: 'center',\n    },\n    bankSlipLabel: {\n        fontSize: '0.875rem',\n        color: '#374151',\n        fontWeight: '600',\n        minWidth: '80px',\n    },\n    bankSlipValue: {\n        fontSize: '0.875rem',\n        color: '#1f2937',\n    },\n    printButtonContainer: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: '1rem',\n    },\n    printButton: {\n        backgroundColor: '#1e88e5',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '0.875rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n};\n\nexport default CheckoutPage;\n","size_bytes":27852},"frontend/src/pages/FlightResultsPage.tsx":{"content":"import React from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useBooking } from '../contexts/BookingContext';\nimport { API_BASE_URL } from '../config';\nimport { Flight } from '../flights.constants';\n\ninterface LocationState {\n    results: Flight[];\n    searchData: {\n        from: string;\n        to: string;\n        departureDate: string;\n        returnDate: string;\n    };\n    isReturn: boolean;\n}\n\nconst FlightResultsPage: React.FC = () => {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { logout } = useAuth();\n    const { searchData: bookingSearchData } = useBooking();\n    const state = location.state as LocationState;\n\n    const results = state?.results || [];\n    const searchData = state?.searchData || bookingSearchData;\n    const isReturn = state?.isReturn || false;\n\n    const handleSignOut = async () => {\n        try {\n            const response = await fetch(`${API_BASE_URL}/auth/logout`, {\n                method: 'POST',\n                credentials: 'include',\n            });\n            \n            if (response.ok) {\n                logout();\n                navigate('/', { replace: true });\n            }\n        } catch (error) {\n            console.error('Error logging out:', error);\n            logout();\n            navigate('/', { replace: true });\n        }\n    };\n\n    const handleFlightClick = (flight: Flight) => {\n        navigate('/flight-details', { \n            state: { \n                flight, \n                searchData,\n                isReturn\n            } \n        });\n    };\n\n    const handleBackToSearch = () => {\n        navigate('/search-flights');\n    };\n\n    const handleSkipReturn = () => {\n        console.log('Skipping return flight and proceeding to passenger info');\n        navigate('/passenger-info');\n    };\n\n    const formatTime = (time: string) => {\n        return time.substring(0, 5);\n    };\n\n    return (\n        <div style={styles.pageContainer}>\n            <nav style={styles.navbar}>\n                <div style={styles.logoContainer}>\n                    <img src=\"/logo-branca.png\" alt=\"Aurora Airlines\" style={styles.logo} />\n                </div>\n                <button onClick={handleSignOut} style={styles.signOutButton}>\n                    Sign out\n                </button>\n            </nav>\n\n            <div style={styles.mainContent}>\n                <div style={styles.contentContainer}>\n                    {!isReturn && (\n                        <button onClick={handleBackToSearch} style={styles.backButton}>\n                            ‚Üê Go back to search\n                        </button>\n                    )}\n\n                    {isReturn && searchData && (\n                        <div style={styles.routeDisplay}>\n                            <div style={styles.routeItem}>\n                                <span style={styles.planeIcon}>‚úà</span>\n                                <span style={styles.label}>From:</span>\n                                <span style={styles.city}>{searchData.to}</span>\n                            </div>\n                            <div style={styles.routeItem}>\n                                <span style={styles.personIcon}>üë§</span>\n                                <span style={styles.label}>To:</span>\n                                <span style={styles.city}>{searchData.from}</span>\n                            </div>\n                        </div>\n                    )}\n\n                    {isReturn && (\n                        <button onClick={handleBackToSearch} style={styles.searchAnotherLink}>\n                            Search for another flight\n                        </button>\n                    )}\n\n                    <h1 style={styles.title}>\n                        {isReturn \n                            ? 'Choose your return flight:' \n                            : `Available departure flights from ${searchData?.from} to ${searchData?.to}`\n                        }\n                    </h1>\n\n                    <div style={styles.resultsContainer}>\n                        {results.length === 0 ? (\n                            <div style={styles.noResults}>\n                                <p>No flights found for your search criteria.</p>\n                                <button onClick={handleBackToSearch} style={styles.searchAgainButton}>\n                                    Search again\n                                </button>\n                            </div>\n                        ) : (\n                            results.map((flight) => (\n                                <div \n                                    key={flight.id} \n                                    style={styles.flightCard}\n                                    onClick={() => handleFlightClick(flight)}\n                                >\n                                    <div style={styles.flightHeader}>\n                                        <span style={styles.flightNumber}>Flight {flight.flightNumber}</span>\n                                        <span style={styles.aircraftType}>{flight.aircraftType.type}</span>\n                                    </div>\n                                    \n                                    <div style={styles.flightRoute}>\n                                        <div style={styles.routePoint}>\n                                            <div style={styles.airportCode}>{flight.originAirport.IATA}</div>\n                                            <div style={styles.time}>{formatTime(flight.departureTime)}</div>\n                                            <div style={styles.cityName}>{flight.originAirport.city}</div>\n                                        </div>\n                                        \n                                        <div style={styles.routeLine}>\n                                            <div style={styles.duration}>{flight.estimatedDuration}</div>\n                                            <div style={styles.arrow}>‚Üí</div>\n                                        </div>\n                                        \n                                        <div style={styles.routePoint}>\n                                            <div style={styles.airportCode}>{flight.destinationAirport.IATA}</div>\n                                            <div style={styles.time}>{formatTime(flight.arrivalTime)}</div>\n                                            <div style={styles.cityName}>{flight.destinationAirport.city}</div>\n                                        </div>\n                                    </div>\n\n                                    <div style={styles.flightFooter}>\n                                        <span style={styles.flightType}>{flight.flightType.name}</span>\n                                        <span style={styles.date}>{flight.departureDate}</span>\n                                        <span style={styles.selectButton}>Select ‚Üí</span>\n                                    </div>\n                                </div>\n                            ))\n                        )}\n                        \n                        {isReturn && (\n                            <div style={styles.skipReturnContainer}>\n                                <button onClick={handleSkipReturn} style={styles.skipReturnButton}>\n                                    Skip return flight and proceed to checkout\n                                </button>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    pageContainer: {\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#f3f4f6',\n    },\n    navbar: {\n        backgroundColor: '#1e3a5f',\n        padding: '1rem 2rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logo: {\n        height: '50px',\n        width: 'auto',\n    },\n    signOutButton: {\n        backgroundColor: '#34d399',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        transition: 'background-color 0.3s',\n    },\n    mainContent: {\n        flex: 1,\n        padding: '2rem',\n    },\n    contentContainer: {\n        maxWidth: '1200px',\n        margin: '0 auto',\n    },\n    backButton: {\n        backgroundColor: 'transparent',\n        border: 'none',\n        color: '#1e3a5f',\n        fontSize: '1rem',\n        cursor: 'pointer',\n        marginBottom: '1.5rem',\n        display: 'flex',\n        alignItems: 'center',\n        padding: '0.5rem',\n    },\n    title: {\n        fontSize: '1.875rem',\n        fontWeight: '700',\n        color: '#1f2937',\n        marginBottom: '2rem',\n    },\n    resultsContainer: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '1.5rem',\n    },\n    flightCard: {\n        backgroundColor: 'white',\n        borderRadius: '12px',\n        padding: '1.5rem',\n        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n        cursor: 'pointer',\n        transition: 'transform 0.2s, box-shadow 0.2s',\n    },\n    flightHeader: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '1rem',\n        paddingBottom: '1rem',\n        borderBottom: '1px solid #e5e7eb',\n    },\n    flightNumber: {\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        color: '#1e3a5f',\n    },\n    aircraftType: {\n        fontSize: '0.875rem',\n        color: '#6b7280',\n    },\n    flightRoute: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '1rem',\n    },\n    routePoint: {\n        flex: 1,\n        textAlign: 'center',\n    },\n    airportCode: {\n        fontSize: '1.5rem',\n        fontWeight: '700',\n        color: '#1e3a5f',\n    },\n    time: {\n        fontSize: '1.125rem',\n        color: '#4b5563',\n        marginTop: '0.25rem',\n    },\n    cityName: {\n        fontSize: '0.875rem',\n        color: '#6b7280',\n        marginTop: '0.25rem',\n    },\n    routeLine: {\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    duration: {\n        fontSize: '0.875rem',\n        color: '#6b7280',\n        marginBottom: '0.5rem',\n    },\n    arrow: {\n        fontSize: '1.5rem',\n        color: '#0e7490',\n    },\n    flightFooter: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        paddingTop: '1rem',\n        borderTop: '1px solid #e5e7eb',\n    },\n    date: {\n        fontSize: '0.875rem',\n        color: '#6b7280',\n    },\n    selectButton: {\n        color: '#0e7490',\n        fontWeight: '600',\n        fontSize: '0.875rem',\n    },\n    noResults: {\n        textAlign: 'center',\n        padding: '3rem',\n        backgroundColor: 'white',\n        borderRadius: '12px',\n    },\n    searchAgainButton: {\n        backgroundColor: '#0e7490',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        marginTop: '1rem',\n    },\n    routeDisplay: {\n        backgroundColor: 'white',\n        borderRadius: '12px',\n        padding: '1.5rem',\n        marginBottom: '1rem',\n        display: 'flex',\n        justifyContent: 'space-around',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    routeItem: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n    },\n    planeIcon: {\n        fontSize: '1.25rem',\n    },\n    personIcon: {\n        fontSize: '1.25rem',\n    },\n    label: {\n        fontSize: '0.95rem',\n        color: '#6b7280',\n    },\n    city: {\n        fontSize: '1rem',\n        fontWeight: '600',\n        color: '#1f2937',\n    },\n    searchAnotherLink: {\n        backgroundColor: 'transparent',\n        border: 'none',\n        color: '#1f2937',\n        fontSize: '0.95rem',\n        cursor: 'pointer',\n        marginBottom: '1.5rem',\n        padding: '0',\n        textDecoration: 'underline',\n    },\n    flightType: {\n        fontSize: '0.875rem',\n        color: '#6b7280',\n    },\n    skipReturnContainer: {\n        textAlign: 'center',\n        marginTop: '2rem',\n        paddingTop: '2rem',\n        borderTop: '2px solid #e5e7eb',\n    },\n    skipReturnButton: {\n        backgroundColor: 'transparent',\n        color: '#dc2626',\n        border: 'none',\n        fontSize: '0.95rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        textDecoration: 'underline',\n        padding: '0.5rem 1rem',\n    },\n};\n\nexport default FlightResultsPage;\n","size_bytes":13071},"frontend/src/pages/FlightDetailsPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useBooking } from '../contexts/BookingContext';\nimport { API_BASE_URL } from '../config';\nimport { Flight } from '../flights.constants';\nimport SeatSelectorModal from '../components/SeatSelectorModal';\n\ninterface LocationState {\n    flight: Flight;\n    searchData: {\n        from: string;\n        to: string;\n        departureDate: string;\n        returnDate: string;\n    };\n    isReturn: boolean;\n}\n\nconst FlightDetailsPage: React.FC = () => {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { logout } = useAuth();\n    const { \n        searchData: bookingSearchData,\n        setDepartureFlight,\n        setDepartureSeats,\n        setReturnFlight,\n        setReturnSeats,\n        departureSeats: savedDepartureSeats,\n        returnSeats: savedReturnSeats\n    } = useBooking();\n    const state = location.state as LocationState;\n\n    const flight = state?.flight;\n    const searchData = state?.searchData || bookingSearchData;\n    const isReturn = state?.isReturn || false;\n\n    const [selectedSeats, setSelectedSeats] = useState<string[]>([]);\n\n    useEffect(() => {\n        if (isReturn && savedReturnSeats.length > 0) {\n            setSelectedSeats(savedReturnSeats);\n        } else if (!isReturn && savedDepartureSeats.length > 0) {\n            setSelectedSeats(savedDepartureSeats);\n        }\n    }, [isReturn, savedDepartureSeats, savedReturnSeats]);\n    const [isSeatModalOpen, setIsSeatModalOpen] = useState(false);\n\n    if (!flight) {\n        navigate('/search-flights');\n        return null;\n    }\n\n    const handleSignOut = async () => {\n        try {\n            const response = await fetch(`${API_BASE_URL}/auth/logout`, {\n                method: 'POST',\n                credentials: 'include',\n            });\n            \n            if (response.ok) {\n                logout();\n                navigate('/', { replace: true });\n            }\n        } catch (error) {\n            console.error('Error logging out:', error);\n            logout();\n            navigate('/', { replace: true });\n        }\n    };\n\n    const handleSeatToggle = (seatId: string) => {\n        setSelectedSeats(prev => {\n            if (prev.includes(seatId)) {\n                return prev.filter(s => s !== seatId);\n            } else {\n                return [...prev, seatId];\n            }\n        });\n    };\n\n    const handleContinue = async () => {\n        if (selectedSeats.length === 0) {\n            alert('Please select at least one seat before continuing.');\n            return;\n        }\n\n        if (!searchData) {\n            alert('Search data is missing. Please start over.');\n            navigate('/search-flights');\n            return;\n        }\n\n        if (isReturn) {\n            setReturnFlight(flight);\n            setReturnSeats(selectedSeats);\n            \n            console.log('Return flight and seats selected!');\n            navigate('/passenger-info');\n        } else {\n            setDepartureFlight(flight);\n            setDepartureSeats(selectedSeats);\n            \n            try {\n                const returnSearchData = {\n                    from: searchData.to,\n                    to: searchData.from,\n                    departureDate: searchData.returnDate,\n                    returnDate: searchData.returnDate\n                };\n\n                const response = await fetch(`${API_BASE_URL}/flights/search`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    body: JSON.stringify(returnSearchData),\n                    credentials: 'include',\n                });\n\n                if (response.ok) {\n                    const results = await response.json();\n                    navigate('/flight-results', { \n                        state: { \n                            results, \n                            searchData: searchData,\n                            isReturn: true\n                        } \n                    });\n                } else {\n                    console.error('Return flight search failed');\n                    alert('Failed to search for return flights. Please try again.');\n                }\n            } catch (error) {\n                console.error('Error searching for return flights:', error);\n                alert('Error searching for return flights. Please try again.');\n            }\n        }\n    };\n\n    const formatTime = (time: string) => {\n        return time.substring(0, 5);\n    };\n\n    const aircraftTypeData = {\n        type: flight.aircraftType.type,\n        layoutData: flight.aircraftType.layoutData\n    };\n\n    return (\n        <div style={styles.pageContainer}>\n            <nav style={styles.navbar}>\n                <div style={styles.logoContainer}>\n                    <img src=\"/logo-branca.png\" alt=\"Aurora Airlines\" style={styles.logo} />\n                </div>\n                <button onClick={handleSignOut} style={styles.signOutButton}>\n                    Sign out\n                </button>\n            </nav>\n\n            <div style={styles.mainContent}>\n                <div style={styles.contentContainer}>\n                    <button onClick={() => navigate(-1)} style={styles.backButton}>\n                        ‚Üê Go back to the results\n                    </button>\n\n                    <div style={styles.flightRoute}>\n                        <div style={styles.routeItem}>\n                            <span style={styles.planeIcon}>‚úà</span>\n                            <span style={styles.label}>From:</span>\n                            <span style={styles.city}>{flight.originAirport.city}</span>\n                        </div>\n                        <div style={styles.routeItem}>\n                            <span style={styles.personIcon}>üë§</span>\n                            <span style={styles.label}>To:</span>\n                            <span style={styles.city}>{flight.destinationAirport.city}</span>\n                        </div>\n                    </div>\n\n                    <button onClick={() => navigate('/search-flights')} style={styles.searchAnotherLink}>\n                        Search for another flight\n                    </button>\n\n                    <div style={styles.card}>\n                        <h2 style={styles.cardTitle}>Trip summary:</h2>\n                        \n                        <div style={styles.summaryGrid}>\n                            <div style={styles.summaryItem}>\n                                <span style={styles.summaryLabel}>Departure:</span>\n                                <span style={styles.summaryValue}>\n                                    {formatTime(flight.departureTime)} {flight.originAirport.IATA}\n                                </span>\n                            </div>\n                            \n                            <div style={styles.summaryItem}>\n                                <span style={styles.summaryLabel}>Estimated arrival:</span>\n                                <span style={styles.summaryValue}>\n                                    {formatTime(flight.arrivalTime)} {flight.destinationAirport.IATA}\n                                </span>\n                            </div>\n                            \n                            <div style={styles.summaryItem}>\n                                <span style={styles.summaryLabel}>Flight duration:</span>\n                                <span style={styles.summaryValue}>{flight.estimatedDuration}</span>\n                            </div>\n                            \n                            <div style={styles.summaryItem}>\n                                <span style={styles.summaryLabel}>Aircraft:</span>\n                                <span style={styles.summaryValue}>{flight.aircraftType.type}</span>\n                            </div>\n                            \n                            <div style={styles.summaryItemFull}>\n                                <span style={styles.summaryLabel}>Flight number:</span>\n                                <span style={styles.summaryValue}>{flight.flightNumber}</span>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={styles.card}>\n                        <h2 style={styles.cardTitle}>Seats:</h2>\n                        \n                        <div style={styles.seatsContent}>\n                            <div style={styles.seatsDisplay}>\n                                <span style={styles.seatsLabel}>Seats:</span>\n                                <span style={styles.seatsValue}>\n                                    {selectedSeats.length > 0 ? selectedSeats.join(', ') : 'No seats selected'}\n                                </span>\n                            </div>\n                            \n                            <button \n                                onClick={() => setIsSeatModalOpen(true)} \n                                style={styles.chooseSeatsButton}\n                            >\n                                Choose your seats\n                            </button>\n                        </div>\n                    </div>\n\n                    <div style={styles.continueContainer}>\n                        <button onClick={handleContinue} style={styles.continueButton}>\n                            Continue\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <SeatSelectorModal\n                isOpen={isSeatModalOpen}\n                onClose={() => setIsSeatModalOpen(false)}\n                aircraftTypeData={aircraftTypeData}\n                selectedSeats={selectedSeats}\n                onSeatToggle={handleSeatToggle}\n            />\n        </div>\n    );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    pageContainer: {\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#e5e7eb',\n    },\n    navbar: {\n        backgroundColor: '#1e3a5f',\n        padding: '1rem 2rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logo: {\n        height: '50px',\n        width: 'auto',\n    },\n    signOutButton: {\n        backgroundColor: '#34d399',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n    },\n    mainContent: {\n        flex: 1,\n        padding: '2rem',\n    },\n    contentContainer: {\n        maxWidth: '800px',\n        margin: '0 auto',\n    },\n    backButton: {\n        backgroundColor: 'transparent',\n        border: 'none',\n        color: '#1f2937',\n        fontSize: '0.95rem',\n        cursor: 'pointer',\n        marginBottom: '1.5rem',\n        padding: '0.5rem 0',\n    },\n    flightRoute: {\n        backgroundColor: 'white',\n        borderRadius: '12px',\n        padding: '1.5rem',\n        marginBottom: '1rem',\n        display: 'flex',\n        justifyContent: 'space-around',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    routeItem: {\n        display: 'flex',\n        alignItems: 'center',\n        gap: '0.5rem',\n    },\n    planeIcon: {\n        fontSize: '1.25rem',\n    },\n    personIcon: {\n        fontSize: '1.25rem',\n    },\n    label: {\n        fontSize: '0.95rem',\n        color: '#6b7280',\n    },\n    city: {\n        fontSize: '1rem',\n        fontWeight: '600',\n        color: '#1f2937',\n    },\n    searchAnotherLink: {\n        backgroundColor: 'transparent',\n        border: 'none',\n        color: '#1f2937',\n        fontSize: '0.95rem',\n        cursor: 'pointer',\n        marginBottom: '2rem',\n        padding: '0',\n        textDecoration: 'underline',\n    },\n    card: {\n        backgroundColor: 'white',\n        borderRadius: '12px',\n        padding: '2rem',\n        marginBottom: '1.5rem',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    cardTitle: {\n        fontSize: '1.25rem',\n        fontWeight: '600',\n        marginBottom: '1.5rem',\n        color: '#1f2937',\n    },\n    summaryGrid: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '1.5rem',\n    },\n    summaryItem: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.5rem',\n    },\n    summaryItemFull: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.5rem',\n        gridColumn: 'span 2',\n    },\n    summaryLabel: {\n        fontSize: '0.95rem',\n        color: '#6b7280',\n    },\n    summaryValue: {\n        fontSize: '1rem',\n        fontWeight: '500',\n        color: '#1f2937',\n    },\n    seatsContent: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    seatsDisplay: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.5rem',\n    },\n    seatsLabel: {\n        fontSize: '0.95rem',\n        color: '#6b7280',\n    },\n    seatsValue: {\n        fontSize: '1rem',\n        fontWeight: '500',\n        color: '#1f2937',\n    },\n    chooseSeatsButton: {\n        backgroundColor: '#0e7490',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 1.5rem',\n        borderRadius: '8px',\n        fontSize: '0.95rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n    },\n    continueContainer: {\n        display: 'flex',\n        justifyContent: 'center',\n        marginTop: '2rem',\n    },\n    continueButton: {\n        backgroundColor: '#0e7490',\n        color: 'white',\n        border: 'none',\n        padding: '1rem 3rem',\n        borderRadius: '8px',\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        boxShadow: '0 4px 6px rgba(14, 116, 144, 0.3)',\n    },\n};\n\nexport default FlightDetailsPage;\n","size_bytes":14140},"frontend/src/contexts/BookingContext.tsx":{"content":"import React, { createContext, useContext, useState, ReactNode } from 'react';\nimport { Flight } from '../flights.constants';\n\ninterface SearchData {\n    from: string;\n    to: string;\n    departureDate: string;\n    returnDate: string;\n}\n\nexport interface PassengerData {\n    fullName: string;\n    birthday: string;\n    phoneNumber: string;\n    cpf: string;\n    email: string;\n    rg: string;\n}\n\ninterface BookingContextType {\n    searchData: SearchData | null;\n    setSearchData: (data: SearchData) => void;\n    \n    departureFlight: Flight | null;\n    setDepartureFlight: (flight: Flight) => void;\n    \n    departureSeats: string[];\n    setDepartureSeats: (seats: string[]) => void;\n    \n    returnFlight: Flight | null;\n    setReturnFlight: (flight: Flight) => void;\n    \n    returnSeats: string[];\n    setReturnSeats: (seats: string[]) => void;\n    \n    passengers: PassengerData[];\n    setPassengers: (passengers: PassengerData[]) => void;\n    \n    passengerCount: number;\n    \n    clearBooking: () => void;\n}\n\nconst BookingContext = createContext<BookingContextType | undefined>(undefined);\n\nexport const BookingProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n    const [searchData, setSearchData] = useState<SearchData | null>(null);\n    const [departureFlight, setDepartureFlight] = useState<Flight | null>(null);\n    const [departureSeats, setDepartureSeats] = useState<string[]>([]);\n    const [returnFlight, setReturnFlight] = useState<Flight | null>(null);\n    const [returnSeats, setReturnSeats] = useState<string[]>([]);\n    const [passengers, setPassengers] = useState<PassengerData[]>([]);\n\n    const passengerCount = departureSeats.length;\n\n    const clearBooking = () => {\n        setSearchData(null);\n        setDepartureFlight(null);\n        setDepartureSeats([]);\n        setReturnFlight(null);\n        setReturnSeats([]);\n        setPassengers([]);\n    };\n\n    return (\n        <BookingContext.Provider\n            value={{\n                searchData,\n                setSearchData,\n                departureFlight,\n                setDepartureFlight,\n                departureSeats,\n                setDepartureSeats,\n                returnFlight,\n                setReturnFlight,\n                returnSeats,\n                setReturnSeats,\n                passengers,\n                setPassengers,\n                passengerCount,\n                clearBooking,\n            }}\n        >\n            {children}\n        </BookingContext.Provider>\n    );\n};\n\nexport const useBooking = (): BookingContextType => {\n    const context = useContext(BookingContext);\n    if (!context) {\n        throw new Error('useBooking must be used within a BookingProvider');\n    }\n    return context;\n};\n","size_bytes":2725},"frontend/src/components/SeatSelector.tsx":{"content":"import React from 'react';\n\ntype CellType = 'seat' | 'aisle' | 'exit' | 'galley';\ntype SeatLayout = CellType[][];\n\ninterface SeatSelectorProps {\n  layoutData: string;\n  typeName: string;\n  selectedSeats: string[];\n  onSeatToggle: (seatId: string) => void;\n}\n\nconst cellClasses: Record<CellType, string> = {\n  'seat': 'bg-blue-200 hover:bg-blue-300',\n  'aisle': 'bg-gray-100 border-dashed border-gray-300',\n  'exit': 'bg-yellow-400',\n  'galley': 'bg-red-200',\n};\n\nconst SeatSelector: React.FC<SeatSelectorProps> = ({ \n  layoutData, \n  typeName, \n  selectedSeats, \n  onSeatToggle \n}) => {\n  let layout: SeatLayout = [];\n  let rows = 0;\n  let cols = 0;\n\n  try {\n    layout = JSON.parse(layoutData);\n    rows = layout.length;\n    cols = layout[0]?.length || 0;\n  } catch (e) {\n    return <p className=\"text-red-500\">Error loading seat map data.</p>;\n  }\n\n  if (rows === 0 || cols === 0) {\n    return <p className=\"text-gray-500\">No seat map defined for this aircraft type.</p>;\n  }\n\n  const getSeatId = (rowIndex: number, colIndex: number): string => {\n    return `${String.fromCharCode(65 + colIndex)}${rowIndex + 1}`;\n  };\n\n  const isSeatSelected = (seatId: string): boolean => {\n    return selectedSeats.includes(seatId);\n  };\n\n  return (\n    <div className=\"p-4 border border-gray-300 rounded-md bg-white\">\n      <h3 className=\"text-lg font-bold mb-4 text-center\">{typeName} Seat Map</h3>\n\n      <div className=\"overflow-auto max-h-[70vh]\">\n        <div \n          style={{ gridTemplateColumns: `repeat(${cols}, 40px)` }}\n          className=\"inline-grid gap-1 border p-2 bg-gray-50 shadow-inner\"\n        >\n          {layout.map((row, rowIndex) => (\n            <React.Fragment key={rowIndex}>\n              {row.map((cellType, colIndex) => {\n                const seatId = getSeatId(rowIndex, colIndex);\n                const isSelected = isSeatSelected(seatId);\n                const isSeat = cellType === 'seat';\n\n                return (\n                  <div\n                    key={colIndex}\n                    onClick={() => isSeat && onSeatToggle(seatId)}\n                    className={`w-10 h-10 flex items-center justify-center text-xs border \n                                ${cellClasses[cellType]} \n                                ${cellType === 'aisle' ? 'border-dashed' : 'rounded-sm'}\n                                ${isSeat ? 'cursor-pointer select-none' : ''}\n                                ${isSelected ? 'bg-green-500 text-white font-bold' : ''}`}\n                    title={isSeat ? `${seatId} - Click to ${isSelected ? 'deselect' : 'select'}` : `${cellType}`}\n                  >\n                    {cellType === 'seat' && seatId}\n                    {cellType === 'exit' && 'Exit'}\n                    {cellType === 'galley' && 'Galley'}\n                  </div>\n                );\n              })}\n            </React.Fragment>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"mt-4 text-sm text-gray-600 text-center\">\n        <p>Total seats: {layout.flat().filter(cell => cell === 'seat').length}</p>\n        <p className=\"mt-2\">\n          <span className=\"inline-block w-4 h-4 bg-blue-200 border mr-1\"></span> Available\n          <span className=\"inline-block w-4 h-4 bg-green-500 border ml-4 mr-1\"></span> Selected\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default SeatSelector;\n","size_bytes":3346},"frontend/src/components/SeatSelectorModal.tsx":{"content":"import React from 'react';\nimport SeatSelector from './SeatSelector';\nimport { Button } from './ui/button';\n\ninterface SeatSelectorModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    aircraftTypeData: { \n        type: string; \n        layoutData: string;\n    } | null;\n    selectedSeats: string[];\n    onSeatToggle: (seatId: string) => void;\n}\n\nconst SeatSelectorModal: React.FC<SeatSelectorModalProps> = ({ \n    isOpen, \n    onClose, \n    aircraftTypeData,\n    selectedSeats,\n    onSeatToggle\n}) => {\n    if (!isOpen || !aircraftTypeData) return null;\n\n    return (\n        <div style={modalStyles.overlay}>\n            <div style={modalStyles.container}>\n                <SeatSelector\n                    layoutData={aircraftTypeData.layoutData} \n                    typeName={aircraftTypeData.type}\n                    selectedSeats={selectedSeats}\n                    onSeatToggle={onSeatToggle}\n                />\n                \n                <div className=\"mt-6 flex justify-center\">\n                    <Button onClick={onClose} type=\"button\">\n                        Done\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default SeatSelectorModal;\n\nconst modalStyles: { [key: string]: React.CSSProperties } = {\n    overlay: {\n        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n        backgroundColor: 'rgba(0, 0, 0, 0.7)', display: 'flex',\n        justifyContent: 'center', alignItems: 'center', zIndex: 1000,\n    },\n    container: {\n        backgroundColor: 'white', padding: '20px', borderRadius: '10px',\n        width: '90%', maxWidth: '750px', boxShadow: '0 8px 15px rgba(0, 0, 0, 0.2)',\n        maxHeight: '90vh', overflowY: 'auto',\n    },\n};\n","size_bytes":1743},"backend/src/purchases/purchases.service.ts":{"content":"import { Injectable } from '@nestjs/common';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { Purchases } from './purchases.entity';\n\n@Injectable()\nexport class PurchasesService {\n  constructor(\n    @InjectRepository(Purchases)\n    private purchasesRepository: Repository<Purchases>,\n  ) {}\n\n  async create(purchaseData: Partial<Purchases>): Promise<Purchases> {\n    const purchase = this.purchasesRepository.create(purchaseData);\n    return await this.purchasesRepository.save(purchase);\n  }\n\n  async findAll(): Promise<Purchases[]> {\n    return await this.purchasesRepository.find({\n      relations: ['user', 'departureFlight', 'returnFlight', 'departureFlight.originAirport', 'departureFlight.destinationAirport', 'returnFlight.originAirport', 'returnFlight.destinationAirport'],\n    });\n  }\n\n  async findOne(id: number): Promise<Purchases | null> {\n    return await this.purchasesRepository.findOne({\n      where: { id },\n      relations: ['user', 'departureFlight', 'returnFlight', 'departureFlight.originAirport', 'departureFlight.destinationAirport', 'returnFlight.originAirport', 'returnFlight.destinationAirport'],\n    });\n  }\n\n  async findByUser(userId: number): Promise<Purchases[]> {\n    return await this.purchasesRepository.find({\n      where: { userId },\n      relations: ['departureFlight', 'returnFlight', 'departureFlight.originAirport', 'departureFlight.destinationAirport', 'returnFlight.originAirport', 'returnFlight.destinationAirport'],\n      order: { createdAt: 'DESC' },\n    });\n  }\n\n  async update(id: number, updateData: Partial<Purchases>): Promise<Purchases | null> {\n    await this.purchasesRepository.update(id, updateData);\n    return this.findOne(id);\n  }\n\n  async remove(id: number): Promise<void> {\n    await this.purchasesRepository.delete(id);\n  }\n}\n","size_bytes":1837},"backend/src/purchases/purchases.entity.ts":{"content":"import { Entity, PrimaryGeneratedColumn, Column, ManyToOne, JoinColumn } from 'typeorm';\nimport { User } from '../users/user.entity';\nimport { Flights } from '../flights/flights.entity';\n\n@Entity('purchases')\nexport class Purchases {\n  \n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  userId: number;\n\n  @ManyToOne(() => User)\n  @JoinColumn({ name: 'userId' })\n  user: User;\n\n  @Column()\n  departureFlightId: number;\n\n  @ManyToOne(() => Flights)\n  @JoinColumn({ name: 'departureFlightId' })\n  departureFlight: Flights;\n\n  @Column({ type: 'text' })\n  departureSeats: string;\n\n  @Column({ nullable: true })\n  returnFlightId: number;\n\n  @ManyToOne(() => Flights, { nullable: true })\n  @JoinColumn({ name: 'returnFlightId' })\n  returnFlight: Flights;\n\n  @Column({ type: 'text', nullable: true })\n  returnSeats: string;\n\n  @Column({ type: 'text' })\n  passengers: string;\n\n  @Column({\n    enum: ['credit_card', 'bank_slip'],\n  })\n  paymentMethod: 'credit_card' | 'bank_slip';\n\n  @Column({ type: 'text', nullable: true })\n  paymentDetails: string;\n\n  @Column({ type: 'decimal', precision: 10, scale: 2 })\n  totalPrice: number;\n\n  @Column({\n    enum: ['pending', 'confirmed', 'cancelled'],\n    default: 'pending'\n  })\n  status: 'pending' | 'confirmed' | 'cancelled';\n\n  @Column({ type: 'datetime', default: () => 'CURRENT_TIMESTAMP' })\n  createdAt: Date;\n}\n","size_bytes":1358},"backend/src/purchases/purchases.module.ts":{"content":"import { Module } from '@nestjs/common';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { PurchasesController } from './purchases.controller';\nimport { PurchasesService } from './purchases.service';\nimport { Purchases } from './purchases.entity';\n\n@Module({\n  imports: [TypeOrmModule.forFeature([Purchases])],\n  controllers: [PurchasesController],\n  providers: [PurchasesService],\n  exports: [PurchasesService],\n})\nexport class PurchasesModule {}\n","size_bytes":456},"PORT_CONFIGURATION.md":{"content":"# Port Configuration Guide\n\nThis project uses intelligent port detection to work seamlessly in both Replit and local development (VS Code).\n\n## How It Works\n\n### In Replit (Automatic)\nWhen you run the project in Replit, it automatically detects the environment and configures:\n- **Backend**: Port 3001\n- **Frontend**: Port 5000 (for Replit webview)\n\n### In Local Development / VS Code (Automatic)\nWhen you run the project locally, it automatically uses:\n- **Backend**: Port 5000\n- **Frontend**: Port 3000 (React default)\n\n## Running the Project\n\n### In Replit\nSimply click the \"Run\" button or use the workflow. Everything is configured automatically.\n\n### In VS Code / Local Development\n\n1. **Clone the repository**\n   ```bash\n   git clone <your-repo-url>\n   cd <project-directory>\n   ```\n\n2. **Install dependencies**\n   ```bash\n   # Backend\n   cd backend\n   npm install\n\n   # Frontend\n   cd ../frontend\n   npm install\n   ```\n\n3. **Run the application**\n   \n   **Option 1: Use the startup script (recommended)**\n   ```bash\n   # From project root\n   bash start.sh\n   ```\n   This starts both backend and frontend automatically with correct ports.\n\n   **Option 2: Run separately**\n   ```bash\n   # Terminal 1 - Backend (runs on port 5000)\n   cd backend\n   npm run start:dev\n\n   # Terminal 2 - Frontend (runs on port 3000)\n   cd frontend\n   npm start\n   ```\n\n4. **Access the application**\n   - Frontend: http://localhost:3000\n   - Backend API: http://localhost:5000\n\n## Environment Detection Logic\n\nThe `start.sh` script automatically detects the environment:\n\n- **Replit Detection**: Checks for `REPL_ID` environment variable\n  - Sets `BACKEND_PORT=3001` and `PORT=5000`\n- **Local Detection**: No `REPL_ID` present\n  - Sets `BACKEND_PORT=5000` and uses React's default port 3000\n\n## Database\n\nThe SQLite database (`backend/database.sqlite`) is included in the repository and works automatically in both environments. No additional configuration needed.\n\n## Troubleshooting\n\n### Port Already in Use\nIf you see \"port already in use\" errors:\n\n```bash\n# Find and kill the process using the port\n# On Linux/Mac:\nlsof -ti:5000 | xargs kill -9  # For backend\nlsof -ti:3000 | xargs kill -9  # For frontend\n\n# On Windows:\nnetstat -ano | findstr :5000\ntaskkill /PID <PID> /F\n```\n\n### API Connection Issues\nThe frontend automatically detects which backend URL to use:\n- **Replit**: Uses the same domain (proxied)\n- **Local**: Uses `http://localhost:5000`\n\nIf you need to override this, set the environment variable:\n```bash\n# In frontend/.env\nREACT_APP_API_URL=http://localhost:5000\n```\n\n## Team Workflow\n\nThe project is configured to work seamlessly for all team members regardless of their development environment:\n\n1. **No configuration needed** - Just run `bash start.sh`\n2. **Consistent ports** - Everyone uses the same port scheme locally\n3. **Replit compatibility** - Automatic detection ensures Replit works correctly\n4. **Database included** - SQLite database is version controlled\n\n## Technical Details\n\n### Files Modified for Port Configuration\n- `start.sh` - Environment detection and port assignment\n- `backend/src/main.ts` - Reads `BACKEND_PORT` env var (fallback: 5000)\n- `frontend/src/config.ts` - Detects Replit vs local environment for API URL\n\n### Environment Variables\nSee `.env.example` files in both `backend/` and `frontend/` directories for available configuration options.\n","size_bytes":3383},"backend/src/purchases/purchases.controller.ts":{"content":"import { Controller, Get, Post, Body, Param, Put, Delete, UseGuards, Request } from '@nestjs/common';\nimport { PurchasesService } from './purchases.service';\nimport { Purchases } from './purchases.entity';\nimport { SessionAuthGuard } from '../auth/session-auth.guard';\n\n@Controller('purchases')\n@UseGuards(SessionAuthGuard)\nexport class PurchasesController {\n  constructor(private readonly purchasesService: PurchasesService) {}\n\n  @Post()\n  async create(@Body() purchaseData: Partial<Purchases>, @Request() req): Promise<Purchases> {\n    purchaseData.userId = req.user.id;\n    return this.purchasesService.create(purchaseData);\n  }\n\n  @Get()\n  async findAll(): Promise<Purchases[]> {\n    return this.purchasesService.findAll();\n  }\n\n  @Get('my-purchases')\n  async findMyPurchases(@Request() req): Promise<Purchases[]> {\n    return this.purchasesService.findByUser(req.user.id);\n  }\n\n  @Get(':id')\n  async findOne(@Param('id') id: string): Promise<Purchases | null> {\n    return this.purchasesService.findOne(+id);\n  }\n\n  @Put(':id')\n  async update(\n    @Param('id') id: string,\n    @Body() updateData: Partial<Purchases>,\n  ): Promise<Purchases | null> {\n    return this.purchasesService.update(+id, updateData);\n  }\n\n  @Delete(':id')\n  async remove(@Param('id') id: string): Promise<void> {\n    return this.purchasesService.remove(+id);\n  }\n}\n","size_bytes":1345},"frontend/src/pages/PassengerInfoPage.tsx":{"content":"import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useBooking, PassengerData } from '../contexts/BookingContext';\nimport { API_BASE_URL } from '../config';\n\nconst PassengerInfoPage: React.FC = () => {\n    const navigate = useNavigate();\n    const { logout } = useAuth();\n    const {\n        departureFlight,\n        departureSeats,\n        returnFlight,\n        returnSeats,\n        passengerCount,\n        setPassengers: savePassengersToContext\n    } = useBooking();\n\n    if (!departureFlight || departureSeats.length === 0) {\n        navigate('/search-flights');\n        return null;\n    }\n\n    const initialPassengerData: PassengerData = {\n        fullName: '',\n        birthday: '',\n        phoneNumber: '',\n        cpf: '',\n        email: '',\n        rg: ''\n    };\n\n    const [passengers, setPassengers] = useState<PassengerData[]>(\n        Array(passengerCount).fill(null).map(() => ({ ...initialPassengerData }))\n    );\n\n    const handleSignOut = async () => {\n        try {\n            const response = await fetch(`${API_BASE_URL}/auth/logout`, {\n                method: 'POST',\n                credentials: 'include',\n            });\n            \n            if (response.ok) {\n                logout();\n                navigate('/', { replace: true });\n            }\n        } catch (error) {\n            console.error('Error logging out:', error);\n            logout();\n            navigate('/', { replace: true });\n        }\n    };\n\n    const handlePassengerChange = (index: number, field: keyof PassengerData, value: string) => {\n        const updatedPassengers = [...passengers];\n        updatedPassengers[index] = {\n            ...updatedPassengers[index],\n            [field]: value\n        };\n        setPassengers(updatedPassengers);\n    };\n\n    const calculatePrice = () => {\n        const basePrice = 350;\n        const internationalMultiplier = departureFlight.flightType.name.toLowerCase().includes('international') ? 2 : 1;\n        \n        let total = basePrice * internationalMultiplier * passengerCount;\n        \n        if (returnFlight) {\n            const returnInternational = returnFlight.flightType.name.toLowerCase().includes('international') ? 2 : 1;\n            total += basePrice * returnInternational * passengerCount;\n        }\n        \n        return total.toFixed(2);\n    };\n\n    const handleGoToCheckout = () => {\n        savePassengersToContext(passengers);\n        navigate('/checkout');\n    };\n\n    const finalPrice = calculatePrice();\n\n    const renderPassengerForm = (passenger: PassengerData, index: number, section: 'departure' | 'return') => (\n        <div key={`${section}-${index}`} style={styles.passengerCard}>\n            <div style={styles.formGrid}>\n                <div style={styles.formGroup}>\n                    <label style={styles.label}>Full name</label>\n                    <input\n                        type=\"text\"\n                        value={passenger.fullName}\n                        onChange={(e) => handlePassengerChange(index, 'fullName', e.target.value)}\n                        placeholder=\"Name and surname\"\n                        style={styles.input}\n                    />\n                </div>\n\n                <div style={styles.formGroup}>\n                    <label style={styles.label}>Birthday</label>\n                    <input\n                        type=\"text\"\n                        value={passenger.birthday}\n                        onChange={(e) => handlePassengerChange(index, 'birthday', e.target.value)}\n                        placeholder=\"yyyy-mm-dd\"\n                        style={styles.input}\n                    />\n                </div>\n\n                <div style={styles.formGroup}>\n                    <label style={styles.label}>Phone number</label>\n                    <input\n                        type=\"text\"\n                        value={passenger.phoneNumber}\n                        onChange={(e) => handlePassengerChange(index, 'phoneNumber', e.target.value)}\n                        placeholder=\"With country code\"\n                        style={styles.input}\n                    />\n                </div>\n\n                <div style={styles.formGroup}>\n                    <label style={styles.label}>CPF</label>\n                    <input\n                        type=\"text\"\n                        value={passenger.cpf}\n                        onChange={(e) => handlePassengerChange(index, 'cpf', e.target.value)}\n                        placeholder=\"Numbers only\"\n                        style={styles.input}\n                    />\n                </div>\n\n                <div style={styles.formGroup}>\n                    <label style={styles.label}>E-mail</label>\n                    <input\n                        type=\"email\"\n                        value={passenger.email}\n                        onChange={(e) => handlePassengerChange(index, 'email', e.target.value)}\n                        placeholder=\"example@email.com\"\n                        style={styles.input}\n                    />\n                </div>\n\n                <div style={styles.formGroup}>\n                    <label style={styles.label}>RG</label>\n                    <input\n                        type=\"text\"\n                        value={passenger.rg}\n                        onChange={(e) => handlePassengerChange(index, 'rg', e.target.value)}\n                        placeholder=\"Numbers only\"\n                        style={styles.input}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n\n    return (\n        <div style={styles.pageContainer}>\n            <nav style={styles.navbar}>\n                <div style={styles.logoContainer}>\n                    <img src=\"/logo-branca.png\" alt=\"Aurora Airlines\" style={styles.logo} />\n                </div>\n                <button onClick={handleSignOut} style={styles.signOutButton}>\n                    Sign out\n                </button>\n            </nav>\n\n            <div style={styles.mainContent}>\n                <div style={styles.contentContainer}>\n                    <h1 style={styles.title}>Passengers</h1>\n                    \n                    <div style={styles.scrollContainer}>\n                        <div style={styles.flightSection}>\n                            <h2 style={styles.flightSectionTitle}>Departure Flight</h2>\n                            {passengers.map((passenger, index) => \n                                renderPassengerForm(passenger, index, 'departure')\n                            )}\n                        </div>\n\n                        {returnFlight && (\n                            <div style={styles.flightSection}>\n                                <h2 style={styles.flightSectionTitle}>Return Flight</h2>\n                                {passengers.map((passenger, index) => \n                                    renderPassengerForm(passenger, index, 'return')\n                                )}\n                            </div>\n                        )}\n                    </div>\n\n                    <div style={styles.priceCard}>\n                        <h2 style={styles.priceTitle}>Price:</h2>\n                        <div style={styles.priceRow}>\n                            <span style={styles.priceLabel}>{passengerCount} passenger{passengerCount > 1 ? 's' : ''}</span>\n                            <span style={styles.priceValue}>{finalPrice} USD</span>\n                        </div>\n                    </div>\n\n                    <div style={styles.buttonContainer}>\n                        <button onClick={handleGoToCheckout} style={styles.checkoutButton}>\n                            Go to checkout\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst styles: { [key: string]: React.CSSProperties } = {\n    pageContainer: {\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#e5e7eb',\n    },\n    navbar: {\n        backgroundColor: '#1e3a5f',\n        padding: '1rem 2rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    logoContainer: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    logo: {\n        height: '50px',\n        width: 'auto',\n    },\n    signOutButton: {\n        backgroundColor: '#34d399',\n        color: 'white',\n        border: 'none',\n        padding: '0.75rem 2rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n    },\n    mainContent: {\n        flex: 1,\n        padding: '2rem',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'flex-start',\n    },\n    contentContainer: {\n        width: '100%',\n        maxWidth: '700px',\n    },\n    title: {\n        fontSize: '1.5rem',\n        fontWeight: '600',\n        color: '#1f2937',\n        marginBottom: '1.5rem',\n    },\n    scrollContainer: {\n        maxHeight: '400px',\n        overflowY: 'auto',\n        marginBottom: '1.5rem',\n        paddingRight: '0.5rem',\n    },\n    passengerCard: {\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        padding: '1.5rem',\n        marginBottom: '1rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n    },\n    formGrid: {\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '1rem',\n    },\n    formGroup: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.5rem',\n    },\n    label: {\n        fontSize: '0.875rem',\n        color: '#374151',\n        fontWeight: '500',\n    },\n    input: {\n        padding: '0.75rem',\n        border: '1px solid #d1d5db',\n        borderRadius: '4px',\n        fontSize: '0.875rem',\n        outline: 'none',\n    },\n    priceCard: {\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        padding: '1.5rem',\n        marginBottom: '1.5rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n    },\n    priceTitle: {\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        color: '#1f2937',\n        marginBottom: '1rem',\n    },\n    priceRow: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n    },\n    priceLabel: {\n        fontSize: '0.875rem',\n        color: '#1f2937',\n    },\n    priceValue: {\n        fontSize: '1.5rem',\n        fontWeight: '700',\n        color: '#1f2937',\n    },\n    buttonContainer: {\n        display: 'flex',\n        justifyContent: 'center',\n    },\n    checkoutButton: {\n        backgroundColor: '#1e88e5',\n        color: 'white',\n        border: 'none',\n        padding: '0.875rem 3rem',\n        borderRadius: '8px',\n        fontSize: '1rem',\n        fontWeight: '600',\n        cursor: 'pointer',\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n    },\n    flightSection: {\n        marginBottom: '2rem',\n    },\n    flightSectionTitle: {\n        fontSize: '1.125rem',\n        fontWeight: '600',\n        color: '#1e3a5f',\n        marginBottom: '1rem',\n        paddingLeft: '0.5rem',\n    },\n};\n\nexport default PassengerInfoPage;\n","size_bytes":11237}},"version":2}